<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <title>$title</title>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-110876574-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-110876574-1');
  </script>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <link rel="icon" href="favicon.png" type="image/x-icon">
  <link rel="shortcut icon" href="favicon.png" type="image/x-icon">
  <link rel="icon" href="favicon.png" type="image/ico">
  <link rel="shortcut icon" href="favicon.png" type="image/ico">
  <link rel="stylesheet" type="text/css" href="e.css">
</head>
<body>
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="PageDoc"><div class="contents">
<div class="textblock"><p></p>
<p>This is an example that illustrates how Eina_Tiler works for a given set of rectangles. The rectangles must be given in the command line in the form: &lt;width&gt;x&lt;height&gt;+&lt;x offset&gt;+&lt;y offset&gt; The example will show two panels, the first(input) will show the given rectangles(in different colors) and in the seconds(output) it will show the rectangles given by the tiler. The rectangles will be added one by one every two seconds. A lot of the example deals with actually painting the rectangles so we'll skip over quite a bit of code, but you can see all of it in <a class="el" href="eina_tiler_01_8c-example.html">eina_tiler_01.c</a>.</p>
<p>The first thing of note in our example is the creation of the tiler: </p><div class="fragment"><div class="line">   tiler = <a class="code" href="group__Eina__Tiler__Group.html#gacf71d680aadf47191ac7a4ef466382a4">eina_tiler_new</a>(maxw, maxh);</div>
<div class="ttc" id="agroup__Eina__Tiler__Group_html_gacf71d680aadf47191ac7a4ef466382a4"><div class="ttname"><a href="group__Eina__Tiler__Group.html#gacf71d680aadf47191ac7a4ef466382a4">eina_tiler_new</a></div><div class="ttdeci">EINA_API Eina_Tiler * eina_tiler_new(int w, int h)</div><div class="ttdoc">Creates a new tiler with w width and h height.</div><div class="ttdef"><b>Definition:</b> eina_tiler.c:1140</div></div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd><code>maxw</code> and <code>maxh</code> are calculated such that the tiler's size will fully encompass all given rectangles.</dd></dl>
<p>We'll now look at the function that actually adds rectangles to our tiler. It first checks if we added all rectangles already and if so stops right there:  </p><div class="fragment"><div class="line"><span class="keyword">static</span> <a class="code" href="group__Eina__Types__Group.html#ga3fe0caf72e93b1bab1ca8ee3ccf3f226">Eina_Bool</a></div>
<div class="line">process_input(<span class="keywordtype">void</span> *data <a class="code" href="group__Eina__Types__Group.html#ga82d751be730f849719ca292f9558be87">EINA_UNUSED</a>)</div>
<div class="line">{</div>
<div class="line">   <a class="code" href="struct__Eina__Iterator.html">Eina_Iterator</a> *itr;</div>
<div class="line">   <a class="code" href="struct__Eina__Rectangle.html">Eina_Rectangle</a> r, *r1;</div>
<div class="line">   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> out = 0;</div>
<div class="line"> </div>
<div class="line">   <span class="keywordflow">if</span> (input_idx == input_count)</div>
<div class="line">     {</div>
<div class="line">        add_text(<span class="stringliteral">&quot;Done. Close the window to exit&quot;</span>,</div>
<div class="line">                 WINDOW_PAD, winh - WINDOW_PAD, winw - 2 * WINDOW_PAD);</div>
<div class="line">        <span class="keywordflow">return</span> <a class="code" href="group__Eina__Types__Group.html#ga1feb115f8e9913e806e090d9bd5a7301">EINA_FALSE</a>;</div>
<div class="line">     }</div>
<div class="ttc" id="agroup__Eina__Types__Group_html_ga1feb115f8e9913e806e090d9bd5a7301"><div class="ttname"><a href="group__Eina__Types__Group.html#ga1feb115f8e9913e806e090d9bd5a7301">EINA_FALSE</a></div><div class="ttdeci">#define EINA_FALSE</div><div class="ttdoc">boolean value FALSE (numerical value 0)</div><div class="ttdef"><b>Definition:</b> eina_types.h:533</div></div>
<div class="ttc" id="agroup__Eina__Types__Group_html_ga3fe0caf72e93b1bab1ca8ee3ccf3f226"><div class="ttname"><a href="group__Eina__Types__Group.html#ga3fe0caf72e93b1bab1ca8ee3ccf3f226">Eina_Bool</a></div><div class="ttdeci">unsigned char Eina_Bool</div><div class="ttdoc">Type to mimic a boolean.</div><div class="ttdef"><b>Definition:</b> eina_types.h:527</div></div>
<div class="ttc" id="agroup__Eina__Types__Group_html_ga82d751be730f849719ca292f9558be87"><div class="ttname"><a href="group__Eina__Types__Group.html#ga82d751be730f849719ca292f9558be87">EINA_UNUSED</a></div><div class="ttdeci">#define EINA_UNUSED</div><div class="ttdoc">Used to indicate that a function parameter is purposely unused.</div><div class="ttdef"><b>Definition:</b> eina_types.h:339</div></div>
<div class="ttc" id="astruct__Eina__Iterator_html"><div class="ttname"><a href="struct__Eina__Iterator.html">_Eina_Iterator</a></div><div class="ttdoc">structure of an iterator</div><div class="ttdef"><b>Definition:</b> eina_iterator.h:159</div></div>
<div class="ttc" id="astruct__Eina__Rectangle_html"><div class="ttname"><a href="struct__Eina__Rectangle.html">_Eina_Rectangle</a></div><div class="ttdef"><b>Definition:</b> eina_rectangle.h:109</div></div>
</div><!-- fragment --><p> Our function then clears all rectangles given to us by tiler from the last execution. It does this because each rectangle we add may change everything about the output of eina_tiler: </p><div class="fragment"><div class="line"> </div>
<div class="line">   output_rects_reset();</div>
</div><!-- fragment --><p> Next we get another rectangle, print it and show it in the input panel: </p><div class="fragment"><div class="line"> </div>
<div class="line">   r = input_rects[input_idx];</div>
<div class="line">   printf(<span class="stringliteral">&quot;Iteration #%u: %dx%d%+d%+d\n&quot;</span>, input_idx, r.w, r.h, r.x, r.y);</div>
<div class="line">   input_idx++;</div>
<div class="line">   add_input_rect(&amp;r);</div>
</div><!-- fragment --><p> We now come to the tiler stuff, we add our new rectangle to it and get a new iterator for the tiler: </p><div class="fragment"><div class="line"> </div>
<div class="line">   <a class="code" href="group__Eina__Tiler__Group.html#ga12c9f9b6720db9ad343d9f5b8a6d4d5c">eina_tiler_rect_add</a>(tiler, &amp;r);</div>
<div class="line">   itr = <a class="code" href="group__Eina__Tiler__Group.html#ga3dc87a3cb5606385e14f6e12f020e8aa">eina_tiler_iterator_new</a>(tiler);</div>
<div class="ttc" id="agroup__Eina__Tiler__Group_html_ga12c9f9b6720db9ad343d9f5b8a6d4d5c"><div class="ttname"><a href="group__Eina__Tiler__Group.html#ga12c9f9b6720db9ad343d9f5b8a6d4d5c">eina_tiler_rect_add</a></div><div class="ttdeci">EINA_API Eina_Bool eina_tiler_rect_add(Eina_Tiler *t, const Eina_Rectangle *r)</div><div class="ttdoc">Adds a rectangle to a tiler.</div><div class="ttdef"><b>Definition:</b> eina_tiler.c:1222</div></div>
<div class="ttc" id="agroup__Eina__Tiler__Group_html_ga3dc87a3cb5606385e14f6e12f020e8aa"><div class="ttname"><a href="group__Eina__Tiler__Group.html#ga3dc87a3cb5606385e14f6e12f020e8aa">eina_tiler_iterator_new</a></div><div class="ttdeci">EINA_API Eina_Iterator * eina_tiler_iterator_new(const Eina_Tiler *t)</div><div class="ttdoc">Creates a iterator to access the tilers calculated rectangles.</div><div class="ttdef"><b>Definition:</b> eina_tiler.c:1291</div></div>
</div><!-- fragment --><p> We now iterate over our tiler printing every rect it gives us and sowing it in the output panel: </p><div class="fragment"><div class="line">   <a class="code" href="group__Eina__Iterator__Group.html#gac7314580e18868ef229f5d2814562794">EINA_ITERATOR_FOREACH</a>(itr, r1)</div>
<div class="line">     {</div>
<div class="line">        printf(<span class="stringliteral">&quot;\tOutput #%u: %dx%d%+d%+d\n&quot;</span>, out, r1-&gt;<a class="code" href="struct__Eina__Rectangle.html#af6a92d51ec25ee3464c81297ffc3a330">w</a>, r1-&gt;<a class="code" href="struct__Eina__Rectangle.html#a7570ed17f58fc94be997414a86130074">h</a>, r1-&gt;<a class="code" href="struct__Eina__Rectangle.html#a8358c0791dcf476432687510ca4e5d5c">x</a>, r1-&gt;<a class="code" href="struct__Eina__Rectangle.html#ae74dc834fb71a1f4cd9e3fe11dec3940">y</a>);</div>
<div class="line">        add_output_rect(r1);</div>
<div class="line">        out++;</div>
<div class="line">     }</div>
<div class="ttc" id="agroup__Eina__Iterator__Group_html_gac7314580e18868ef229f5d2814562794"><div class="ttname"><a href="group__Eina__Iterator__Group.html#gac7314580e18868ef229f5d2814562794">EINA_ITERATOR_FOREACH</a></div><div class="ttdeci">#define EINA_ITERATOR_FOREACH(itr, data)</div><div class="ttdoc">Definition for the macro to iterate over all elements easily.</div><div class="ttdef"><b>Definition:</b> eina_iterator.h:448</div></div>
<div class="ttc" id="astruct__Eina__Rectangle_html_a7570ed17f58fc94be997414a86130074"><div class="ttname"><a href="struct__Eina__Rectangle.html#a7570ed17f58fc94be997414a86130074">_Eina_Rectangle::h</a></div><div class="ttdeci">int h</div><div class="ttdoc">height of rectangle</div><div class="ttdef"><b>Definition:</b> eina_rectangle.h:113</div></div>
<div class="ttc" id="astruct__Eina__Rectangle_html_a8358c0791dcf476432687510ca4e5d5c"><div class="ttname"><a href="struct__Eina__Rectangle.html#a8358c0791dcf476432687510ca4e5d5c">_Eina_Rectangle::x</a></div><div class="ttdeci">int x</div><div class="ttdoc">top-left x coordinate of rectangle</div><div class="ttdef"><b>Definition:</b> eina_rectangle.h:110</div></div>
<div class="ttc" id="astruct__Eina__Rectangle_html_ae74dc834fb71a1f4cd9e3fe11dec3940"><div class="ttname"><a href="struct__Eina__Rectangle.html#ae74dc834fb71a1f4cd9e3fe11dec3940">_Eina_Rectangle::y</a></div><div class="ttdeci">int y</div><div class="ttdoc">top-left y coordinate of rectangle</div><div class="ttdef"><b>Definition:</b> eina_rectangle.h:111</div></div>
<div class="ttc" id="astruct__Eina__Rectangle_html_af6a92d51ec25ee3464c81297ffc3a330"><div class="ttname"><a href="struct__Eina__Rectangle.html#af6a92d51ec25ee3464c81297ffc3a330">_Eina_Rectangle::w</a></div><div class="ttdeci">int w</div><div class="ttdoc">width of rectangle</div><div class="ttdef"><b>Definition:</b> eina_rectangle.h:112</div></div>
</div><!-- fragment --><p> We of course must remember to free our iterator and that's it for this function: </p><div class="fragment"><div class="line">   <a class="code" href="group__Eina__Iterator__Group.html#ga50da005e8d26c0a043d0d1c025bc9008">eina_iterator_free</a>(itr);</div>
<div class="line"> </div>
<div class="line">   <span class="keywordflow">return</span> <a class="code" href="group__Eina__Types__Group.html#ga05c12dacc8b4058994df842b41be85fc">EINA_TRUE</a>;</div>
<div class="line">}</div>
<div class="ttc" id="agroup__Eina__Iterator__Group_html_ga50da005e8d26c0a043d0d1c025bc9008"><div class="ttname"><a href="group__Eina__Iterator__Group.html#ga50da005e8d26c0a043d0d1c025bc9008">eina_iterator_free</a></div><div class="ttdeci">EINA_API void eina_iterator_free(Eina_Iterator *iterator)</div><div class="ttdoc">Frees an iterator.</div><div class="ttdef"><b>Definition:</b> eina_iterator.c:98</div></div>
<div class="ttc" id="agroup__Eina__Types__Group_html_ga05c12dacc8b4058994df842b41be85fc"><div class="ttname"><a href="group__Eina__Types__Group.html#ga05c12dacc8b4058994df842b41be85fc">EINA_TRUE</a></div><div class="ttdeci">#define EINA_TRUE</div><div class="ttdoc">boolean value TRUE (numerical value 1)</div><div class="ttdef"><b>Definition:</b> eina_types.h:539</div></div>
</div><!-- fragment --><p> You should try many different inputs to see how the tiler works, here are a few suggestions: </p><ul>
<li>100x100+0+0 100x100+200+200 </li>
<li>100x100+0+0 100x100+5+5 100x100+10+10 100x100+15+15 100x100+20+20 </li>
<li>100x100+0+0 100x100+100+100 100x100+200+0 100x100+0+200 100x100+200+200 </li>
<li>10x10+0+0 10x10+10+10 10x10+20+0 10x10+0+20 10x10+20+20 </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<div class="footer">
  <p>
    <span class="version">EFL 1.26.99</span>
    <span class="copyright">Copyright &copy;2000-2022 <a href="http://www.enlightenment.org">enlightenment.org</a></span>
    <span class="generated">Generated @ Sat Oct 29 2022 18:10:33</span>
  </p>
</div>
</body>
</html>
