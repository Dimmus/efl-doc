<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <title>Error Tutorial</title>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-110876574-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-110876574-1');
  </script>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <link rel="icon" href="favicon.png" type="image/x-icon">
  <link rel="shortcut icon" href="favicon.png" type="image/x-icon">
  <link rel="icon" href="favicon.png" type="image/ico">
  <link rel="shortcut icon" href="favicon.png" type="image/ico">
  <link rel="stylesheet" type="text/css" href="e.css">
</head>
<body>
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Error Tutorial </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="tutorial_error_registering_msg"></a>
Registering messages</h1>
<p>The error module can provide a system that extends the errno system of the C standard library. It consists in 2 parts:</p>
<ul>
<li>A way of registering new messages with <a class="el" href="group__Eina__Error__Group.html#ga570f3e9a6807baf3f14168d205e5050a" title="Registers a new error type.">eina_error_msg_register()</a> and <a class="el" href="group__Eina__Error__Group.html#gaa92d19220b2c57d61be5e25db8257975" title="Returns the description of the given error number.">eina_error_msg_get()</a>, </li>
<li>A way of setting / getting the last error message with <a class="el" href="group__Eina__Error__Group.html#ga7e6b1448d7730fc821736bda8964d739" title="Sets the last error.">eina_error_set()</a> / <a class="el" href="group__Eina__Error__Group.html#gaf1afffc7dc1e11101f47c5d14d9c5347" title="Returns the last set error.">eina_error_get()</a>.</li>
</ul>
<p>So one has to first register all the error messages that a program or a library should manage. Then, when an error occurs, use <a class="el" href="group__Eina__Error__Group.html#ga7e6b1448d7730fc821736bda8964d739" title="Sets the last error.">eina_error_set()</a>, and when errors are managed, use <a class="el" href="group__Eina__Error__Group.html#gaf1afffc7dc1e11101f47c5d14d9c5347" title="Returns the last set error.">eina_error_get()</a>. If <a class="el" href="group__Eina__Error__Group.html#ga7e6b1448d7730fc821736bda8964d739" title="Sets the last error.">eina_error_set()</a> is used to set an error, do not forget to remove previous set errors before calling <a class="el" href="group__Eina__Error__Group.html#ga7e6b1448d7730fc821736bda8964d739" title="Sets the last error.">eina_error_set()</a>.</p>
<p>Here is an example for use:</p>
<div class="fragment"><div class="line"><span class="comment">//Compile with:</span></div>
<div class="line"><span class="comment">//gcc -g eina_error_01.c -o eina_error_01 `pkg-config --cflags --libs eina`</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;eina_main.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;eina_error.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><a class="code" href="group__Eina__Error__Group.html#ga95b3cbb33e987e7d92a81ea785001686">Eina_Error</a> MY_ERROR_NEGATIVE;</div>
<div class="line"><a class="code" href="group__Eina__Error__Group.html#ga95b3cbb33e987e7d92a81ea785001686">Eina_Error</a> MY_ERROR_NULL;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> *data_new()</div>
<div class="line">{</div>
<div class="line">   <a class="code" href="group__Eina__Error__Group.html#ga7e6b1448d7730fc821736bda8964d739">eina_error_set</a>(0);</div>
<div class="line"> </div>
<div class="line">   <a class="code" href="group__Eina__Error__Group.html#ga7e6b1448d7730fc821736bda8964d739">eina_error_set</a>(MY_ERROR_NULL);</div>
<div class="line">   <span class="keywordflow">return</span> NULL;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> test(<span class="keywordtype">int</span> n)</div>
<div class="line">{</div>
<div class="line">   <a class="code" href="group__Eina__Error__Group.html#ga7e6b1448d7730fc821736bda8964d739">eina_error_set</a>(0);</div>
<div class="line"> </div>
<div class="line">   <span class="keywordflow">if</span> (n &lt; 0)</div>
<div class="line">     {</div>
<div class="line">        <a class="code" href="group__Eina__Error__Group.html#ga7e6b1448d7730fc821736bda8964d739">eina_error_set</a>(MY_ERROR_NEGATIVE);</div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line">     }</div>
<div class="line"> </div>
<div class="line">   <span class="keywordflow">return</span> 1;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">   <span class="keywordtype">void</span> *data;</div>
<div class="line"> </div>
<div class="line">   <span class="keywordflow">if</span> (!<a class="code" href="group__Eina__Main__Group.html#ga81b8137665b8a4d2cb38ca50017d4c74">eina_init</a>())</div>
<div class="line">     {</div>
<div class="line">        printf (<span class="stringliteral">&quot;Error during the initialization of eina_error module\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> EXIT_FAILURE;</div>
<div class="line">     }</div>
<div class="line"> </div>
<div class="line">   MY_ERROR_NEGATIVE = <a class="code" href="group__Eina__Error__Group.html#ga4a2be38f81f21dab8472ffb6bfd49ab7">eina_error_msg_static_register</a>(<span class="stringliteral">&quot;Negative number&quot;</span>);</div>
<div class="line">   MY_ERROR_NULL = <a class="code" href="group__Eina__Error__Group.html#ga4a2be38f81f21dab8472ffb6bfd49ab7">eina_error_msg_static_register</a>(<span class="stringliteral">&quot;NULL pointer&quot;</span>);</div>
<div class="line"> </div>
<div class="line">   data = data_new();</div>
<div class="line">   <span class="keywordflow">if</span> (!data)</div>
<div class="line">     {</div>
<div class="line">        <a class="code" href="group__Eina__Error__Group.html#ga95b3cbb33e987e7d92a81ea785001686">Eina_Error</a> err;</div>
<div class="line"> </div>
<div class="line">        err = <a class="code" href="group__Eina__Error__Group.html#gaf1afffc7dc1e11101f47c5d14d9c5347">eina_error_get</a>();</div>
<div class="line">        <span class="keywordflow">if</span> (err)</div>
<div class="line">           printf(<span class="stringliteral">&quot;Error during memory allocation: %s\n&quot;</span>,</div>
<div class="line">                  <a class="code" href="group__Eina__Error__Group.html#gaa92d19220b2c57d61be5e25db8257975">eina_error_msg_get</a>(err));</div>
<div class="line">     }</div>
<div class="line"> </div>
<div class="line">   <span class="keywordflow">if</span> (!test(0))</div>
<div class="line">     {</div>
<div class="line">        <a class="code" href="group__Eina__Error__Group.html#ga95b3cbb33e987e7d92a81ea785001686">Eina_Error</a> err;</div>
<div class="line"> </div>
<div class="line">        err = <a class="code" href="group__Eina__Error__Group.html#gaf1afffc7dc1e11101f47c5d14d9c5347">eina_error_get</a>();</div>
<div class="line">        <span class="keywordflow">if</span> (err)</div>
<div class="line">           printf(<span class="stringliteral">&quot;Error during test function: %s\n&quot;</span>,</div>
<div class="line">                  <a class="code" href="group__Eina__Error__Group.html#gaa92d19220b2c57d61be5e25db8257975">eina_error_msg_get</a>(err));</div>
<div class="line">     }</div>
<div class="line"> </div>
<div class="line">   <span class="keywordflow">if</span> (!test(-1))</div>
<div class="line">     {</div>
<div class="line">        <a class="code" href="group__Eina__Error__Group.html#ga95b3cbb33e987e7d92a81ea785001686">Eina_Error</a> err;</div>
<div class="line"> </div>
<div class="line">        err = <a class="code" href="group__Eina__Error__Group.html#gaf1afffc7dc1e11101f47c5d14d9c5347">eina_error_get</a>();</div>
<div class="line">        <span class="keywordflow">if</span> (err)</div>
<div class="line">           printf(<span class="stringliteral">&quot;Error during test function: %s\n&quot;</span>,</div>
<div class="line">                  <a class="code" href="group__Eina__Error__Group.html#gaa92d19220b2c57d61be5e25db8257975">eina_error_msg_get</a>(err));</div>
<div class="line">     }</div>
<div class="line"> </div>
<div class="line">   <a class="code" href="group__Eina__Main__Group.html#ga5bf35513199d5220341437c05696285d">eina_shutdown</a>();</div>
<div class="line"> </div>
<div class="line">   <span class="keywordflow">return</span> EXIT_SUCCESS;</div>
<div class="line">}</div>
<div class="ttc" id="agroup__Eina__Error__Group_html_ga4a2be38f81f21dab8472ffb6bfd49ab7"><div class="ttname"><a href="group__Eina__Error__Group.html#ga4a2be38f81f21dab8472ffb6bfd49ab7">eina_error_msg_static_register</a></div><div class="ttdeci">EINA_API Eina_Error eina_error_msg_static_register(const char *msg)</div><div class="ttdoc">Registers a new error type, statically allocated message.</div><div class="ttdef"><b>Definition:</b> eina_error.c:251</div></div>
<div class="ttc" id="agroup__Eina__Error__Group_html_ga7e6b1448d7730fc821736bda8964d739"><div class="ttname"><a href="group__Eina__Error__Group.html#ga7e6b1448d7730fc821736bda8964d739">eina_error_set</a></div><div class="ttdeci">EINA_API void eina_error_set(Eina_Error err)</div><div class="ttdoc">Sets the last error.</div><div class="ttdef"><b>Definition:</b> eina_error.c:398</div></div>
<div class="ttc" id="agroup__Eina__Error__Group_html_ga95b3cbb33e987e7d92a81ea785001686"><div class="ttname"><a href="group__Eina__Error__Group.html#ga95b3cbb33e987e7d92a81ea785001686">Eina_Error</a></div><div class="ttdeci">int Eina_Error</div><div class="ttdoc">The integer type containing the error type.</div><div class="ttdef"><b>Definition:</b> eina_error.h:90</div></div>
<div class="ttc" id="agroup__Eina__Error__Group_html_gaa92d19220b2c57d61be5e25db8257975"><div class="ttname"><a href="group__Eina__Error__Group.html#gaa92d19220b2c57d61be5e25db8257975">eina_error_msg_get</a></div><div class="ttdeci">EINA_API const char * eina_error_msg_get(Eina_Error error)</div><div class="ttdoc">Returns the description of the given error number.</div><div class="ttdef"><b>Definition:</b> eina_error.c:295</div></div>
<div class="ttc" id="agroup__Eina__Error__Group_html_gaf1afffc7dc1e11101f47c5d14d9c5347"><div class="ttname"><a href="group__Eina__Error__Group.html#gaf1afffc7dc1e11101f47c5d14d9c5347">eina_error_get</a></div><div class="ttdeci">EINA_API Eina_Error eina_error_get(void)</div><div class="ttdoc">Returns the last set error.</div><div class="ttdef"><b>Definition:</b> eina_error.c:389</div></div>
<div class="ttc" id="agroup__Eina__Main__Group_html_ga5bf35513199d5220341437c05696285d"><div class="ttname"><a href="group__Eina__Main__Group.html#ga5bf35513199d5220341437c05696285d">eina_shutdown</a></div><div class="ttdeci">EINA_API int eina_shutdown(void)</div><div class="ttdoc">Shuts down the Eina library.</div><div class="ttdef"><b>Definition:</b> eina_main.c:379</div></div>
<div class="ttc" id="agroup__Eina__Main__Group_html_ga81b8137665b8a4d2cb38ca50017d4c74"><div class="ttname"><a href="group__Eina__Main__Group.html#ga81b8137665b8a4d2cb38ca50017d4c74">eina_init</a></div><div class="ttdeci">EINA_API int eina_init(void)</div><div class="ttdoc">Initializes the Eina library.</div><div class="ttdef"><b>Definition:</b> eina_main.c:291</div></div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<div class="footer">
  <p>
    <span class="version">EFL 1.26.99</span>
    <span class="copyright">Copyright &copy;2000-2022 <a href="http://www.enlightenment.org">enlightenment.org</a></span>
    <span class="generated">Generated @ Sat Oct 29 2022 18:10:31</span>
  </p>
</div>
</body>
</html>
