<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <title>Genlist - basic usage</title>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-110876574-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-110876574-1');
  </script>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <link rel="icon" href="favicon.png" type="image/x-icon">
  <link rel="shortcut icon" href="favicon.png" type="image/x-icon">
  <link rel="icon" href="favicon.png" type="image/ico">
  <link rel="shortcut icon" href="favicon.png" type="image/ico">
  <link rel="stylesheet" type="text/css" href="e.css">
</head>
<body>
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Genlist - basic usage </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This example creates a simple genlist with a small number of items and a callback that is called whenever an item is selected.</p>
<p>All the properties of this genlist are the default ones. The full code for this example can be seen at <a class="el" href="genlist_example_01_c.html">genlist_example_01.c</a>.</p>
<p>For the simplest list that you plan to create, it's necessary to define some of the basic functions that are used for creating each list item, and associating them with the "item class" for that list. The item class is just an struct that contains pointers to the specific list item functions that are common to all the items of the list.</p>
<p>Let's show it by example. Our item class is declared globally and static as it will be the only item class that we need (we are just creating one list):</p>
 <div class="fragment"><div class="line"><span class="keyword">static</span> <a class="code" href="struct__Elm__Gen__Item__Class.html">Elm_Genlist_Item_Class</a> *_itc = NULL;</div>
<div class="ttc" id="astruct__Elm__Gen__Item__Class_html"><div class="ttname"><a href="struct__Elm__Gen__Item__Class.html">_Elm_Gen_Item_Class</a></div><div class="ttdoc">Gengrid or Genlist item class definition.</div><div class="ttdef"><b>Definition:</b> elm_gen.h:109</div></div>
</div><!-- fragment --><p> This item class will be used for every item that we create. The only functions that we are going to set are <code>label_get</code> and <code>icon_get</code>. As the name suggests, they are used by the genlist to generate the label for the respective item, and to generate icon(s) to it too. Both the label and icon get functions can be called more than once for each item, with different <code>part</code> parameters, which represent where in the theme of the item that label or icon is going to be set.</p>
<p>The default theme for the genlist contains only one area for label, and two areas for icon ("elm.swallow.icon" and "elm.swallow.end"). Since we just want to set the first icon (that will be at the left side of the label), we compare the part name given with "elm.swallow.icon". Notice that the <code>label_get</code> function must return a strduped string, that will be freed later automatically by the list. Here's the code for <code>label_get</code> and <code>icon_get:</code> </p>
<div class="fragment"><div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">char</span> *</div>
<div class="line">_item_label_get(<span class="keywordtype">void</span> *data, <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *obj <a class="code" href="group__Eina__Types__Group.html#ga82d751be730f849719ca292f9558be87">EINA_UNUSED</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *part <a class="code" href="group__Eina__Types__Group.html#ga82d751be730f849719ca292f9558be87">EINA_UNUSED</a>)</div>
<div class="line">{</div>
<div class="line">   <span class="keywordtype">char</span> buf[256];</div>
<div class="line">   snprintf(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;Item # %i&quot;</span>, (<span class="keywordtype">int</span>)(uintptr_t)data);</div>
<div class="line">   <span class="keywordflow">return</span> strdup(buf);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *</div>
<div class="line">_item_content_get(<span class="keywordtype">void</span> *data <a class="code" href="group__Eina__Types__Group.html#ga82d751be730f849719ca292f9558be87">EINA_UNUSED</a>, <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *obj, <span class="keyword">const</span> <span class="keywordtype">char</span> *part)</div>
<div class="line">{</div>
<div class="line">   <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *ic = <a class="code" href="group__Elm__Icon.html#ga5739728c1209f90422cf65a778a16502">elm_icon_add</a>(obj);</div>
<div class="line"> </div>
<div class="line">   <span class="keywordflow">if</span> (!strcmp(part, <span class="stringliteral">&quot;elm.swallow.icon&quot;</span>))</div>
<div class="line">     <a class="code" href="group__Elm__Icon.html#gab764b4c6c90543f254c013eff6a6db66">elm_icon_standard_set</a>(ic, <span class="stringliteral">&quot;clock&quot;</span>);</div>
<div class="line"> </div>
<div class="line">   <a class="code" href="group__Evas__Object__Group.html#gab09d6bf93b5435230b41ceca2abe783a">evas_object_size_hint_aspect_set</a>(ic, <a class="code" href="Evas__Common_8h.html#ac68b577b7c0b79c356f01926e4a8099faeaf1e019f2dbfbbc2da9ab1fe1f175f6">EVAS_ASPECT_CONTROL_VERTICAL</a>, 1, 1);</div>
<div class="line">   <span class="keywordflow">return</span> ic;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="ttc" id="aEvas__Common_8h_html_ac68b577b7c0b79c356f01926e4a8099faeaf1e019f2dbfbbc2da9ab1fe1f175f6"><div class="ttname"><a href="Evas__Common_8h.html#ac68b577b7c0b79c356f01926e4a8099faeaf1e019f2dbfbbc2da9ab1fe1f175f6">EVAS_ASPECT_CONTROL_VERTICAL</a></div><div class="ttdeci">@ EVAS_ASPECT_CONTROL_VERTICAL</div><div class="ttdoc">Use all vertical container space to place an object, using the given aspect.</div><div class="ttdef"><b>Definition:</b> Evas_Common.h:377</div></div>
<div class="ttc" id="agroup__Eina__Types__Group_html_ga82d751be730f849719ca292f9558be87"><div class="ttname"><a href="group__Eina__Types__Group.html#ga82d751be730f849719ca292f9558be87">EINA_UNUSED</a></div><div class="ttdeci">#define EINA_UNUSED</div><div class="ttdoc">Used to indicate that a function parameter is purposely unused.</div><div class="ttdef"><b>Definition:</b> eina_types.h:339</div></div>
<div class="ttc" id="agroup__Elm__Icon_html_ga5739728c1209f90422cf65a778a16502"><div class="ttname"><a href="group__Elm__Icon.html#ga5739728c1209f90422cf65a778a16502">elm_icon_add</a></div><div class="ttdeci">Evas_Object * elm_icon_add(Evas_Object *parent)</div><div class="ttdoc">Add a new icon object to the parent.</div><div class="ttdef"><b>Definition:</b> elm_icon.c:613</div></div>
<div class="ttc" id="agroup__Elm__Icon_html_gab764b4c6c90543f254c013eff6a6db66"><div class="ttname"><a href="group__Elm__Icon.html#gab764b4c6c90543f254c013eff6a6db66">elm_icon_standard_set</a></div><div class="ttdeci">Eina_Bool elm_icon_standard_set(Evas_Object *obj, const char *name)</div><div class="ttdoc">Set the icon by icon standards names.</div><div class="ttdef"><b>Definition:</b> elm_icon.c:885</div></div>
<div class="ttc" id="agroup__Evas__Object__Group_html_ga9e19e6dd1f517a0ba437c0114d3e7c97"><div class="ttname"><a href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a></div><div class="ttdeci">Efl_Canvas_Object Evas_Object</div><div class="ttdoc">An Evas Object handle.</div><div class="ttdef"><b>Definition:</b> Evas_Common.h:185</div></div>
<div class="ttc" id="agroup__Evas__Object__Group_html_gab09d6bf93b5435230b41ceca2abe783a"><div class="ttname"><a href="group__Evas__Object__Group.html#gab09d6bf93b5435230b41ceca2abe783a">evas_object_size_hint_aspect_set</a></div><div class="ttdeci">EVAS_API void evas_object_size_hint_aspect_set(Evas_Object *obj, Evas_Aspect_Control aspect, Evas_Coord w, Evas_Coord h)</div><div class="ttdoc">Sets the hints for an object's aspect ratio.</div><div class="ttdef"><b>Definition:</b> evas_object_main.c:2581</div></div>
</div><!-- fragment --><p> We will also provide a function that will be called whenever an item is selected in the genlist. However, this function is not part of the item class, it will be passed for each item being added to the genlist explicitly. Notice the similarity of the function signature with those used by <code>evas_object_smart_callback_add:</code> </p>
<div class="fragment"><div class="line">_item_sel_cb(<span class="keywordtype">void</span> *data, <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *obj, <span class="keywordtype">void</span> *event_info)</div>
<div class="line">{</div>
<div class="line">   printf(<span class="stringliteral">&quot;sel item data [%p] on genlist obj [%p], item pointer [%p]\n&quot;</span>,</div>
<div class="line">          data, obj, event_info);</div>
<div class="line">}</div>
</div><!-- fragment --><p> Now let's show the code used for really creating the list. Skipping boilerplate code used for creating a window and background, the first piece of code specific to our genlist example is setting the pointer functions of the item class to our above defined functions:</p>
<div class="fragment"><div class="line">   <span class="keywordflow">if</span> (!_itc)</div>
<div class="line">     {</div>
<div class="line">        _itc = <a class="code" href="group__Elm__Genlist__Group.html#gabb8088ee2d6660c5d934ce3153493eb1">elm_genlist_item_class_new</a>();</div>
<div class="line">        _itc-&gt;<a class="code" href="struct__Elm__Gen__Item__Class.html#aa611ea90d00c3e0f9abe25ff56fc420f">item_style</a> = <span class="stringliteral">&quot;default&quot;</span>;</div>
<div class="line">        _itc-&gt;<a class="code" href="struct__Elm__Gen__Item__Class.html#a457622de444f6539822387321996418d">func</a>.<a class="code" href="struct__Elm__Gen__Item__Class__Functions.html#ae7a3a244fab9e126b3ac264615535c41">text_get</a> = _item_label_get;</div>
<div class="line">        _itc-&gt;<a class="code" href="struct__Elm__Gen__Item__Class.html#a457622de444f6539822387321996418d">func</a>.<a class="code" href="struct__Elm__Gen__Item__Class__Functions.html#a796220b356374cd6395bcd2c3668f8d8">content_get</a> = _item_content_get;</div>
<div class="line">        _itc-&gt;<a class="code" href="struct__Elm__Gen__Item__Class.html#a457622de444f6539822387321996418d">func</a>.<a class="code" href="struct__Elm__Gen__Item__Class__Functions.html#a23a335ae22003578adc536313f21e6e5">state_get</a> = NULL;</div>
<div class="line">        _itc-&gt;<a class="code" href="struct__Elm__Gen__Item__Class.html#a457622de444f6539822387321996418d">func</a>.<a class="code" href="struct__Elm__Gen__Item__Class__Functions.html#a29069fe3b82c13e822a3ce515e12dac0">del</a> = NULL;</div>
<div class="ttc" id="agroup__Elm__Genlist__Group_html_gabb8088ee2d6660c5d934ce3153493eb1"><div class="ttname"><a href="group__Elm__Genlist__Group.html#gabb8088ee2d6660c5d934ce3153493eb1">elm_genlist_item_class_new</a></div><div class="ttdeci">Elm_Genlist_Item_Class * elm_genlist_item_class_new(void)</div><div class="ttdoc">Create a new genlist item class in a given genlist widget.</div><div class="ttdef"><b>Definition:</b> elm_genlist.c:8392</div></div>
<div class="ttc" id="astruct__Elm__Gen__Item__Class__Functions_html_a23a335ae22003578adc536313f21e6e5"><div class="ttname"><a href="struct__Elm__Gen__Item__Class__Functions.html#a23a335ae22003578adc536313f21e6e5">_Elm_Gen_Item_Class_Functions::state_get</a></div><div class="ttdeci">Elm_Gen_Item_State_Get_Cb state_get</div><div class="ttdoc">State fetching class function for genlist/gengrid item classes.</div><div class="ttdef"><b>Definition:</b> elm_gen.h:101</div></div>
<div class="ttc" id="astruct__Elm__Gen__Item__Class__Functions_html_a29069fe3b82c13e822a3ce515e12dac0"><div class="ttname"><a href="struct__Elm__Gen__Item__Class__Functions.html#a29069fe3b82c13e822a3ce515e12dac0">_Elm_Gen_Item_Class_Functions::del</a></div><div class="ttdeci">Elm_Gen_Item_Del_Cb del</div><div class="ttdoc">Deletion class function for genlist/gengrid item classes.</div><div class="ttdef"><b>Definition:</b> elm_gen.h:102</div></div>
<div class="ttc" id="astruct__Elm__Gen__Item__Class__Functions_html_a796220b356374cd6395bcd2c3668f8d8"><div class="ttname"><a href="struct__Elm__Gen__Item__Class__Functions.html#a796220b356374cd6395bcd2c3668f8d8">_Elm_Gen_Item_Class_Functions::content_get</a></div><div class="ttdeci">Elm_Gen_Item_Content_Get_Cb content_get</div><div class="ttdoc">Content fetching class function for genlist/gengrid item classes.</div><div class="ttdef"><b>Definition:</b> elm_gen.h:100</div></div>
<div class="ttc" id="astruct__Elm__Gen__Item__Class__Functions_html_ae7a3a244fab9e126b3ac264615535c41"><div class="ttname"><a href="struct__Elm__Gen__Item__Class__Functions.html#ae7a3a244fab9e126b3ac264615535c41">_Elm_Gen_Item_Class_Functions::text_get</a></div><div class="ttdeci">Elm_Gen_Item_Text_Get_Cb text_get</div><div class="ttdoc">Text fetching class function for genlist/gengrid item classes.</div><div class="ttdef"><b>Definition:</b> elm_gen.h:99</div></div>
<div class="ttc" id="astruct__Elm__Gen__Item__Class_html_a457622de444f6539822387321996418d"><div class="ttname"><a href="struct__Elm__Gen__Item__Class.html#a457622de444f6539822387321996418d">_Elm_Gen_Item_Class::func</a></div><div class="ttdeci">Elm_Gen_Item_Class_Functions func</div><div class="ttdoc">Set of callbacks.</div><div class="ttdef"><b>Definition:</b> elm_gen.h:126</div></div>
<div class="ttc" id="astruct__Elm__Gen__Item__Class_html_aa611ea90d00c3e0f9abe25ff56fc420f"><div class="ttname"><a href="struct__Elm__Gen__Item__Class.html#aa611ea90d00c3e0f9abe25ff56fc420f">_Elm_Gen_Item_Class::item_style</a></div><div class="ttdeci">const char * item_style</div><div class="ttdoc">Name of the visual style to use for this item.</div><div class="ttdef"><b>Definition:</b> elm_gen.h:118</div></div>
</div><!-- fragment --><p> Notice that we also choose to use the "default" style for our genlist items. Another interesting point is that <code>state_get</code> and <code>del</code> are set to <code>NULL</code>, since we don't need these functions now. <code>del</code> doesn't need to be used because we don't add any data that must be freed to our items, and <code>state_get</code> is also not used since all of our items are the same and don't need to have different states to be used for each item. Finally we create our list:</p>
<div class="fragment"><div class="line">     }</div>
<div class="line"> </div>
<div class="line">   list = <a class="code" href="group__Elm__Genlist__Group.html#ga8845cb5425deadec54558b7badd16a6f">elm_genlist_add</a>(win);</div>
<div class="ttc" id="agroup__Elm__Genlist__Group_html_ga8845cb5425deadec54558b7badd16a6f"><div class="ttname"><a href="group__Elm__Genlist__Group.html#ga8845cb5425deadec54558b7badd16a6f">elm_genlist_add</a></div><div class="ttdeci">Evas_Object * elm_genlist_add(Evas_Object *parent)</div><div class="ttdoc">Add a new genlist widget to the given parent Elementary (container) object.</div><div class="ttdef"><b>Definition:</b> elm_genlist.c:5998</div></div>
</div><!-- fragment --><p> Now we append several items to the list, and for all of them we need to give the list pointer, a pointer to the item class, the data that will be used with that item, a pointer to the parent of this item if it is in a group type list (this is not the case so we pass <code>NULL</code>), possible flags for this item, the callback for when the item is selected, and the data pointer that will be given to the selected callback.</p>
<div class="fragment"><div class="line"> </div>
<div class="line">   <span class="keywordflow">for</span> (i = 0; i &lt; N_ITEMS; i++)</div>
<div class="line">     {</div>
<div class="line">        <a class="code" href="group__Elm__Genlist__Group.html#ga845c3e247cd8eae4114f98d59f42be2f">elm_genlist_item_append</a>(list, _itc,</div>
<div class="line">                                (<span class="keywordtype">void</span> *)(uintptr_t)i, NULL,</div>
<div class="line">                                <a class="code" href="group__Elm__Genlist__Item__Group.html#gga9727d3b92987319ac981247bc196bd0fa1ffe76fc4e7fd2bb40e47290c01ac0df">ELM_GENLIST_ITEM_NONE</a>,</div>
<div class="line">                                _item_sel_cb, NULL);</div>
<div class="line">     }</div>
<div class="ttc" id="agroup__Elm__Genlist__Group_html_ga845c3e247cd8eae4114f98d59f42be2f"><div class="ttname"><a href="group__Elm__Genlist__Group.html#ga845c3e247cd8eae4114f98d59f42be2f">elm_genlist_item_append</a></div><div class="ttdeci">Elm_Widget_Item * elm_genlist_item_append(Elm_Genlist *obj, const Elm_Genlist_Item_Class *itc, const void *data, Elm_Widget_Item *parent, Elm_Genlist_Item_Type type, Evas_Smart_Cb func, const void *func_data)</div><div class="ttdoc">Append a new item in a given genlist widget.</div><div class="ttdef"><b>Definition:</b> elm_genlist_eo.legacy.c:243</div></div>
<div class="ttc" id="agroup__Elm__Genlist__Item__Group_html_gga9727d3b92987319ac981247bc196bd0fa1ffe76fc4e7fd2bb40e47290c01ac0df"><div class="ttname"><a href="group__Elm__Genlist__Item__Group.html#gga9727d3b92987319ac981247bc196bd0fa1ffe76fc4e7fd2bb40e47290c01ac0df">ELM_GENLIST_ITEM_NONE</a></div><div class="ttdeci">@ ELM_GENLIST_ITEM_NONE</div><div class="ttdoc">Simple item.</div><div class="ttdef"><b>Definition:</b> elm_general.h:349</div></div>
</div><!-- fragment --><p> The rest of the code is also common to all the other examples, so it will be omitted here (look at the full source code link above if you need it).</p>
<p>You can try to play with this example, and see the selected callback being called whenever an item is clicked. It also already has some features enabled by default, like vertical bounce animation when reaching the end of the list, automatically visible/invisible scrollbar, etc. Look at the <a class="el" href="genlist_example_02.html">Genlist - list setup functions</a> to see an example of setting these properties to the list.</p>
<p>The current example will look like this when running:</p>
<div class="image">
<img src="screenshots/genlist_example_01.png" alt=""/>
</div>
  </div></div><!-- contents -->
</div><!-- PageDoc -->
<div class="footer">
  <p>
    <span class="version">EFL 1.26.99</span>
    <span class="copyright">Copyright &copy;2000-2022 <a href="http://www.enlightenment.org">enlightenment.org</a></span>
    <span class="generated">Generated @ Sat Oct 29 2022 18:10:48</span>
  </p>
</div>
</body>
</html>
