<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <title>Index widget example 1</title>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-110876574-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-110876574-1');
  </script>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <link rel="icon" href="favicon.png" type="image/x-icon">
  <link rel="shortcut icon" href="favicon.png" type="image/x-icon">
  <link rel="icon" href="favicon.png" type="image/ico">
  <link rel="shortcut icon" href="favicon.png" type="image/ico">
  <link rel="stylesheet" type="text/css" href="e.css">
</head>
<body>
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Index widget example 1 </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This code places an Elementary index widget on a window, which also has a very long list of arbitrary strings on it.</p>
<p>The list is sorted alphabetically and the index will be used to index the first items of each set of strings beginning with an alphabet letter.</p>
<p>Below the list are some buttons, which are there just to exercise some index widget's API.</p>
<p>Here's how we instantiate it:  </p><div class="fragment"></div><!-- fragment --><p>where we're showing also the list being created. Note that we issue <a class="el" href="group__Elm__Win__Group.html#ga505d6bd217e5ee01e82b548ec35986eb" title="Add subobj as a resize object of window obj.">elm_win_resize_object_add()</a> on the index, so that it's set to have the whole window as its container. Then, we have to populate both list and index widgets:  </p><div class="fragment"><div class="line">   <span class="keywordflow">for</span> (i = 0; i &lt; (<span class="keyword">sizeof</span>(dict) / <span class="keyword">sizeof</span>(dict[0])); i++)</div>
<div class="line">     {</div>
<div class="line">        lit = <a class="code" href="group__Elm__List__Group.html#ga94298fe7d5cf13a923bc8fd217b6023a">elm_list_item_append</a>(list, dict[i], NULL, NULL, NULL, NULL);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (curr != dict[i][0])</div>
<div class="line">          {</div>
<div class="line">             <a class="code" href="group__Elm__General.html#ga13a0c231414b86e62f68afe3c6fb462b">Elm_Object_Item</a> *index_it;</div>
<div class="line">             <span class="keywordtype">char</span> buf[32];</div>
<div class="line"> </div>
<div class="line">             curr = dict[i][0];</div>
<div class="line">             <span class="comment">/* indexing by first letters */</span></div>
<div class="line"> </div>
<div class="line">             snprintf(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;%c&quot;</span>, curr);</div>
<div class="line">             index_it = <a class="code" href="group__Elm__Index__Group.html#gae1ed71ea2b43737af0c348d3ae9b0524">elm_index_item_append</a>(<span class="keywordtype">id</span>, buf, NULL, lit);</div>
<div class="line"> </div>
<div class="line">             <span class="comment">/* this is here just to demostrate the API call */</span></div>
<div class="line">             (void)<a class="code" href="group__Elm__Index__Group.html#ga2a9bccce5e3aa9a6928fb9aa74bf6579">elm_index_item_find</a>(<span class="keywordtype">id</span>, lit);</div>
<div class="line">             assert(<a class="code" href="group__Elm__Index__Group.html#ga2a9bccce5e3aa9a6928fb9aa74bf6579">elm_index_item_find</a>(<span class="keywordtype">id</span>, lit) == index_it);</div>
<div class="line"> </div>
<div class="line">             <a class="code" href="group__Elm__General.html#ga2e17c3f1030712f3175f5b7812ada9a0">elm_object_item_del_cb_set</a>(index_it, _index_item_del);</div>
<div class="line">          }</div>
<div class="ttc" id="agroup__Elm__General_html_ga13a0c231414b86e62f68afe3c6fb462b"><div class="ttname"><a href="group__Elm__General.html#ga13a0c231414b86e62f68afe3c6fb462b">Elm_Object_Item</a></div><div class="ttdeci">Eo Elm_Object_Item</div><div class="ttdoc">An Elementary Object item handle.</div><div class="ttdef"><b>Definition:</b> elm_object_item.h:6</div></div>
<div class="ttc" id="agroup__Elm__General_html_ga2e17c3f1030712f3175f5b7812ada9a0"><div class="ttname"><a href="group__Elm__General.html#ga2e17c3f1030712f3175f5b7812ada9a0">elm_object_item_del_cb_set</a></div><div class="ttdeci">void elm_object_item_del_cb_set(Elm_Widget_Item *obj, Evas_Smart_Cb del_cb)</div><div class="ttdoc">Set the function to be called when an item from the widget is freed.</div><div class="ttdef"><b>Definition:</b> elm_widget_item_eo.legacy.c:231</div></div>
<div class="ttc" id="agroup__Elm__Index__Group_html_ga2a9bccce5e3aa9a6928fb9aa74bf6579"><div class="ttname"><a href="group__Elm__Index__Group.html#ga2a9bccce5e3aa9a6928fb9aa74bf6579">elm_index_item_find</a></div><div class="ttdeci">Elm_Widget_Item * elm_index_item_find(Elm_Index *obj, const void *data)</div><div class="ttdoc">Find a given index widget's item, using item data.</div><div class="ttdef"><b>Definition:</b> elm_index_eo.legacy.c:99</div></div>
<div class="ttc" id="agroup__Elm__Index__Group_html_gae1ed71ea2b43737af0c348d3ae9b0524"><div class="ttname"><a href="group__Elm__Index__Group.html#gae1ed71ea2b43737af0c348d3ae9b0524">elm_index_item_append</a></div><div class="ttdeci">Elm_Widget_Item * elm_index_item_append(Elm_Index *obj, const char *letter, Evas_Smart_Cb func, const void *data)</div><div class="ttdoc">Append a new item on a given index widget.</div><div class="ttdef"><b>Definition:</b> elm_index_eo.legacy.c:111</div></div>
<div class="ttc" id="agroup__Elm__List__Group_html_ga94298fe7d5cf13a923bc8fd217b6023a"><div class="ttname"><a href="group__Elm__List__Group.html#ga94298fe7d5cf13a923bc8fd217b6023a">elm_list_item_append</a></div><div class="ttdeci">Elm_Widget_Item * elm_list_item_append(Elm_List *obj, const char *label, Efl_Canvas_Object *icon, Efl_Canvas_Object *end, Evas_Smart_Cb func, const void *data)</div><div class="ttdoc">Append a new item to the list object.</div><div class="ttdef"><b>Definition:</b> elm_list_eo.legacy.c:129</div></div>
<div class="line">     }</div>
</div><!-- fragment --><p> The strings populating the list come from a file  </p><div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *dict[] = \</div>
<div class="line">{</div>
<div class="line"><span class="preprocessor">#include &quot;dict.txt&quot;</span></div>
<div class="line">};</div>
</div><!-- fragment --><p> We use the <code>curr</code> char variable to hold the last initial letter seen on that ordered list of strings, so that we're able to have an index item pointing to each list item starting a new letter "section". Note that our index item data pointers will be the list item handles. We are also setting a callback function to index items deletion events:  </p><div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">_index_item_del(<span class="keywordtype">void</span> *data, <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *obj <a class="code" href="group__Eina__Types__Group.html#ga82d751be730f849719ca292f9558be87">EINA_UNUSED</a>, <span class="keywordtype">void</span> *event_info)</div>
<div class="line">{</div>
<div class="line">   printf(<span class="stringliteral">&quot;Deleting index node (%s). Comparing index &quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;item data reported via callback with the one returned by &quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;index&#39;s API on items: %s.\n&quot;</span>,</div>
<div class="line">           <a class="code" href="group__Elm__Index__Item__Group.html#ga5a89c41885d917fc522922bb401d4c3c">elm_index_item_letter_get</a>(event_info),</div>
<div class="line">           data == <a class="code" href="group__Elm__General.html#ga4465a576c55d197878aeafc0bacf7bb4">elm_object_item_data_get</a>(event_info) ? <span class="stringliteral">&quot;OK&quot;</span> :</div>
<div class="line">           <span class="stringliteral">&quot;FAIL, something went wrong&quot;</span>);</div>
<div class="line">}</div>
<div class="ttc" id="agroup__Eina__Types__Group_html_ga82d751be730f849719ca292f9558be87"><div class="ttname"><a href="group__Eina__Types__Group.html#ga82d751be730f849719ca292f9558be87">EINA_UNUSED</a></div><div class="ttdeci">#define EINA_UNUSED</div><div class="ttdoc">Used to indicate that a function parameter is purposely unused.</div><div class="ttdef"><b>Definition:</b> eina_types.h:339</div></div>
<div class="ttc" id="agroup__Elm__General_html_ga4465a576c55d197878aeafc0bacf7bb4"><div class="ttname"><a href="group__Elm__General.html#ga4465a576c55d197878aeafc0bacf7bb4">elm_object_item_data_get</a></div><div class="ttdeci">void * elm_object_item_data_get(const Elm_Object_Item *it)</div><div class="ttdoc">Get the data associated with an object item.</div><div class="ttdef"><b>Definition:</b> efl_ui_widget.c:3796</div></div>
<div class="ttc" id="agroup__Elm__Index__Item__Group_html_ga5a89c41885d917fc522922bb401d4c3c"><div class="ttname"><a href="group__Elm__Index__Item__Group.html#ga5a89c41885d917fc522922bb401d4c3c">elm_index_item_letter_get</a></div><div class="ttdeci">const char * elm_index_item_letter_get(const Elm_Index_Item *obj)</div><div class="ttdoc">Get the letter (string) set on a given index widget item.</div><div class="ttdef"><b>Definition:</b> elm_index_item_eo.legacy.c:15</div></div>
<div class="ttc" id="agroup__Evas__Object__Group_html_ga9e19e6dd1f517a0ba437c0114d3e7c97"><div class="ttname"><a href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a></div><div class="ttdeci">Efl_Canvas_Object Evas_Object</div><div class="ttdoc">An Evas Object handle.</div><div class="ttdef"><b>Definition:</b> Evas_Common.h:185</div></div>
</div><!-- fragment --><p> There, we show you that the <code>event_info</code> pointer will contain the item in question's data, i.e., a given list item's pointer. Because item data is also returned in the <code>data</code> argument on <code>Evas_Smart_Cb</code> functions, those two pointers must have the same values. On this deletion callback, we're deleting the referred list item too, just to exemplify that anything could be done there.</p>
<p>Next, we hook to two smart events of the index object:  </p><div class="fragment"></div><!-- fragment --> <div class="fragment"><div class="line"><span class="comment">/* &quot;delay,changed&quot; hook */</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">_index_changed(<span class="keywordtype">void</span> *data <a class="code" href="group__Eina__Types__Group.html#ga82d751be730f849719ca292f9558be87">EINA_UNUSED</a>, <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *obj <a class="code" href="group__Eina__Types__Group.html#ga82d751be730f849719ca292f9558be87">EINA_UNUSED</a>, <span class="keywordtype">void</span> *event_info)</div>
<div class="line">{</div>
<div class="line">   elm_list_item_bring_in(<a class="code" href="group__Elm__General.html#ga4465a576c55d197878aeafc0bacf7bb4">elm_object_item_data_get</a>(event_info));</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">_index_selected(<span class="keywordtype">void</span> *data <a class="code" href="group__Eina__Types__Group.html#ga82d751be730f849719ca292f9558be87">EINA_UNUSED</a>, <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *obj, <span class="keywordtype">void</span> *event_info)</div>
<div class="line">{</div>
<div class="line">   <a class="code" href="group__Elm__General.html#ga13a0c231414b86e62f68afe3c6fb462b">Elm_Object_Item</a> *lit = event_info;</div>
<div class="line"> </div>
<div class="line">   printf(<span class="stringliteral">&quot;New index item selected. Comparing item reported&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot; via callback with the selection returned by the API: &quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;%s.\n&quot;</span>, lit == <a class="code" href="group__Elm__Index__Group.html#gada78a8c8a3908f9ce8e97c3aa03e0db0">elm_index_selected_item_get</a>(obj, 0) ? <span class="stringliteral">&quot;OK&quot;</span> :</div>
<div class="line">           <span class="stringliteral">&quot;FAIL, something went wrong&quot;</span>);</div>
<div class="line">}</div>
<div class="ttc" id="agroup__Elm__Index__Group_html_gada78a8c8a3908f9ce8e97c3aa03e0db0"><div class="ttname"><a href="group__Elm__Index__Group.html#gada78a8c8a3908f9ce8e97c3aa03e0db0">elm_index_selected_item_get</a></div><div class="ttdeci">Elm_Widget_Item * elm_index_selected_item_get(const Elm_Index *obj, int level)</div><div class="ttdoc">Returns the last selected item, for a given index widget.</div><div class="ttdef"><b>Definition:</b> elm_index_eo.legacy.c:117</div></div>
</div><!-- fragment --><p> Check that, whenever one holds the mouse pressed over a given index letter for some time, the list beneath it will roll down to the item pointed to by that index item. When one releases the mouse button, the second callback takes place. There, we check that the reported item data, on <code>event_info</code>, is the same reported by <a class="el" href="group__Elm__Index__Group.html#gada78a8c8a3908f9ce8e97c3aa03e0db0" title="Returns the last selected item, for a given index widget.">elm_index_selected_item_get()</a>, which gives the last selection's data on the index widget.</p>
<p>The first of the three buttons that follow will call <a class="el" href="group__Elm__Index__Group.html#ga6569179b38d11fb5fb1286815cf846fb" title="Enable or disable auto hiding feature for a given index widget.">elm_index_autohide_disabled_set()</a>, thus showing the index automatically for you, if it's not already visible, what is checked with <a class="el" href="group__Elm__Index__Group.html#ga4b1a080a5ddba56e53d16f97cdcfb3a1" title="Enable or disable auto hiding feature for a given index widget.">elm_index_autohide_disabled_get()</a>. The second button will exercise <b>deletion</b> of index item objects, by the following code:  </p><div class="fragment"><div class="line"><span class="comment">/* delete an index item */</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">_item_del(<span class="keywordtype">void</span> *data, <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *obj <a class="code" href="group__Eina__Types__Group.html#ga82d751be730f849719ca292f9558be87">EINA_UNUSED</a>, <span class="keywordtype">void</span> *event_info <a class="code" href="group__Eina__Types__Group.html#ga82d751be730f849719ca292f9558be87">EINA_UNUSED</a>)</div>
<div class="line">{</div>
<div class="line">   <a class="code" href="group__Elm__General.html#ga13a0c231414b86e62f68afe3c6fb462b">Elm_Object_Item</a> *it = <a class="code" href="group__Elm__Index__Group.html#gada78a8c8a3908f9ce8e97c3aa03e0db0">elm_index_selected_item_get</a>(data, 0);</div>
<div class="line"> </div>
<div class="line">   <span class="keywordflow">if</span> (!it) <span class="keywordflow">return</span>;</div>
<div class="line"> </div>
<div class="line">   printf(<span class="stringliteral">&quot;Deleting last selected index item, which had letter&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot; %s (pointing to %p)\n&quot;</span>, <a class="code" href="group__Elm__Index__Item__Group.html#ga5a89c41885d917fc522922bb401d4c3c">elm_index_item_letter_get</a>(it),</div>
<div class="line">           <a class="code" href="group__Elm__General.html#ga4465a576c55d197878aeafc0bacf7bb4">elm_object_item_data_get</a>(it));</div>
<div class="line"> </div>
<div class="line">   <a class="code" href="group__Elm__General.html#gad1b5a0d41fa322b28000a290154ec3a4">elm_object_item_del</a>(it);</div>
<div class="line">   <a class="code" href="group__Elm__Index__Group.html#ga3bb92a868f63463403668a4bbcda21d1">elm_index_level_go</a>(data, 0);</div>
<div class="line">}</div>
<div class="ttc" id="agroup__Elm__General_html_gad1b5a0d41fa322b28000a290154ec3a4"><div class="ttname"><a href="group__Elm__General.html#gad1b5a0d41fa322b28000a290154ec3a4">elm_object_item_del</a></div><div class="ttdeci">void elm_object_item_del(Eo *obj)</div><div class="ttdoc">Delete the given item.</div><div class="ttdef"><b>Definition:</b> elm_main.c:2017</div></div>
<div class="ttc" id="agroup__Elm__Index__Group_html_ga3bb92a868f63463403668a4bbcda21d1"><div class="ttname"><a href="group__Elm__Index__Group.html#ga3bb92a868f63463403668a4bbcda21d1">elm_index_level_go</a></div><div class="ttdeci">void elm_index_level_go(Elm_Index *obj, int level)</div><div class="ttdoc">Flush the changes made to the index items so they work correctly.</div><div class="ttdef"><b>Definition:</b> elm_index_eo.legacy.c:75</div></div>
</div><!-- fragment --><p> It will get the last index item selected's data and find the respective index item handle(<a class="el" href="group__Elm__General.html#ga13a0c231414b86e62f68afe3c6fb462b" title="An Elementary Object item handle.">Elm_Object_Item</a>) with <a class="el" href="group__Elm__Index__Group.html#ga2a9bccce5e3aa9a6928fb9aa74bf6579" title="Find a given index widget&#39;s item, using item data.">elm_index_item_find()</a>. We need the latter to query the indexing letter string from, with <a class="el" href="group__Elm__Index__Item__Group.html#ga5a89c41885d917fc522922bb401d4c3c" title="Get the letter (string) set on a given index widget item.">elm_index_item_letter_get()</a>. Next, comes the deletion itself, which will also trigger the <code>_index_item_del</code> callback function, as said above.</p>
<p>The third button, finally, will exercise <a class="el" href="group__Elm__Index__Group.html#ga9c0c1ff500522b62a674b36beafe7a19" title="Removes all items from a given index widget.">elm_index_item_clear()</a>, which will delete <b>all</b> of the index's items.</p>
<p>This is how the example program's window looks like with the index widget hidden: </p><div class="image">
<img src="index_example_00.png" alt=""/>
</div>
 <p>When it's shown, it's like the following figure: </p><div class="image">
<img src="index_example_01.png" alt=""/>
</div>
 <p>See the full <a class="el" href="index_example_01_c.html">source code</a> for this example. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<div class="footer">
  <p>
    <span class="version">EFL 1.26.99</span>
    <span class="copyright">Copyright &copy;2000-2022 <a href="http://www.enlightenment.org">enlightenment.org</a></span>
    <span class="generated">Generated @ Sat Oct 29 2022 18:10:47</span>
  </p>
</div>
</body>
</html>
