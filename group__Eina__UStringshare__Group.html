<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <title>Unicode Stringshare</title>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-110876574-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-110876574-1');
  </script>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <link rel="icon" href="favicon.png" type="image/x-icon">
  <link rel="shortcut icon" href="favicon.png" type="image/x-icon">
  <link rel="icon" href="favicon.png" type="image/ico">
  <link rel="shortcut icon" href="favicon.png" type="image/ico">
  <link rel="stylesheet" type="text/css" href="e.css">
</head>
<body>
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Unicode Stringshare<div class="ingroups"><a class="el" href="group__Eina.html">Eina</a> &raquo; <a class="el" href="group__Eina__Data__Types__Group.html">Data Types</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>These functions allow you to store one copy of a string, and use it throughout your program.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gacfea21a44781e0775b7e2eabb613e2db"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group__Eina__Types__Group.html#ga3fe0caf72e93b1bab1ca8ee3ccf3f226">Eina_Bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Eina__UStringshare__Group.html#gacfea21a44781e0775b7e2eabb613e2db">eina_ustringshare_replace</a> (const <a class="el" href="group__Eina__Unicode__String.html#ga00d6dbe6710822ef81e9539fc57c4b12">Eina_Unicode</a> **p_str, const <a class="el" href="group__Eina__Unicode__String.html#ga00d6dbe6710822ef81e9539fc57c4b12">Eina_Unicode</a> *news)</td></tr>
<tr class="memdesc:gacfea21a44781e0775b7e2eabb613e2db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Replace the previously stringshared pointer with new content.  <a href="group__Eina__UStringshare__Group.html#gacfea21a44781e0775b7e2eabb613e2db">More...</a><br /></td></tr>
<tr class="separator:gacfea21a44781e0775b7e2eabb613e2db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad0941766d69e2596f28c7a400518c85a"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group__Eina__Types__Group.html#ga3fe0caf72e93b1bab1ca8ee3ccf3f226">Eina_Bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Eina__UStringshare__Group.html#gad0941766d69e2596f28c7a400518c85a">eina_ustringshare_replace_length</a> (const <a class="el" href="group__Eina__Unicode__String.html#ga00d6dbe6710822ef81e9539fc57c4b12">Eina_Unicode</a> **p_str, const <a class="el" href="group__Eina__Unicode__String.html#ga00d6dbe6710822ef81e9539fc57c4b12">Eina_Unicode</a> *news, unsigned int slen)</td></tr>
<tr class="memdesc:gad0941766d69e2596f28c7a400518c85a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Replace the previously stringshared pointer with a new content.  <a href="group__Eina__UStringshare__Group.html#gad0941766d69e2596f28c7a400518c85a">More...</a><br /></td></tr>
<tr class="separator:gad0941766d69e2596f28c7a400518c85a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga99cf84960369b0e4e38480ad08b471b1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__Eina__Types__Group.html#ga6ac08753ba12bc9c7a0390cf67868f4f">EINA_API</a> const <a class="el" href="group__Eina__Unicode__String.html#ga00d6dbe6710822ef81e9539fc57c4b12">Eina_Unicode</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Eina__UStringshare__Group.html#ga99cf84960369b0e4e38480ad08b471b1">eina_ustringshare_add_length</a> (const <a class="el" href="group__Eina__Unicode__String.html#ga00d6dbe6710822ef81e9539fc57c4b12">Eina_Unicode</a> *str, unsigned int slen)</td></tr>
<tr class="memdesc:ga99cf84960369b0e4e38480ad08b471b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves an instance of a string for use in a program.  <a href="group__Eina__UStringshare__Group.html#ga99cf84960369b0e4e38480ad08b471b1">More...</a><br /></td></tr>
<tr class="separator:ga99cf84960369b0e4e38480ad08b471b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2cc41afc079ef1a7eda8b9a092a15ffc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__Eina__Types__Group.html#ga6ac08753ba12bc9c7a0390cf67868f4f">EINA_API</a> const <a class="el" href="group__Eina__Unicode__String.html#ga00d6dbe6710822ef81e9539fc57c4b12">Eina_Unicode</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Eina__UStringshare__Group.html#ga2cc41afc079ef1a7eda8b9a092a15ffc">eina_ustringshare_add</a> (const <a class="el" href="group__Eina__Unicode__String.html#ga00d6dbe6710822ef81e9539fc57c4b12">Eina_Unicode</a> *str)</td></tr>
<tr class="memdesc:ga2cc41afc079ef1a7eda8b9a092a15ffc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves an instance of a string for use in a program.  <a href="group__Eina__UStringshare__Group.html#ga2cc41afc079ef1a7eda8b9a092a15ffc">More...</a><br /></td></tr>
<tr class="separator:ga2cc41afc079ef1a7eda8b9a092a15ffc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga13cf1e5da7a7b4167de592c806effa3e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__Eina__Types__Group.html#ga6ac08753ba12bc9c7a0390cf67868f4f">EINA_API</a> const <a class="el" href="group__Eina__Unicode__String.html#ga00d6dbe6710822ef81e9539fc57c4b12">Eina_Unicode</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Eina__UStringshare__Group.html#ga13cf1e5da7a7b4167de592c806effa3e">eina_ustringshare_ref</a> (const <a class="el" href="group__Eina__Unicode__String.html#ga00d6dbe6710822ef81e9539fc57c4b12">Eina_Unicode</a> *str)</td></tr>
<tr class="memdesc:ga13cf1e5da7a7b4167de592c806effa3e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Increments references of the given shared string.  <a href="group__Eina__UStringshare__Group.html#ga13cf1e5da7a7b4167de592c806effa3e">More...</a><br /></td></tr>
<tr class="separator:ga13cf1e5da7a7b4167de592c806effa3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4f787a0d75359ccb11a071260b13474e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__Eina__Types__Group.html#ga6ac08753ba12bc9c7a0390cf67868f4f">EINA_API</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Eina__UStringshare__Group.html#ga4f787a0d75359ccb11a071260b13474e">eina_ustringshare_del</a> (const <a class="el" href="group__Eina__Unicode__String.html#ga00d6dbe6710822ef81e9539fc57c4b12">Eina_Unicode</a> *str)</td></tr>
<tr class="memdesc:ga4f787a0d75359ccb11a071260b13474e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Notes that the given string has lost an instance.  <a href="group__Eina__UStringshare__Group.html#ga4f787a0d75359ccb11a071260b13474e">More...</a><br /></td></tr>
<tr class="separator:ga4f787a0d75359ccb11a071260b13474e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad7b623082791e7ee6d81c582e554aee7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__Eina__Types__Group.html#ga6ac08753ba12bc9c7a0390cf67868f4f">EINA_API</a> int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Eina__UStringshare__Group.html#gad7b623082791e7ee6d81c582e554aee7">eina_ustringshare_strlen</a> (const <a class="el" href="group__Eina__Unicode__String.html#ga00d6dbe6710822ef81e9539fc57c4b12">Eina_Unicode</a> *str)</td></tr>
<tr class="memdesc:gad7b623082791e7ee6d81c582e554aee7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Notes that the given string <b>must</b> be shared.  <a href="group__Eina__UStringshare__Group.html#gad7b623082791e7ee6d81c582e554aee7">More...</a><br /></td></tr>
<tr class="separator:gad7b623082791e7ee6d81c582e554aee7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab5f666b0c69414011d16b9e08ea2a73b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__Eina__Types__Group.html#ga6ac08753ba12bc9c7a0390cf67868f4f">EINA_API</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Eina__UStringshare__Group.html#gab5f666b0c69414011d16b9e08ea2a73b">eina_ustringshare_dump</a> (void)</td></tr>
<tr class="memdesc:gab5f666b0c69414011d16b9e08ea2a73b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dumps the contents of the share_common.  <a href="group__Eina__UStringshare__Group.html#gab5f666b0c69414011d16b9e08ea2a73b">More...</a><br /></td></tr>
<tr class="separator:gab5f666b0c69414011d16b9e08ea2a73b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>These functions allow you to store one copy of a string, and use it throughout your program. </p>
<p>This is a method to reduce the number of duplicated strings kept in memory. It's pretty common for the same strings to be dynamically allocated repeatedly between applications and libraries, especially in circumstances where you could have multiple copies of a structure that allocates the string. So rather than duplicating and freeing these strings, you request a read-only pointer to an existing string and only incur the overhead of a hash lookup.</p>
<p>It sounds like micro-optimizing, but profiling has shown this can have a significant impact as you scale the number of copies up. It improves string creation/destruction speed, reduces memory use and decreases memory fragmentation, so a win all-around.</p>
<p>For more information, you can look at the <a class="el" href="tutorial_ustringshare_page.html">UStringshare Tutorial</a>. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="gacfea21a44781e0775b7e2eabb613e2db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacfea21a44781e0775b7e2eabb613e2db">&#9670;&nbsp;</a></span>eina_ustringshare_replace()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="group__Eina__Types__Group.html#ga3fe0caf72e93b1bab1ca8ee3ccf3f226">Eina_Bool</a> eina_ustringshare_replace </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group__Eina__Unicode__String.html#ga00d6dbe6710822ef81e9539fc57c4b12">Eina_Unicode</a> **&#160;</td>
          <td class="paramname"><em>p_str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__Eina__Unicode__String.html#ga00d6dbe6710822ef81e9539fc57c4b12">Eina_Unicode</a> *&#160;</td>
          <td class="paramname"><em>news</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Replace the previously stringshared pointer with new content. </p>
<p>The string pointed by <em>p_str</em> should be previously stringshared or <code>NULL</code> and it will be <a class="el" href="group__Eina__UStringshare__Group.html#ga4f787a0d75359ccb11a071260b13474e" title="Notes that the given string has lost an instance.">eina_ustringshare_del()</a>. The new string will be passed to <a class="el" href="group__Eina__UStringshare__Group.html#ga2cc41afc079ef1a7eda8b9a092a15ffc" title="Retrieves an instance of a string for use in a program.">eina_ustringshare_add()</a> and then assigned to <code>*p_str</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_str</td><td>pointer to the stringhare to be replaced. Must not be <code>NULL</code>, but <code>*p_str</code> may be <code>NULL</code> as it is a valid stringshare handle. </td></tr>
    <tr><td class="paramname">news</td><td>new string to be stringshared, may be <code>NULL</code>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__Eina__Types__Group.html#ga05c12dacc8b4058994df842b41be85fc" title="boolean value TRUE (numerical value 1)">EINA_TRUE</a> if the strings were different and thus replaced, <a class="el" href="group__Eina__Types__Group.html#ga1feb115f8e9913e806e090d9bd5a7301" title="boolean value FALSE (numerical value 0)">EINA_FALSE</a> if the strings were the same after shared. </dd></dl>

<p class="reference">References <a class="el" href="group__Eina__Types__Group.html#ga1feb115f8e9913e806e090d9bd5a7301">EINA_FALSE</a>, <a class="el" href="group__Eina__Types__Group.html#ga05c12dacc8b4058994df842b41be85fc">EINA_TRUE</a>, <a class="el" href="group__Eina__UStringshare__Group.html#ga2cc41afc079ef1a7eda8b9a092a15ffc">eina_ustringshare_add()</a>, and <a class="el" href="group__Eina__UStringshare__Group.html#ga4f787a0d75359ccb11a071260b13474e">eina_ustringshare_del()</a>.</p>

</div>
</div>
<a id="gad0941766d69e2596f28c7a400518c85a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad0941766d69e2596f28c7a400518c85a">&#9670;&nbsp;</a></span>eina_ustringshare_replace_length()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="group__Eina__Types__Group.html#ga3fe0caf72e93b1bab1ca8ee3ccf3f226">Eina_Bool</a> eina_ustringshare_replace_length </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group__Eina__Unicode__String.html#ga00d6dbe6710822ef81e9539fc57c4b12">Eina_Unicode</a> **&#160;</td>
          <td class="paramname"><em>p_str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__Eina__Unicode__String.html#ga00d6dbe6710822ef81e9539fc57c4b12">Eina_Unicode</a> *&#160;</td>
          <td class="paramname"><em>news</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>slen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Replace the previously stringshared pointer with a new content. </p>
<p>The string pointed by <em>p_str</em> should be previously stringshared or <code>NULL</code> and it will be <a class="el" href="group__Eina__UStringshare__Group.html#ga4f787a0d75359ccb11a071260b13474e" title="Notes that the given string has lost an instance.">eina_ustringshare_del()</a>. The new string will be passed to <a class="el" href="group__Eina__UStringshare__Group.html#ga99cf84960369b0e4e38480ad08b471b1" title="Retrieves an instance of a string for use in a program.">eina_ustringshare_add_length()</a> and then assigned to <code>*p_str</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_str</td><td>pointer to the stringhare to be replaced. Must not be <code>NULL</code>, but <code>*p_str</code> may be <code>NULL</code> as it is a valid stringshare handle. </td></tr>
    <tr><td class="paramname">news</td><td>new string to be stringshared, may be <code>NULL</code>. </td></tr>
    <tr><td class="paramname">slen</td><td>The string size (&lt;= strlen(str)).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__Eina__Types__Group.html#ga05c12dacc8b4058994df842b41be85fc" title="boolean value TRUE (numerical value 1)">EINA_TRUE</a> if the strings were different and thus replaced, <a class="el" href="group__Eina__Types__Group.html#ga1feb115f8e9913e806e090d9bd5a7301" title="boolean value FALSE (numerical value 0)">EINA_FALSE</a> if the strings were the same after shared. </dd></dl>

<p class="reference">References <a class="el" href="group__Eina__Types__Group.html#ga1feb115f8e9913e806e090d9bd5a7301">EINA_FALSE</a>, <a class="el" href="group__Eina__Types__Group.html#ga05c12dacc8b4058994df842b41be85fc">EINA_TRUE</a>, <a class="el" href="group__Eina__UStringshare__Group.html#ga99cf84960369b0e4e38480ad08b471b1">eina_ustringshare_add_length()</a>, and <a class="el" href="group__Eina__UStringshare__Group.html#ga4f787a0d75359ccb11a071260b13474e">eina_ustringshare_del()</a>.</p>

</div>
</div>
<a id="ga99cf84960369b0e4e38480ad08b471b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga99cf84960369b0e4e38480ad08b471b1">&#9670;&nbsp;</a></span>eina_ustringshare_add_length()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__Eina__Types__Group.html#ga6ac08753ba12bc9c7a0390cf67868f4f">EINA_API</a> const <a class="el" href="group__Eina__Unicode__String.html#ga00d6dbe6710822ef81e9539fc57c4b12">Eina_Unicode</a>* eina_ustringshare_add_length </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group__Eina__Unicode__String.html#ga00d6dbe6710822ef81e9539fc57c4b12">Eina_Unicode</a> *&#160;</td>
          <td class="paramname"><em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>slen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieves an instance of a string for use in a program. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">str</td><td>The string to retrieve an instance of. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">slen</td><td>The string size (&lt;= strlen(str)). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to an instance of the string on success, <code>NULL</code> on failure.</dd></dl>
<p>This function retrieves an instance of <code>str</code>. If <code>str</code> is <code>NULL</code>, then <code>NULL</code> is returned. If <code>str</code> is already stored, it is just returned and its reference counter is increased. Otherwise it is added to the strings to be searched and a duplicated string of <code>str</code> is returned.</p>
<p>This function does not check string size, but uses the exact given size. This can be used to share_common part of a larger buffer or substring.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__Eina__UStringshare__Group.html#ga2cc41afc079ef1a7eda8b9a092a15ffc" title="Retrieves an instance of a string for use in a program.">eina_ustringshare_add()</a> </dd></dl>

<p class="reference">Referenced by <a class="el" href="group__Eina__UStringshare__Group.html#gad0941766d69e2596f28c7a400518c85a">eina_ustringshare_replace_length()</a>.</p>

</div>
</div>
<a id="ga2cc41afc079ef1a7eda8b9a092a15ffc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2cc41afc079ef1a7eda8b9a092a15ffc">&#9670;&nbsp;</a></span>eina_ustringshare_add()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__Eina__Types__Group.html#ga6ac08753ba12bc9c7a0390cf67868f4f">EINA_API</a> const <a class="el" href="group__Eina__Unicode__String.html#ga00d6dbe6710822ef81e9539fc57c4b12">Eina_Unicode</a>* eina_ustringshare_add </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group__Eina__Unicode__String.html#ga00d6dbe6710822ef81e9539fc57c4b12">Eina_Unicode</a> *&#160;</td>
          <td class="paramname"><em>str</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieves an instance of a string for use in a program. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">str</td><td>The NULL-terminated string to retrieve an instance of. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to an instance of the string on success, <code>NULL</code> on failure.</dd></dl>
<p>This function retrieves an instance of <code>str</code>. If <code>str</code> is <code>NULL</code>, then <code>NULL</code> is returned. If <code>str</code> is already stored, it is just returned and its reference counter is increased. Otherwise it is added to the strings to be searched and a duplicated string of <code>str</code> is returned.</p>
<p>The string <code>str</code> must be NULL-terminated ('\0') and its full length will be used. To use part of the string or non-null terminated, use <a class="el" href="group__Eina__Stringshare__Group.html#ga3baa7be13491ed6c76e535b120bf8783" title="Retrieves an instance of a string with a specific size for use in a program.">eina_stringshare_add_length()</a> instead.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__Eina__UStringshare__Group.html#ga99cf84960369b0e4e38480ad08b471b1" title="Retrieves an instance of a string for use in a program.">eina_ustringshare_add_length()</a> </dd></dl>

<p class="reference">Referenced by <a class="el" href="group__Eina__UStringshare__Group.html#gacfea21a44781e0775b7e2eabb613e2db">eina_ustringshare_replace()</a>.</p>

</div>
</div>
<a id="ga13cf1e5da7a7b4167de592c806effa3e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga13cf1e5da7a7b4167de592c806effa3e">&#9670;&nbsp;</a></span>eina_ustringshare_ref()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__Eina__Types__Group.html#ga6ac08753ba12bc9c7a0390cf67868f4f">EINA_API</a> const <a class="el" href="group__Eina__Unicode__String.html#ga00d6dbe6710822ef81e9539fc57c4b12">Eina_Unicode</a>* eina_ustringshare_ref </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group__Eina__Unicode__String.html#ga00d6dbe6710822ef81e9539fc57c4b12">Eina_Unicode</a> *&#160;</td>
          <td class="paramname"><em>str</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Increments references of the given shared string. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">str</td><td>The shared string. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to an instance of the string on success, <code>NULL</code> on failure.</dd></dl>
<p>This is similar to eina_share_common_add(), but it's faster since it will avoid lookups if possible, but on the down side it requires the parameter to be shared before, in other words, it must be the return of a previous <a class="el" href="group__Eina__UStringshare__Group.html#ga2cc41afc079ef1a7eda8b9a092a15ffc" title="Retrieves an instance of a string for use in a program.">eina_ustringshare_add()</a>.</p>
<p>There is no unref since this is the work of <a class="el" href="group__Eina__UStringshare__Group.html#ga4f787a0d75359ccb11a071260b13474e" title="Notes that the given string has lost an instance.">eina_ustringshare_del()</a>. </p>

</div>
</div>
<a id="ga4f787a0d75359ccb11a071260b13474e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4f787a0d75359ccb11a071260b13474e">&#9670;&nbsp;</a></span>eina_ustringshare_del()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__Eina__Types__Group.html#ga6ac08753ba12bc9c7a0390cf67868f4f">EINA_API</a> void eina_ustringshare_del </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group__Eina__Unicode__String.html#ga00d6dbe6710822ef81e9539fc57c4b12">Eina_Unicode</a> *&#160;</td>
          <td class="paramname"><em>str</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Notes that the given string has lost an instance. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">str</td><td>String The given string.</td></tr>
  </table>
  </dd>
</dl>
<p>This function decreases the reference counter associated to <code>str</code> if it exists. If that counter reaches 0, the memory associated to <code>str</code> is freed. If <code>str</code> is <code>NULL</code>, the function returns immediately.</p>
<dl class="section note"><dt>Note</dt><dd>If the given pointer is not shared, bad things will happen, likely a segmentation fault. </dd></dl>

<p class="reference">Referenced by <a class="el" href="group__Eina__UStringshare__Group.html#gacfea21a44781e0775b7e2eabb613e2db">eina_ustringshare_replace()</a>, and <a class="el" href="group__Eina__UStringshare__Group.html#gad0941766d69e2596f28c7a400518c85a">eina_ustringshare_replace_length()</a>.</p>

</div>
</div>
<a id="gad7b623082791e7ee6d81c582e554aee7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad7b623082791e7ee6d81c582e554aee7">&#9670;&nbsp;</a></span>eina_ustringshare_strlen()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__Eina__Types__Group.html#ga6ac08753ba12bc9c7a0390cf67868f4f">EINA_API</a> int eina_ustringshare_strlen </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group__Eina__Unicode__String.html#ga00d6dbe6710822ef81e9539fc57c4b12">Eina_Unicode</a> *&#160;</td>
          <td class="paramname"><em>str</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Notes that the given string <b>must</b> be shared. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">str</td><td>The shared string to know the length. It is safe to give <code>NULL</code>, in that case <code>-1</code> is returned. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The length of a shared string.</dd></dl>
<p>This function is a cheap way to known the length of a shared string.</p>
<dl class="section note"><dt>Note</dt><dd>If the given pointer is not shared, bad things will happen, likely a segmentation fault. If in doubt, try strlen(). </dd></dl>

</div>
</div>
<a id="gab5f666b0c69414011d16b9e08ea2a73b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab5f666b0c69414011d16b9e08ea2a73b">&#9670;&nbsp;</a></span>eina_ustringshare_dump()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__Eina__Types__Group.html#ga6ac08753ba12bc9c7a0390cf67868f4f">EINA_API</a> void eina_ustringshare_dump </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Dumps the contents of the share_common. </p>
<p>This function dumps all strings in the share_common to stdout with a DDD: prefix per line and a memory usage summary. </p>

</div>
</div>
</div><!-- contents -->
<div class="footer">
  <p>
    <span class="version">EFL 1.26.99</span>
    <span class="copyright">Copyright &copy;2000-2022 <a href="http://www.enlightenment.org">enlightenment.org</a></span>
    <span class="generated">Generated @ Sat Oct 29 2022 18:10:55</span>
  </p>
</div>
</body>
</html>
