<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <title>Photocam example</title>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-110876574-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-110876574-1');
  </script>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <link rel="icon" href="favicon.png" type="image/x-icon">
  <link rel="shortcut icon" href="favicon.png" type="image/x-icon">
  <link rel="icon" href="favicon.png" type="image/ico">
  <link rel="shortcut icon" href="favicon.png" type="image/ico">
  <link rel="stylesheet" type="text/css" href="e.css">
</head>
<body>
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Photocam example </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p></p>
<p>In this example we will have a photocam and a couple of buttons and slider to control the photocam. To avoid cluttering we'll only show the parts of the example that relate to the photocam, the full source code can be seen <a class="el" href="photocam_example_01_8c-example.html">here</a>.</p>
<p>Creating a photocam is as easy as creating any other widget: </p><div class="fragment"><div class="line">   photocam = <a class="code" href="group__Elm__Photocam__Group.html#gabd50b6fda6afe732478a33e4999a1386">elm_photocam_add</a>(win);</div>
<div class="ttc" id="agroup__Elm__Photocam__Group_html_gabd50b6fda6afe732478a33e4999a1386"><div class="ttname"><a href="group__Elm__Photocam__Group.html#gabd50b6fda6afe732478a33e4999a1386">elm_photocam_add</a></div><div class="ttdeci">Evas_Object * elm_photocam_add(Evas_Object *parent)</div><div class="ttdoc">Add a new Photocam object.</div><div class="ttdef"><b>Definition:</b> efl_ui_image_zoomable.c:3320</div></div>
</div><!-- fragment --><p> A photocam is only useful if we have a image on it, so lets set a file for it to work with: </p><div class="fragment"><div class="line">   snprintf(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;%s/images/insanely_huge_test_image.jpg&quot;</span>, <a class="code" href="group__Elm__App.html#ga92a09dbf88cc1ca3eab51c51dea589d0">elm_app_data_dir_get</a>());</div>
<div class="line">   <a class="code" href="group__Elm__Photocam__Group.html#gaa4cb6e360aab7307380ac92de4e04dd2">elm_photocam_file_set</a>(photocam, buf);</div>
<div class="ttc" id="agroup__Elm__App_html_ga92a09dbf88cc1ca3eab51c51dea589d0"><div class="ttname"><a href="group__Elm__App.html#ga92a09dbf88cc1ca3eab51c51dea589d0">elm_app_data_dir_get</a></div><div class="ttdeci">const char * elm_app_data_dir_get(void)</div><div class="ttdoc">Get the application's run time data prefix directory, as set by elm_app_info_set() and the way (envir...</div><div class="ttdef"><b>Definition:</b> elm_main.c:586</div></div>
<div class="ttc" id="agroup__Elm__Photocam__Group_html_gaa4cb6e360aab7307380ac92de4e04dd2"><div class="ttname"><a href="group__Elm__Photocam__Group.html#gaa4cb6e360aab7307380ac92de4e04dd2">elm_photocam_file_set</a></div><div class="ttdeci">Evas_Load_Error elm_photocam_file_set(Evas_Object *obj, const char *file)</div><div class="ttdoc">Set the photo file to be shown.</div><div class="ttdef"><b>Definition:</b> efl_ui_image_zoomable.c:3438</div></div>
</div><!-- fragment --><p> We now set the photocam to not bounce horizontally: </p><div class="fragment"><div class="line">   <a class="code" href="group__Elm__Scroller__Group.html#gae69101dbdb089598ca790c73bd9d7a42">elm_scroller_bounce_set</a>(photocam, <a class="code" href="group__Eina__Types__Group.html#ga1feb115f8e9913e806e090d9bd5a7301">EINA_FALSE</a>, <a class="code" href="group__Eina__Types__Group.html#ga05c12dacc8b4058994df842b41be85fc">EINA_TRUE</a>);</div>
<div class="ttc" id="agroup__Eina__Types__Group_html_ga05c12dacc8b4058994df842b41be85fc"><div class="ttname"><a href="group__Eina__Types__Group.html#ga05c12dacc8b4058994df842b41be85fc">EINA_TRUE</a></div><div class="ttdeci">#define EINA_TRUE</div><div class="ttdoc">boolean value TRUE (numerical value 1)</div><div class="ttdef"><b>Definition:</b> eina_types.h:539</div></div>
<div class="ttc" id="agroup__Eina__Types__Group_html_ga1feb115f8e9913e806e090d9bd5a7301"><div class="ttname"><a href="group__Eina__Types__Group.html#ga1feb115f8e9913e806e090d9bd5a7301">EINA_FALSE</a></div><div class="ttdeci">#define EINA_FALSE</div><div class="ttdoc">boolean value FALSE (numerical value 0)</div><div class="ttdef"><b>Definition:</b> eina_types.h:533</div></div>
<div class="ttc" id="agroup__Elm__Scroller__Group_html_gae69101dbdb089598ca790c73bd9d7a42"><div class="ttname"><a href="group__Elm__Scroller__Group.html#gae69101dbdb089598ca790c73bd9d7a42">elm_scroller_bounce_set</a></div><div class="ttdeci">void elm_scroller_bounce_set(Evas_Object *obj, Eina_Bool h_bounce, Eina_Bool v_bounce)</div><div class="ttdoc">Set bouncing behavior.</div><div class="ttdef"><b>Definition:</b> elm_scroller.c:1050</div></div>
</div><!-- fragment --><p> And we want to know when the photocam has finished loading the image so: </p><div class="fragment"><div class="line">   <a class="code" href="group__Evas__Smart__Object__Group.html#gac12dd6655f488cc47ce6cf00eb7d12b2">evas_object_smart_callback_add</a>(photocam, <span class="stringliteral">&quot;loaded,detail&quot;</span>, _bring_in, NULL);</div>
<div class="ttc" id="agroup__Evas__Smart__Object__Group_html_gac12dd6655f488cc47ce6cf00eb7d12b2"><div class="ttname"><a href="group__Evas__Smart__Object__Group.html#gac12dd6655f488cc47ce6cf00eb7d12b2">evas_object_smart_callback_add</a></div><div class="ttdeci">EVAS_API void evas_object_smart_callback_add(Evas_Object *eo_obj, const char *event, Evas_Smart_Cb func, const void *data)</div><div class="ttdoc">Add (register) a callback function to the smart event specified by event on the smart object obj.</div><div class="ttdef"><b>Definition:</b> evas_object_smart.c:1040</div></div>
</div><!-- fragment --><p> The reason to know when the image is loaded is so that we can bring the center of the image into view: </p><div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">_bring_in(<span class="keywordtype">void</span> *data <a class="code" href="group__Eina__Types__Group.html#ga82d751be730f849719ca292f9558be87">EINA_UNUSED</a>, <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *obj, <span class="keywordtype">void</span> *event_info <a class="code" href="group__Eina__Types__Group.html#ga82d751be730f849719ca292f9558be87">EINA_UNUSED</a>)</div>
<div class="line">{</div>
<div class="line">   <span class="keywordtype">int</span> w, h;</div>
<div class="line">   <a class="code" href="group__Elm__Photocam__Group.html#gae578f8117d96e92a27037947fabd3d15">elm_photocam_image_size_get</a>(obj, &amp;w, &amp;h);</div>
<div class="line">   <a class="code" href="group__Elm__Photocam__Group.html#ga51a9dd5b4e7c6593e9734d1838e11266">elm_photocam_image_region_bring_in</a>(obj, w/2, h/2, 500, 400);</div>
<div class="line">}</div>
<div class="ttc" id="agroup__Eina__Types__Group_html_ga82d751be730f849719ca292f9558be87"><div class="ttname"><a href="group__Eina__Types__Group.html#ga82d751be730f849719ca292f9558be87">EINA_UNUSED</a></div><div class="ttdeci">#define EINA_UNUSED</div><div class="ttdoc">Used to indicate that a function parameter is purposely unused.</div><div class="ttdef"><b>Definition:</b> eina_types.h:339</div></div>
<div class="ttc" id="agroup__Elm__Photocam__Group_html_ga51a9dd5b4e7c6593e9734d1838e11266"><div class="ttname"><a href="group__Elm__Photocam__Group.html#ga51a9dd5b4e7c6593e9734d1838e11266">elm_photocam_image_region_bring_in</a></div><div class="ttdeci">void elm_photocam_image_region_bring_in(Evas_Object *obj, int x, int y, int w, int h)</div><div class="ttdoc">Bring in the viewed portion of the image.</div><div class="ttdef"><b>Definition:</b> efl_ui_image_zoomable.c:3471</div></div>
<div class="ttc" id="agroup__Elm__Photocam__Group_html_gae578f8117d96e92a27037947fabd3d15"><div class="ttname"><a href="group__Elm__Photocam__Group.html#gae578f8117d96e92a27037947fabd3d15">elm_photocam_image_size_get</a></div><div class="ttdeci">void elm_photocam_image_size_get(const Evas_Object *obj, int *w, int *h)</div><div class="ttdoc">Get the current image pixel width and height.</div><div class="ttdef"><b>Definition:</b> efl_ui_image_zoomable.c:3393</div></div>
<div class="ttc" id="agroup__Evas__Object__Group_html_ga9e19e6dd1f517a0ba437c0114d3e7c97"><div class="ttname"><a href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a></div><div class="ttdeci">Efl_Canvas_Object Evas_Object</div><div class="ttdoc">An Evas Object handle.</div><div class="ttdef"><b>Definition:</b> Evas_Common.h:185</div></div>
</div><!-- fragment --><p> As mentioned we have 2 buttons in this example, the "Fit" one will cause the photocam to go in to a zoom mode that makes the image fit inside the photocam. Tough this has no effect on the image we also print what region was being viewed before setting the zoom mode: </p><div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">_fit(<span class="keywordtype">void</span> *data, <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *obj <a class="code" href="group__Eina__Types__Group.html#ga82d751be730f849719ca292f9558be87">EINA_UNUSED</a>, <span class="keywordtype">void</span> *event_info <a class="code" href="group__Eina__Types__Group.html#ga82d751be730f849719ca292f9558be87">EINA_UNUSED</a>)</div>
<div class="line">{</div>
<div class="line">   <span class="keywordtype">int</span> x, y, w, h;</div>
<div class="line">   elm_photocam_image_region_get(data, &amp;x, &amp;y, &amp;w, &amp;h);</div>
<div class="line">   printf(<span class="stringliteral">&quot;region: {%d, %d, %d, %d}\n&quot;</span>, x, y, w, h);</div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>When in fit mode our slider(explained below) won't work.</dd></dl>
<p>The second button("Unfit") will bring the photocam back into manual zoom mode: </p><div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">_unfit(<span class="keywordtype">void</span> *data, <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *obj <a class="code" href="group__Eina__Types__Group.html#ga82d751be730f849719ca292f9558be87">EINA_UNUSED</a>, <span class="keywordtype">void</span> *event_info <a class="code" href="group__Eina__Types__Group.html#ga82d751be730f849719ca292f9558be87">EINA_UNUSED</a>)</div>
<div class="line">{</div>
<div class="line">   <a class="code" href="group__Elm__Photocam__Group.html#ga36acb49e545f2426115f74f4b33eb67f">elm_photocam_zoom_mode_set</a>(data, ELM_PHOTOCAM_ZOOM_MODE_MANUAL);</div>
<div class="line">}</div>
<div class="ttc" id="agroup__Elm__Photocam__Group_html_ga36acb49e545f2426115f74f4b33eb67f"><div class="ttname"><a href="group__Elm__Photocam__Group.html#ga36acb49e545f2426115f74f4b33eb67f">elm_photocam_zoom_mode_set</a></div><div class="ttdeci">void elm_photocam_zoom_mode_set(Evas_Object *obj, Elm_Photocam_Zoom_Mode mode)</div><div class="ttdoc">Set the zoom mode.</div><div class="ttdef"><b>Definition:</b> efl_ui_image_zoomable.c:3426</div></div>
</div><!-- fragment --><p> Our slider controls the level of zoom of the photocam: </p><div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">_zoom(<span class="keywordtype">void</span> *data, <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *obj, <span class="keywordtype">void</span> *event_info <a class="code" href="group__Eina__Types__Group.html#ga82d751be730f849719ca292f9558be87">EINA_UNUSED</a>)</div>
<div class="line">{</div>
<div class="line">   <span class="keywordtype">double</span> z = <a class="code" href="group__Elm__Slider.html#ga2dd3f70cdbcb4a81b5d7a08a18afaa1d">elm_slider_value_get</a>(obj) * 8;</div>
<div class="line">   <a class="code" href="group__Elm__Photocam__Group.html#ga2f63118a574a0c42a615c0da60cf622a">elm_photocam_zoom_set</a>(data, z);</div>
<div class="line">}</div>
<div class="ttc" id="agroup__Elm__Photocam__Group_html_ga2f63118a574a0c42a615c0da60cf622a"><div class="ttname"><a href="group__Elm__Photocam__Group.html#ga2f63118a574a0c42a615c0da60cf622a">elm_photocam_zoom_set</a></div><div class="ttdeci">void elm_photocam_zoom_set(Evas_Object *obj, double zoom)</div><div class="ttdoc">Set the zoom level of the photo.</div><div class="ttdef"><b>Definition:</b> efl_ui_image_zoomable.c:3414</div></div>
<div class="ttc" id="agroup__Elm__Slider_html_ga2dd3f70cdbcb4a81b5d7a08a18afaa1d"><div class="ttname"><a href="group__Elm__Slider.html#ga2dd3f70cdbcb4a81b5d7a08a18afaa1d">elm_slider_value_get</a></div><div class="ttdeci">double elm_slider_value_get(const Evas_Object *obj)</div><div class="ttdoc">Get the value displayed by the slider.</div><div class="ttdef"><b>Definition:</b> elm_slider.c:1531</div></div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>It is important to note that this only works when in manual zoom mode.</dd></dl>
<p>Our example will initially look like this:</p>
<div class="image">
<img src="screenshots/photocam_example_01.png" alt=""/>
</div>
  </div></div><!-- contents -->
</div><!-- PageDoc -->
<div class="footer">
  <p>
    <span class="version">EFL 1.26.99</span>
    <span class="copyright">Copyright &copy;2000-2022 <a href="http://www.enlightenment.org">enlightenment.org</a></span>
    <span class="generated">Generated @ Sat Oct 29 2022 18:10:48</span>
  </p>
</div>
</body>
</html>
