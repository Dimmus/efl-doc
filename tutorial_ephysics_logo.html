<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <title>EPhysics - Logo</title>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-110876574-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-110876574-1');
  </script>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <link rel="icon" href="favicon.png" type="image/x-icon">
  <link rel="shortcut icon" href="favicon.png" type="image/x-icon">
  <link rel="icon" href="favicon.png" type="image/ico">
  <link rel="shortcut icon" href="favicon.png" type="image/ico">
  <link rel="stylesheet" type="text/css" href="e.css">
</head>
<body>
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">EPhysics - Logo </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The purpose of this example is to demonstrate the EPhysics_Logo.</p>
<p>For this example we'll have an EPhysics_World.</p>
<p>The basic concepts like - initializing an EPhysics_World, render geometry, physics limiting boundaries, were already covered in <a class="el" href="tutorial_ephysics_bouncing_ball.html">EPhysics - Bouncing Ball</a></p>
<h1><a class="anchor" id="add-logostruct"></a>
Logo Data Struct</h1>
<p></p>
<p>While in this example we'll be working with a struct to hold some objects in our code. For clarity sake we present you the struct declaration in the following block.</p>
<div class="fragment"><div class="line">   <span class="keyword">struct </span>letter_desc {</div>
<div class="line">      <span class="keyword">const</span> <span class="keywordtype">char</span> *letter;</div>
<div class="line">      <span class="keywordtype">int</span> padding;</div>
<div class="line">   } falling_letters[] = {</div>
<div class="line">     {<span class="stringliteral">&quot;P&quot;</span>, PADDING_X_1},</div>
<div class="line">     {<span class="stringliteral">&quot;H&quot;</span>, PADDING_X_1},</div>
<div class="line">     {<span class="stringliteral">&quot;Y&quot;</span>, PADDING_X_3},</div>
<div class="line">     {<span class="stringliteral">&quot;S1&quot;</span>, PADDING_X_2},</div>
<div class="line">     {<span class="stringliteral">&quot;I&quot;</span>, PADDING_X_2},</div>
<div class="line">     {<span class="stringliteral">&quot;C&quot;</span>, PADDING_X_3},</div>
<div class="line">     {<span class="stringliteral">&quot;S2&quot;</span>, 0}</div>
<div class="line">   };</div>
</div><!-- fragment --> <h1><a class="anchor" id="add-lett"></a>
Adding the letters</h1>
<p></p>
<p>To add the letters we'll use this function that creates the shadow, light and letter images.</p>
<div class="fragment"><div class="line">_letter_add(<a class="code" href="group__Evas__Canvas.html#ga5ff87cc4ce6bc43e3b640a6d37f73043">Evas</a> *evas, <span class="keyword">const</span> <span class="keywordtype">char</span> *letter, <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> **image, <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> **light, <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> **shadow)</div>
<div class="line">{</div>
<div class="line">   <span class="keywordtype">int</span> w, h, sh_w, sh_h;</div>
<div class="line">   <span class="keywordtype">char</span> buf[1024];</div>
<div class="line"> </div>
<div class="line">   snprintf(buf, <span class="keyword">sizeof</span>(buf), PACKAGE_DATA_DIR <span class="stringliteral">&quot;/logo_shadow-%s.png&quot;</span>, letter);</div>
<div class="line">   *shadow = <a class="code" href="group__Evas__Object__Image.html#ga35112cf5b100905a03b64369bef17233">evas_object_image_filled_add</a>(evas);</div>
<div class="line">   <a class="code" href="group__Evas__Object__Image.html#gac2e588476b16b04f85ca9a594c140c1d">evas_object_image_file_set</a>(*shadow, buf, NULL);</div>
<div class="line">   <a class="code" href="group__Evas__Object__Image.html#ga29401fb02f1d51ddf09d195f10a004e7">evas_object_image_size_get</a>(*shadow, &amp;sh_w, &amp;sh_h);</div>
<div class="line">   <a class="code" href="group__Evas__Object__Group.html#gacad94595f83580c18908cb3b69b08d1a">evas_object_resize</a>(*shadow, sh_w, sh_h);</div>
<div class="line">   <a class="code" href="group__Evas__Object__Group__Basic.html#gab751e9d24c16e74af6f7c08ea5b930c2">evas_object_color_set</a>(*shadow, 0, 0, 0, 0);</div>
<div class="line">   <a class="code" href="group__Evas__Object__Group.html#ga6f4b41c65c99eb5d53e207439eeffd76">evas_object_layer_set</a>(*shadow, LAYER_SHADOW);</div>
<div class="line">   <a class="code" href="group__Evas__Object__Group__Basic.html#ga07208fcafd4739de606bc35fff684bf5">evas_object_show</a>(*shadow);</div>
<div class="line"> </div>
<div class="line">   snprintf(buf, <span class="keyword">sizeof</span>(buf), PACKAGE_DATA_DIR <span class="stringliteral">&quot;/logo_letter-%s.png&quot;</span>, letter);</div>
<div class="line">   *image = <a class="code" href="group__Evas__Object__Image.html#ga35112cf5b100905a03b64369bef17233">evas_object_image_filled_add</a>(evas);</div>
<div class="line">   <a class="code" href="group__Evas__Object__Image.html#gac2e588476b16b04f85ca9a594c140c1d">evas_object_image_file_set</a>(*image, buf, NULL);</div>
<div class="line">   <a class="code" href="group__Evas__Object__Image.html#ga29401fb02f1d51ddf09d195f10a004e7">evas_object_image_size_get</a>(*image, &amp;w, &amp;h);</div>
<div class="line">   <a class="code" href="group__Evas__Object__Group.html#gacad94595f83580c18908cb3b69b08d1a">evas_object_resize</a>(*image, w, h);</div>
<div class="line">   <a class="code" href="group__Evas__Object__Group.html#ga6f4b41c65c99eb5d53e207439eeffd76">evas_object_layer_set</a>(*image, LAYER_LETTER);</div>
<div class="line">   <a class="code" href="group__Evas__Object__Group__Basic.html#ga07208fcafd4739de606bc35fff684bf5">evas_object_show</a>(*image);</div>
<div class="line"> </div>
<div class="line">   snprintf(buf, <span class="keyword">sizeof</span>(buf), PACKAGE_DATA_DIR <span class="stringliteral">&quot;/logo_light-%s.png&quot;</span>, letter);</div>
<div class="line">   *light = <a class="code" href="group__Evas__Object__Image.html#ga35112cf5b100905a03b64369bef17233">evas_object_image_filled_add</a>(evas);</div>
<div class="line">   <a class="code" href="group__Evas__Object__Image.html#gac2e588476b16b04f85ca9a594c140c1d">evas_object_image_file_set</a>(*light, buf, NULL);</div>
<div class="line">   <a class="code" href="group__Evas__Object__Group.html#gacad94595f83580c18908cb3b69b08d1a">evas_object_resize</a>(*light, w, h);</div>
<div class="line">   <a class="code" href="group__Evas__Object__Group.html#ga6f4b41c65c99eb5d53e207439eeffd76">evas_object_layer_set</a>(*light, LAYER_LETTER);</div>
<div class="line">   <a class="code" href="group__Evas__Object__Group__Basic.html#ga07208fcafd4739de606bc35fff684bf5">evas_object_show</a>(*light);</div>
<div class="line"> </div>
<div class="line">   <span class="comment">/* allow easy access to shadow and light from the letter image */</span></div>
<div class="line">   <a class="code" href="group__Evas__Object__Group__Extras.html#ga3061f8abe8f1a1f657d622ae0409d8e3">evas_object_data_set</a>(*image, <span class="stringliteral">&quot;shadow&quot;</span>, *shadow);</div>
<div class="line">   <a class="code" href="group__Evas__Object__Group__Extras.html#ga3061f8abe8f1a1f657d622ae0409d8e3">evas_object_data_set</a>(*image, <span class="stringliteral">&quot;light&quot;</span>, *light);</div>
<div class="line">}</div>
<div class="ttc" id="agroup__Evas__Canvas_html_ga5ff87cc4ce6bc43e3b640a6d37f73043"><div class="ttname"><a href="group__Evas__Canvas.html#ga5ff87cc4ce6bc43e3b640a6d37f73043">Evas</a></div><div class="ttdeci">Eo Evas</div><div class="ttdoc">An opaque handle to an Evas canvas.</div><div class="ttdef"><b>Definition:</b> Evas_Common.h:163</div></div>
<div class="ttc" id="agroup__Evas__Object__Group__Basic_html_ga07208fcafd4739de606bc35fff684bf5"><div class="ttname"><a href="group__Evas__Object__Group__Basic.html#ga07208fcafd4739de606bc35fff684bf5">evas_object_show</a></div><div class="ttdeci">EVAS_API void evas_object_show(Evas_Object *eo_obj)</div><div class="ttdoc">Makes the given Evas object visible.</div><div class="ttdef"><b>Definition:</b> evas_object_main.c:1814</div></div>
<div class="ttc" id="agroup__Evas__Object__Group__Basic_html_gab751e9d24c16e74af6f7c08ea5b930c2"><div class="ttname"><a href="group__Evas__Object__Group__Basic.html#gab751e9d24c16e74af6f7c08ea5b930c2">evas_object_color_set</a></div><div class="ttdeci">EVAS_API void evas_object_color_set(Evas_Object *obj, int r, int g, int b, int a)</div><div class="ttdoc">Sets the general/main color of the given Evas object to the given one.</div><div class="ttdef"><b>Definition:</b> evas_object_main.c:2024</div></div>
<div class="ttc" id="agroup__Evas__Object__Group__Extras_html_ga3061f8abe8f1a1f657d622ae0409d8e3"><div class="ttname"><a href="group__Evas__Object__Group__Extras.html#ga3061f8abe8f1a1f657d622ae0409d8e3">evas_object_data_set</a></div><div class="ttdeci">EVAS_API void evas_object_data_set(Evas_Object *eo_obj, const char *key, const void *data)</div><div class="ttdoc">Set an attached data pointer to an object with a given string key.</div><div class="ttdef"><b>Definition:</b> evas_data.c:5</div></div>
<div class="ttc" id="agroup__Evas__Object__Group_html_ga6f4b41c65c99eb5d53e207439eeffd76"><div class="ttname"><a href="group__Evas__Object__Group.html#ga6f4b41c65c99eb5d53e207439eeffd76">evas_object_layer_set</a></div><div class="ttdeci">EVAS_API void evas_object_layer_set(Evas_Object *obj, short l)</div><div class="ttdoc">Sets the layer of its canvas that the given object will be part of.</div><div class="ttdef"><b>Definition:</b> evas_layer.c:212</div></div>
<div class="ttc" id="agroup__Evas__Object__Group_html_ga9e19e6dd1f517a0ba437c0114d3e7c97"><div class="ttname"><a href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a></div><div class="ttdeci">Efl_Canvas_Object Evas_Object</div><div class="ttdoc">An Evas Object handle.</div><div class="ttdef"><b>Definition:</b> Evas_Common.h:185</div></div>
<div class="ttc" id="agroup__Evas__Object__Group_html_gacad94595f83580c18908cb3b69b08d1a"><div class="ttname"><a href="group__Evas__Object__Group.html#gacad94595f83580c18908cb3b69b08d1a">evas_object_resize</a></div><div class="ttdeci">EVAS_API void evas_object_resize(Evas_Object *obj, Evas_Coord w, Evas_Coord h)</div><div class="ttdoc">Changes the size of the given Evas object.</div><div class="ttdef"><b>Definition:</b> evas_object_main.c:1236</div></div>
<div class="ttc" id="agroup__Evas__Object__Image_html_ga29401fb02f1d51ddf09d195f10a004e7"><div class="ttname"><a href="group__Evas__Object__Image.html#ga29401fb02f1d51ddf09d195f10a004e7">evas_object_image_size_get</a></div><div class="ttdeci">EVAS_API void evas_object_image_size_get(const Evas_Object *obj, int *w, int *h)</div><div class="ttdoc">Retrieves the size of the given image object.</div><div class="ttdef"><b>Definition:</b> evas_image_legacy.c:159</div></div>
<div class="ttc" id="agroup__Evas__Object__Image_html_ga35112cf5b100905a03b64369bef17233"><div class="ttname"><a href="group__Evas__Object__Image.html#ga35112cf5b100905a03b64369bef17233">evas_object_image_filled_add</a></div><div class="ttdeci">EVAS_API Evas_Object * evas_object_image_filled_add(Evas *eo_e)</div><div class="ttdoc">Creates a new image object that automatically scales its bound image to the object's area,...</div><div class="ttdef"><b>Definition:</b> evas_image_legacy.c:35</div></div>
<div class="ttc" id="agroup__Evas__Object__Image_html_gac2e588476b16b04f85ca9a594c140c1d"><div class="ttname"><a href="group__Evas__Object__Image.html#gac2e588476b16b04f85ca9a594c140c1d">evas_object_image_file_set</a></div><div class="ttdeci">EVAS_API void evas_object_image_file_set(Evas_Object *obj, const char *file, const char *key)</div><div class="ttdoc">Set the source file from where an image object must fetch the real image data (it may be an Eet file,...</div><div class="ttdef"><b>Definition:</b> evas_image_legacy.c:194</div></div>
</div><!-- fragment --><p> In this loop we'll use the function letter_add using the falling_letters declared in logo data struct.</p>
<div class="fragment"><div class="line">   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="group__Eina__Types__Group.html#ga7c1b6f81660b4e30516169e9e7d3261c">EINA_C_ARRAY_LENGTH</a>(falling_letters); i++)</div>
<div class="line">     {</div>
<div class="line">        _letter_add(evas, falling_letters[i].letter, &amp;image, &amp;light, &amp;shadow);</div>
<div class="line"> </div>
<div class="line">        <a class="code" href="group__Evas__Object__Image.html#ga29401fb02f1d51ddf09d195f10a004e7">evas_object_image_size_get</a>(shadow, &amp;sh_w, NULL);</div>
<div class="line">        <a class="code" href="group__Evas__Object__Image.html#ga29401fb02f1d51ddf09d195f10a004e7">evas_object_image_size_get</a>(image, &amp;w, &amp;h);</div>
<div class="ttc" id="agroup__Eina__Types__Group_html_ga7c1b6f81660b4e30516169e9e7d3261c"><div class="ttname"><a href="group__Eina__Types__Group.html#ga7c1b6f81660b4e30516169e9e7d3261c">EINA_C_ARRAY_LENGTH</a></div><div class="ttdeci">#define EINA_C_ARRAY_LENGTH(arr)</div><div class="ttdoc">Macro to return the array length of a standard c array.</div><div class="ttdef"><b>Definition:</b> eina_types.h:621</div></div>
</div><!-- fragment --><p> Place image and light on top, above what the viewport can show, to fall later on.</p>
<div class="fragment"><div class="line">        <a class="code" href="group__Evas__Object__Group.html#ga335c8ee6eaeaac9710656af4f8b0db91">evas_object_move</a>(image, x, -h * (i + 1) - 50);</div>
<div class="line">        <a class="code" href="group__Evas__Object__Group.html#ga335c8ee6eaeaac9710656af4f8b0db91">evas_object_move</a>(light, x, -h * (i + 1) - 50);</div>
<div class="ttc" id="agroup__Evas__Object__Group_html_ga335c8ee6eaeaac9710656af4f8b0db91"><div class="ttname"><a href="group__Evas__Object__Group.html#ga335c8ee6eaeaac9710656af4f8b0db91">evas_object_move</a></div><div class="ttdeci">EVAS_API void evas_object_move(Evas_Object *obj, Evas_Coord x, Evas_Coord y)</div><div class="ttdoc">Move the given Evas object to the given location inside its canvas' viewport.</div><div class="ttdef"><b>Definition:</b> evas_object_main.c:1171</div></div>
</div><!-- fragment --><p> Place shadow below the hit-line: FLOOR_Y, centered at image.</p>
<div class="fragment"><div class="line">        <a class="code" href="group__Evas__Object__Group.html#ga335c8ee6eaeaac9710656af4f8b0db91">evas_object_move</a>(shadow, x + CENTER(w, sh_w), FLOOR_Y);</div>
</div><!-- fragment --><p> Here we set the letters padding and add letter body using the function below and setting its friction.</p>
<div class="fragment"><div class="line">        x += falling_letters[i].padding + w;</div>
<div class="line"> </div>
<div class="line">        letter_body = _letter_body_box_add(world, image);</div>
<div class="line">        <a class="code" href="group__EPhysics__Body.html#ga986d45060bf6ba1689a56889a2bcabce">ephysics_body_friction_set</a>(letter_body, 0.4);</div>
<div class="line">     }</div>
<div class="ttc" id="agroup__EPhysics__Body_html_ga986d45060bf6ba1689a56889a2bcabce"><div class="ttname"><a href="group__EPhysics__Body.html#ga986d45060bf6ba1689a56889a2bcabce">ephysics_body_friction_set</a></div><div class="ttdeci">EAPI void ephysics_body_friction_set(EPhysics_Body *body, double friction)</div><div class="ttdoc">Set body's friction.</div></div>
</div><!-- fragment --><p> Here we call another function that will be common to the circle body as well, note that we add a callback that will be explained later. </p>
<div class="fragment"><div class="line">_letter_body_box_add(<a class="code" href="group__EPhysics__World.html#ga83c0d22744748525aa2dac11726c58e6">EPhysics_World</a> *world, <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *image)</div>
<div class="line">{</div>
<div class="line">   <a class="code" href="group__EPhysics__Body.html#gaf39ad724f8a2f81f9139c63263900bf1">EPhysics_Body</a> *body = <a class="code" href="group__EPhysics__Body.html#gaf8f30587da7453114397d64dd9704d7f">ephysics_body_box_add</a>(world);</div>
<div class="line"> </div>
<div class="line">   _letter_body_setup_common(body, image);</div>
<div class="line"> </div>
<div class="line">   <a class="code" href="group__EPhysics__Body.html#gada176f4748a4c2fc4ba2042021ea7067">ephysics_body_event_callback_add</a></div>
<div class="line">     (body, <a class="code" href="group__EPhysics__Body.html#gga904d0d1462e71c1f32cb27f540b5277cacb2363cd59bc8642e74ad916c6658e0a">EPHYSICS_CALLBACK_BODY_UPDATE</a>, _update_box_cb, NULL);</div>
<div class="line"> </div>
<div class="line">   <span class="keywordflow">return</span> body;</div>
<div class="line">}</div>
<div class="ttc" id="agroup__EPhysics__Body_html_gada176f4748a4c2fc4ba2042021ea7067"><div class="ttname"><a href="group__EPhysics__Body.html#gada176f4748a4c2fc4ba2042021ea7067">ephysics_body_event_callback_add</a></div><div class="ttdeci">EAPI void ephysics_body_event_callback_add(EPhysics_Body *body, EPhysics_Callback_Body_Type type, EPhysics_Body_Event_Cb func, const void *data)</div><div class="ttdoc">Register a callback to a type of physics body event.</div></div>
<div class="ttc" id="agroup__EPhysics__Body_html_gaf39ad724f8a2f81f9139c63263900bf1"><div class="ttname"><a href="group__EPhysics__Body.html#gaf39ad724f8a2f81f9139c63263900bf1">EPhysics_Body</a></div><div class="ttdeci">struct _EPhysics_Body EPhysics_Body</div><div class="ttdoc">Body handle, represents an object on EPhysics world.</div><div class="ttdef"><b>Definition:</b> EPhysics.h:655</div></div>
<div class="ttc" id="agroup__EPhysics__Body_html_gaf8f30587da7453114397d64dd9704d7f"><div class="ttname"><a href="group__EPhysics__Body.html#gaf8f30587da7453114397d64dd9704d7f">ephysics_body_box_add</a></div><div class="ttdeci">EAPI EPhysics_Body * ephysics_body_box_add(EPhysics_World *world)</div><div class="ttdoc">Create a new box physics body.</div></div>
<div class="ttc" id="agroup__EPhysics__Body_html_gga904d0d1462e71c1f32cb27f540b5277cacb2363cd59bc8642e74ad916c6658e0a"><div class="ttname"><a href="group__EPhysics__Body.html#gga904d0d1462e71c1f32cb27f540b5277cacb2363cd59bc8642e74ad916c6658e0a">EPHYSICS_CALLBACK_BODY_UPDATE</a></div><div class="ttdeci">@ EPHYSICS_CALLBACK_BODY_UPDATE</div><div class="ttdoc">Body being updated.</div><div class="ttdef"><b>Definition:</b> EPhysics.h:2263</div></div>
<div class="ttc" id="agroup__EPhysics__World_html_ga83c0d22744748525aa2dac11726c58e6"><div class="ttname"><a href="group__EPhysics__World.html#ga83c0d22744748525aa2dac11726c58e6">EPhysics_World</a></div><div class="ttdeci">struct _EPhysics_World EPhysics_World</div><div class="ttdoc">World handle, most basic type of EPhysics.</div><div class="ttdef"><b>Definition:</b> EPhysics.h:901</div></div>
</div><!-- fragment --><p> This function is used to create the body setting its properties. Note that we disable its angular movement (rotation) on Z axis to this letters don't tilt or recline. </p>
<div class="fragment"><div class="line">_letter_body_setup_common(<a class="code" href="group__EPhysics__Body.html#gaf39ad724f8a2f81f9139c63263900bf1">EPhysics_Body</a> *body, <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *view)</div>
<div class="line">{</div>
<div class="line">   <a class="code" href="group__EPhysics__Body.html#ga39cb9e95bbe1d097926a09365c501db3">ephysics_body_evas_object_set</a>(body, view, <a class="code" href="group__Eina__Types__Group.html#ga05c12dacc8b4058994df842b41be85fc">EINA_TRUE</a>);</div>
<div class="line">   <a class="code" href="group__EPhysics__Body.html#gaa0915777f634079ca6c088fda5c20e8f">ephysics_body_mass_set</a>(body, 1.2);</div>
<div class="line">   <a class="code" href="group__EPhysics__Body.html#ga731c9a6443f7c4294fce23fc1287b778">ephysics_body_restitution_set</a>(body, 0.6);</div>
<div class="line">   <a class="code" href="group__EPhysics__Body.html#ga049f9410c5d04d5b810a1755da993cc0">ephysics_body_angular_movement_enable_set</a>(body, <a class="code" href="group__Eina__Types__Group.html#ga1feb115f8e9913e806e090d9bd5a7301">EINA_FALSE</a>, <a class="code" href="group__Eina__Types__Group.html#ga1feb115f8e9913e806e090d9bd5a7301">EINA_FALSE</a>,</div>
<div class="line">                                             <a class="code" href="group__Eina__Types__Group.html#ga1feb115f8e9913e806e090d9bd5a7301">EINA_FALSE</a>);</div>
<div class="line">}</div>
<div class="ttc" id="agroup__EPhysics__Body_html_ga049f9410c5d04d5b810a1755da993cc0"><div class="ttname"><a href="group__EPhysics__Body.html#ga049f9410c5d04d5b810a1755da993cc0">ephysics_body_angular_movement_enable_set</a></div><div class="ttdeci">EAPI void ephysics_body_angular_movement_enable_set(EPhysics_Body *body, Eina_Bool enable_x, Eina_Bool enable_y, Eina_Bool enable_z)</div><div class="ttdoc">Enable or disable body's rotation on z axis.</div></div>
<div class="ttc" id="agroup__EPhysics__Body_html_ga39cb9e95bbe1d097926a09365c501db3"><div class="ttname"><a href="group__EPhysics__Body.html#ga39cb9e95bbe1d097926a09365c501db3">ephysics_body_evas_object_set</a></div><div class="ttdeci">EAPI void ephysics_body_evas_object_set(EPhysics_Body *body, Evas_Object *evas_obj, Eina_Bool use_obj_pos)</div><div class="ttdoc">Set an evas object to a physics body.</div></div>
<div class="ttc" id="agroup__EPhysics__Body_html_ga731c9a6443f7c4294fce23fc1287b778"><div class="ttname"><a href="group__EPhysics__Body.html#ga731c9a6443f7c4294fce23fc1287b778">ephysics_body_restitution_set</a></div><div class="ttdeci">EAPI void ephysics_body_restitution_set(EPhysics_Body *body, double restitution)</div><div class="ttdoc">Set body's coefficient of restitution.</div></div>
<div class="ttc" id="agroup__EPhysics__Body_html_gaa0915777f634079ca6c088fda5c20e8f"><div class="ttname"><a href="group__EPhysics__Body.html#gaa0915777f634079ca6c088fda5c20e8f">ephysics_body_mass_set</a></div><div class="ttdeci">EAPI void ephysics_body_mass_set(EPhysics_Body *body, double mass)</div><div class="ttdoc">Set body's mass.</div></div>
<div class="ttc" id="agroup__Eina__Types__Group_html_ga05c12dacc8b4058994df842b41be85fc"><div class="ttname"><a href="group__Eina__Types__Group.html#ga05c12dacc8b4058994df842b41be85fc">EINA_TRUE</a></div><div class="ttdeci">#define EINA_TRUE</div><div class="ttdoc">boolean value TRUE (numerical value 1)</div><div class="ttdef"><b>Definition:</b> eina_types.h:539</div></div>
<div class="ttc" id="agroup__Eina__Types__Group_html_ga1feb115f8e9913e806e090d9bd5a7301"><div class="ttname"><a href="group__Eina__Types__Group.html#ga1feb115f8e9913e806e090d9bd5a7301">EINA_FALSE</a></div><div class="ttdeci">#define EINA_FALSE</div><div class="ttdoc">boolean value FALSE (numerical value 0)</div><div class="ttdef"><b>Definition:</b> eina_types.h:533</div></div>
</div><!-- fragment --><p> In this callback function that we added to our letter body we'll update its light and shadow.</p>
<p>First we'll update the body, get its image geometry and set the floor distance based on images height.</p>
<p></p>
<div class="fragment"><div class="line">_update_box_cb(<span class="keywordtype">void</span> *data __UNUSED__, <a class="code" href="group__EPhysics__Body.html#gaf39ad724f8a2f81f9139c63263900bf1">EPhysics_Body</a> *body, <span class="keywordtype">void</span> *event_info)</div>
<div class="line">{</div>
<div class="line">   <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *image = event_info;</div>
<div class="line">   <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *shadow = <a class="code" href="group__Evas__Object__Group__Extras.html#ga2c207e9b215bc73f16c70b5387b3385b">evas_object_data_get</a>(image, <span class="stringliteral">&quot;shadow&quot;</span>);</div>
<div class="line">   <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *light = <a class="code" href="group__Evas__Object__Group__Extras.html#ga2c207e9b215bc73f16c70b5387b3385b">evas_object_data_get</a>(image, <span class="stringliteral">&quot;light&quot;</span>);</div>
<div class="line">   <span class="keywordtype">int</span> x, y, w, h, floor_distance, alpha = 0;</div>
<div class="line"> </div>
<div class="line">   <span class="comment">/* modify the evas object according to the body */</span></div>
<div class="line">   <a class="code" href="group__EPhysics__Body.html#ga7209e650176e0612efb2a2cc2af0ec27">ephysics_body_evas_object_update</a>(body);</div>
<div class="line">   <a class="code" href="group__Evas__Object__Group__Basic.html#ga6e8e78e110392480dd612df86a16b630">evas_object_geometry_get</a>(image, &amp;x, &amp;y, &amp;w, &amp;h);</div>
<div class="line"> </div>
<div class="line">   floor_distance = FLOOR_Y - h;</div>
<div class="ttc" id="agroup__EPhysics__Body_html_ga7209e650176e0612efb2a2cc2af0ec27"><div class="ttname"><a href="group__EPhysics__Body.html#ga7209e650176e0612efb2a2cc2af0ec27">ephysics_body_evas_object_update</a></div><div class="ttdeci">EAPI void ephysics_body_evas_object_update(EPhysics_Body *body)</div><div class="ttdoc">Update the evas object associated to the body.</div></div>
<div class="ttc" id="agroup__Evas__Object__Group__Basic_html_ga6e8e78e110392480dd612df86a16b630"><div class="ttname"><a href="group__Evas__Object__Group__Basic.html#ga6e8e78e110392480dd612df86a16b630">evas_object_geometry_get</a></div><div class="ttdeci">EVAS_API void evas_object_geometry_get(const Evas_Object *eo_obj, Evas_Coord *x, Evas_Coord *y, Evas_Coord *w, Evas_Coord *h)</div><div class="ttdoc">Retrieves the position and (rectangular) size of the given Evas object.</div><div class="ttdef"><b>Definition:</b> evas_object_main.c:1335</div></div>
<div class="ttc" id="agroup__Evas__Object__Group__Extras_html_ga2c207e9b215bc73f16c70b5387b3385b"><div class="ttname"><a href="group__Evas__Object__Group__Extras.html#ga2c207e9b215bc73f16c70b5387b3385b">evas_object_data_get</a></div><div class="ttdeci">EVAS_API void * evas_object_data_get(const Evas_Object *obj, const char *key)</div><div class="ttdoc">Return an attached data pointer on an Evas object by its given string key.</div><div class="ttdef"><b>Definition:</b> evas_data.c:12</div></div>
</div><!-- fragment --><p> As long as the letter approaches the floor, its shadow is darker, with bigger y.</p>
<div class="fragment"><div class="line">   <span class="keywordflow">if</span> (y &gt; SH_THRESHOLD)</div>
<div class="line">     {</div>
<div class="line">        <span class="keywordtype">int</span> sh_w, sh_h;</div>
<div class="line">        <span class="keywordtype">double</span> pos_x;</div>
<div class="line"> </div>
<div class="line">        <a class="code" href="group__Evas__Object__Image.html#ga29401fb02f1d51ddf09d195f10a004e7">evas_object_image_size_get</a>(shadow, &amp;sh_w, &amp;sh_h);</div>
<div class="line">        alpha = 255 * (y - SH_THRESHOLD) / (floor_distance - SH_THRESHOLD);</div>
</div><!-- fragment --><p> And with bigger x &ndash; its proportional to x / WIDTH, but varies from 100 to 255</p>
<div class="fragment"><div class="line">        pos_x = (double) x / (WIDTH - w);</div>
<div class="line">        alpha = alpha * PROP_GET(pos_x, 100, 255);</div>
</div><!-- fragment --><p> Note that the box shadow is not resized, just moved. And here set also the colors.</p>
<div class="fragment"><div class="line">        <a class="code" href="group__Evas__Object__Group.html#ga335c8ee6eaeaac9710656af4f8b0db91">evas_object_move</a>(shadow, x + CENTER(w, sh_w) + SH_OFFSET_X,</div>
<div class="line">                         FLOOR_Y - sh_h + 2);</div>
<div class="line">     }</div>
<div class="line">   <a class="code" href="group__Evas__Object__Group__Basic.html#gab751e9d24c16e74af6f7c08ea5b930c2">evas_object_color_set</a>(shadow, alpha, alpha, alpha, alpha);</div>
</div><!-- fragment --><p> As long as the letter approaches the floor, its lighter, with bigger x and y.</p>
<div class="fragment"><div class="line">   <a class="code" href="group__Evas__Object__Group.html#ga335c8ee6eaeaac9710656af4f8b0db91">evas_object_move</a>(light, x, y);</div>
<div class="line">   alpha = (y &lt;= 0) ? 0 : y * 255 / floor_distance;</div>
<div class="line">   alpha = alpha * (x - OFFSET_X + 80) / (WIDTH - OFFSET_X);</div>
<div class="line">   <a class="code" href="group__Evas__Object__Group__Basic.html#gab751e9d24c16e74af6f7c08ea5b930c2">evas_object_color_set</a>(light, alpha, alpha, alpha, alpha);</div>
<div class="line">}</div>
</div><!-- fragment --> <h1><a class="anchor" id="add-lettere"></a>
Adding the letter E</h1>
<p>Here we'll add the last letter, "E" is a circle that comes rolling on the floor.</p>
<p>First we use the letter_add function, set its shadow color and get its sizes.</p>
<div class="fragment"><div class="line">   _letter_add(evas, <span class="stringliteral">&quot;E&quot;</span>, &amp;image, &amp;light, &amp;shadow);</div>
<div class="line">   <a class="code" href="group__Evas__Object__Group__Basic.html#gab751e9d24c16e74af6f7c08ea5b930c2">evas_object_color_set</a>(shadow, 255, 255, 255, 255);</div>
<div class="line"> </div>
<div class="line">   <a class="code" href="group__Evas__Object__Image.html#ga29401fb02f1d51ddf09d195f10a004e7">evas_object_image_size_get</a>(shadow, &amp;sh_w, NULL);</div>
<div class="line">   <a class="code" href="group__Evas__Object__Image.html#ga29401fb02f1d51ddf09d195f10a004e7">evas_object_image_size_get</a>(image, &amp;w, &amp;h);</div>
</div><!-- fragment --><p> Place image and light above the floor and to the left of viewport, to comes rolling later on.</p>
<div class="fragment"><div class="line">   <a class="code" href="group__Evas__Object__Group.html#ga335c8ee6eaeaac9710656af4f8b0db91">evas_object_move</a>(image, -w - 1, FLOOR_Y - h + 1);</div>
<div class="line">   <a class="code" href="group__Evas__Object__Group.html#ga335c8ee6eaeaac9710656af4f8b0db91">evas_object_move</a>(light, -w - 1, FLOOR_Y - h + 1);</div>
</div><!-- fragment --><p> Place the shadow below the hit-line: FLOOR_Y centered at image.</p>
<div class="fragment"><div class="line">   <a class="code" href="group__Evas__Object__Group.html#ga335c8ee6eaeaac9710656af4f8b0db91">evas_object_move</a>(shadow, -w - 1 + CENTER(w, sh_w), FLOOR_Y);</div>
</div><!-- fragment --><p> Here we create the body using body_circle function and enable its rotation on Z axis.</p>
<div class="fragment"></div><!-- fragment --><p> Make the "E" logo get into the viewport by applying a horizontal force.</p>
<div class="fragment"></div><!-- fragment --><p> Here we use the letter_body_setup_common to create the body and set its properties, note that we add a callback that will be explained below. </p>
<div class="fragment"><div class="line">_letter_body_circle_add(<a class="code" href="group__EPhysics__World.html#ga83c0d22744748525aa2dac11726c58e6">EPhysics_World</a> *world, <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *image)</div>
<div class="line">{</div>
<div class="line">   <a class="code" href="group__EPhysics__Body.html#gaf39ad724f8a2f81f9139c63263900bf1">EPhysics_Body</a> *body = <a class="code" href="group__EPhysics__Body.html#gab57e99be7fe5a5174c38b8aea55f3266">ephysics_body_cylinder_add</a>(world);</div>
<div class="line"> </div>
<div class="line">   _letter_body_setup_common(body, image);</div>
<div class="line"> </div>
<div class="line">   <a class="code" href="group__EPhysics__Body.html#gada176f4748a4c2fc4ba2042021ea7067">ephysics_body_event_callback_add</a></div>
<div class="line">     (body, <a class="code" href="group__EPhysics__Body.html#gga904d0d1462e71c1f32cb27f540b5277cacb2363cd59bc8642e74ad916c6658e0a">EPHYSICS_CALLBACK_BODY_UPDATE</a>, _update_circle_cb, NULL);</div>
<div class="line"> </div>
<div class="line">   <span class="keywordflow">return</span> body;</div>
<div class="line">}</div>
<div class="ttc" id="agroup__EPhysics__Body_html_gab57e99be7fe5a5174c38b8aea55f3266"><div class="ttname"><a href="group__EPhysics__Body.html#gab57e99be7fe5a5174c38b8aea55f3266">ephysics_body_cylinder_add</a></div><div class="ttdeci">EAPI EPhysics_Body * ephysics_body_cylinder_add(EPhysics_World *world)</div><div class="ttdoc">Create a new cylinder physics body.</div></div>
</div><!-- fragment --><p> In this callback function that we added to our "E" letter body we'll update its light and shadow.</p>
<p>First we'll update the body and get its image geometry.</p>
<p></p>
<div class="fragment"><div class="line">_update_circle_cb(<span class="keywordtype">void</span> *data __UNUSED__, <a class="code" href="group__EPhysics__Body.html#gaf39ad724f8a2f81f9139c63263900bf1">EPhysics_Body</a> *body, <span class="keywordtype">void</span> *event_info)</div>
<div class="line">{</div>
<div class="line">   <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *image = event_info;</div>
<div class="line">   <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *shadow = <a class="code" href="group__Evas__Object__Group__Extras.html#ga2c207e9b215bc73f16c70b5387b3385b">evas_object_data_get</a>(image, <span class="stringliteral">&quot;shadow&quot;</span>);</div>
<div class="line">   <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *light = <a class="code" href="group__Evas__Object__Group__Extras.html#ga2c207e9b215bc73f16c70b5387b3385b">evas_object_data_get</a>(image, <span class="stringliteral">&quot;light&quot;</span>);</div>
<div class="line">   <span class="keywordtype">int</span> x, y, w, h, sh_w, sh_h, alpha = 0;</div>
<div class="line">   <span class="keyword">const</span> Evas_Map *map;</div>
<div class="line"> </div>
<div class="line">   <span class="comment">/* modify the evas object according to the body */</span></div>
<div class="line">   <a class="code" href="group__EPhysics__Body.html#ga7209e650176e0612efb2a2cc2af0ec27">ephysics_body_evas_object_update</a>(body);</div>
<div class="line">   <a class="code" href="group__Evas__Object__Group__Basic.html#ga6e8e78e110392480dd612df86a16b630">evas_object_geometry_get</a>(image, &amp;x, &amp;y, &amp;w, &amp;h);</div>
</div><!-- fragment --><p> As long as the letter approaches the floor, its lighter, with bigger x.</p>
<div class="fragment"><div class="line">   <a class="code" href="group__Evas__Object__Group.html#ga335c8ee6eaeaac9710656af4f8b0db91">evas_object_move</a>(light, x, y);</div>
<div class="line">   alpha = x * 255 / (WIDTH - w);</div>
<div class="line">   <a class="code" href="group__Evas__Object__Group__Basic.html#gab751e9d24c16e74af6f7c08ea5b930c2">evas_object_color_set</a>(light, alpha, alpha, alpha, alpha);</div>
</div><!-- fragment --><p> Use the same map from image to the light (rotate it).</p>
<div class="fragment"><div class="line">   map = <a class="code" href="group__Evas__Object__Group.html#ga2c07678a53eb6627a6be943e6ed067b8">evas_object_map_get</a>(image);</div>
<div class="line">   <a class="code" href="group__Evas__Object__Group.html#gadbb970a1e0da91183bab3af1eb276953">evas_object_map_set</a>(light, map);</div>
<div class="line">   <a class="code" href="group__Evas__Object__Group.html#gafca4ed9f6cb6063ff7e8d9193418129e">evas_object_map_enable_set</a>(light, <a class="code" href="group__Eina__Types__Group.html#ga05c12dacc8b4058994df842b41be85fc">EINA_TRUE</a>);</div>
<div class="ttc" id="agroup__Evas__Object__Group_html_ga2c07678a53eb6627a6be943e6ed067b8"><div class="ttname"><a href="group__Evas__Object__Group.html#ga2c07678a53eb6627a6be943e6ed067b8">evas_object_map_get</a></div><div class="ttdeci">EVAS_API const Evas_Map * evas_object_map_get(const Evas_Object *eo_obj)</div><div class="ttdoc">Get current object transformation map.</div><div class="ttdef"><b>Definition:</b> evas_map.c:649</div></div>
<div class="ttc" id="agroup__Evas__Object__Group_html_gadbb970a1e0da91183bab3af1eb276953"><div class="ttname"><a href="group__Evas__Object__Group.html#gadbb970a1e0da91183bab3af1eb276953">evas_object_map_set</a></div><div class="ttdeci">EVAS_API void evas_object_map_set(Evas_Object *eo_obj, const Evas_Map *map)</div><div class="ttdoc">Set current object transformation map.</div><div class="ttdef"><b>Definition:</b> evas_map.c:532</div></div>
<div class="ttc" id="agroup__Evas__Object__Group_html_gafca4ed9f6cb6063ff7e8d9193418129e"><div class="ttname"><a href="group__Evas__Object__Group.html#gafca4ed9f6cb6063ff7e8d9193418129e">evas_object_map_enable_set</a></div><div class="ttdeci">EVAS_API void evas_object_map_enable_set(Eo *eo_obj, Eina_Bool enabled)</div><div class="ttdoc">Enable or disable the map that is set.</div><div class="ttdef"><b>Definition:</b> evas_map.c:516</div></div>
</div><!-- fragment --><p> As long as the letter approaches the floor, its shadow is darker, with bigger y.</p>
<div class="fragment"><div class="line">   <a class="code" href="group__Evas__Object__Image.html#ga29401fb02f1d51ddf09d195f10a004e7">evas_object_image_size_get</a>(shadow, &amp;sh_w, &amp;sh_h);</div>
<div class="line">   <a class="code" href="group__Evas__Object__Group.html#ga335c8ee6eaeaac9710656af4f8b0db91">evas_object_move</a>(shadow, x + CENTER(w, sh_w) + SH_OFFSET_X,</div>
<div class="line">                    FLOOR_Y - sh_h + 2);</div>
<div class="line">   alpha = 127 + alpha / 2;</div>
<div class="line">   <a class="code" href="group__Evas__Object__Group__Basic.html#gab751e9d24c16e74af6f7c08ea5b930c2">evas_object_color_set</a>(shadow, alpha, alpha, alpha, alpha);</div>
</div><!-- fragment --><p> When the letter "E" passes the viewport, we send it to the begin again to collide with the other letters.</p>
<div class="fragment"><div class="line">   <span class="keywordflow">if</span> (x &gt; E_THRESHOLD)</div>
<div class="line">     <a class="code" href="group__EPhysics__Body.html#gae3c32aa0cdd60ffec86fff30097e75e1">ephysics_body_move</a>(body, -w - 1, y, -15);</div>
<div class="line">}</div>
<div class="ttc" id="agroup__EPhysics__Body_html_gae3c32aa0cdd60ffec86fff30097e75e1"><div class="ttname"><a href="group__EPhysics__Body.html#gae3c32aa0cdd60ffec86fff30097e75e1">ephysics_body_move</a></div><div class="ttdeci">EAPI void ephysics_body_move(EPhysics_Body *body, Evas_Coord x, Evas_Coord y, Evas_Coord z)</div><div class="ttdoc">Set physics body position.</div></div>
</div><!-- fragment --><p> Here we finish the example. The full source code can be found at <a class="el" href="ephysics_logo_c.html">ephysics_logo.c</a>. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<div class="footer">
  <p>
    <span class="version">EFL 1.26.99</span>
    <span class="copyright">Copyright &copy;2000-2022 <a href="http://www.enlightenment.org">enlightenment.org</a></span>
    <span class="generated">Generated @ Sat Oct 29 2022 18:10:40</span>
  </p>
</div>
</body>
</html>
