<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <title>EPhysics - Collision Filter</title>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-110876574-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-110876574-1');
  </script>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <link rel="icon" href="favicon.png" type="image/x-icon">
  <link rel="shortcut icon" href="favicon.png" type="image/x-icon">
  <link rel="icon" href="favicon.png" type="image/ico">
  <link rel="shortcut icon" href="favicon.png" type="image/ico">
  <link rel="stylesheet" type="text/css" href="e.css">
</head>
<body>
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">EPhysics - Collision Filter </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The purpose of this example is to demonstrate the EPhysics Collision Filter usage - The code adds four balls in 2 rows and 2 columns, two on each collision group, the collision only happens when the balls are in the same group (row),to make it easier, balls in the same group has the same color and size.</p>
<div class="image">
<img src="collision_filter.png" alt=""/>
</div>
 <p>For this example we'll have an EPhysics_World and four basic EPhysics_Bodys, we'll apply an impulse on then and see what happens when they're in other collision group.</p>
<p>The basic concepts like - initializing an EPhysics_World, render geometry, physics limiting boundaries, add an Ephysics_Body, associate it to evas objects, change restitution, friction and impulse properties, were already covered in <a class="el" href="tutorial_ephysics_bouncing_ball.html">EPhysics - Bouncing Ball</a></p>
<h1><a class="anchor" id="autotoc_md13"></a>
Adding the balls</h1>
<p></p>
<p>We'll use two arrays (color and size) to distinguish the groups.</p>
<div class="fragment"><div class="line">_world_populate(Test_Data *test_data)</div>
<div class="line">{</div>
<div class="line">   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *colors[] = {<span class="stringliteral">&quot;blue-ball&quot;</span>, <span class="stringliteral">&quot;big-red-ball&quot;</span>};</div>
<div class="line">   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> sizes[] = {54, 70};</div>
<div class="line">   <a class="code" href="group__EPhysics__Body.html#gaf39ad724f8a2f81f9139c63263900bf1">EPhysics_Body</a> *fall_body;</div>
<div class="line">   <a class="code" href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a> *sphere;</div>
<div class="line">   <span class="keywordtype">int</span> i, column, row;</div>
<div class="ttc" id="agroup__EPhysics__Body_html_gaf39ad724f8a2f81f9139c63263900bf1"><div class="ttname"><a href="group__EPhysics__Body.html#gaf39ad724f8a2f81f9139c63263900bf1">EPhysics_Body</a></div><div class="ttdeci">struct _EPhysics_Body EPhysics_Body</div><div class="ttdoc">Body handle, represents an object on EPhysics world.</div><div class="ttdef"><b>Definition:</b> EPhysics.h:655</div></div>
<div class="ttc" id="agroup__Evas__Object__Group_html_ga9e19e6dd1f517a0ba437c0114d3e7c97"><div class="ttname"><a href="group__Evas__Object__Group.html#ga9e19e6dd1f517a0ba437c0114d3e7c97">Evas_Object</a></div><div class="ttdeci">Efl_Canvas_Object Evas_Object</div><div class="ttdoc">An Evas Object handle.</div><div class="ttdef"><b>Definition:</b> Evas_Common.h:185</div></div>
</div><!-- fragment --><p> The balls declaration was placed into a For loop, just to simplify the coding and divide them in two groups.</p>
<div class="fragment"><div class="line">   <span class="keywordflow">for</span> (i = 0; i &lt; 4; i++)</div>
<div class="line">     {</div>
<div class="line">        column = i % 2;</div>
<div class="line">        row = i / 2;</div>
<div class="line"> </div>
<div class="line">        sphere = <a class="code" href="group__Elm__Image.html#ga5d211c8af4f6e297a24fc4e8737c81a9">elm_image_add</a>(test_data-&gt;win);</div>
<div class="line">        <a class="code" href="group__Elm__Image.html#gad1a96ede5f513042cef3c1dac4572f73">elm_image_file_set</a>(</div>
<div class="line">           sphere, PACKAGE_DATA_DIR <span class="stringliteral">&quot;/&quot;</span> EPHYSICS_TEST_THEME <span class="stringliteral">&quot;.edj&quot;</span>,</div>
<div class="line">           colors[row]);</div>
<div class="line">        <a class="code" href="group__Evas__Object__Group.html#ga335c8ee6eaeaac9710656af4f8b0db91">evas_object_move</a>(sphere, (1 + column) * WIDTH / 4 +</div>
<div class="line">                         (70 - sizes[row]) / 2,</div>
<div class="line">                         100 + row * 60 + row / 2 * 20);</div>
<div class="line">        <a class="code" href="group__Evas__Object__Group.html#gacad94595f83580c18908cb3b69b08d1a">evas_object_resize</a>(sphere, sizes[row], sizes[row]);</div>
<div class="line">        <a class="code" href="group__Evas__Object__Group__Basic.html#ga07208fcafd4739de606bc35fff684bf5">evas_object_show</a>(sphere);</div>
<div class="line">        test_data-&gt;evas_objs = <a class="code" href="group__Eina__List__Group.html#gaa4ff7ace0fcf8c3dc0d931068069a521">eina_list_append</a>(test_data-&gt;evas_objs, sphere);</div>
<div class="line"> </div>
<div class="line">        fall_body = <a class="code" href="group__EPhysics__Body.html#gab26c09b5a98dabfb0323dbdb7f2a64af">ephysics_body_sphere_add</a>(test_data-&gt;world);</div>
<div class="line">        <a class="code" href="group__EPhysics__Body.html#ga39cb9e95bbe1d097926a09365c501db3">ephysics_body_evas_object_set</a>(fall_body, sphere, <a class="code" href="group__Eina__Types__Group.html#ga05c12dacc8b4058994df842b41be85fc">EINA_TRUE</a>);</div>
<div class="line">        <a class="code" href="group__EPhysics__Body.html#ga731c9a6443f7c4294fce23fc1287b778">ephysics_body_restitution_set</a>(fall_body, 0.95);</div>
<div class="line">        <a class="code" href="group__EPhysics__Body.html#ga986d45060bf6ba1689a56889a2bcabce">ephysics_body_friction_set</a>(fall_body, 0.1);</div>
<div class="ttc" id="agroup__EPhysics__Body_html_ga39cb9e95bbe1d097926a09365c501db3"><div class="ttname"><a href="group__EPhysics__Body.html#ga39cb9e95bbe1d097926a09365c501db3">ephysics_body_evas_object_set</a></div><div class="ttdeci">EAPI void ephysics_body_evas_object_set(EPhysics_Body *body, Evas_Object *evas_obj, Eina_Bool use_obj_pos)</div><div class="ttdoc">Set an evas object to a physics body.</div></div>
<div class="ttc" id="agroup__EPhysics__Body_html_ga731c9a6443f7c4294fce23fc1287b778"><div class="ttname"><a href="group__EPhysics__Body.html#ga731c9a6443f7c4294fce23fc1287b778">ephysics_body_restitution_set</a></div><div class="ttdeci">EAPI void ephysics_body_restitution_set(EPhysics_Body *body, double restitution)</div><div class="ttdoc">Set body's coefficient of restitution.</div></div>
<div class="ttc" id="agroup__EPhysics__Body_html_ga986d45060bf6ba1689a56889a2bcabce"><div class="ttname"><a href="group__EPhysics__Body.html#ga986d45060bf6ba1689a56889a2bcabce">ephysics_body_friction_set</a></div><div class="ttdeci">EAPI void ephysics_body_friction_set(EPhysics_Body *body, double friction)</div><div class="ttdoc">Set body's friction.</div></div>
<div class="ttc" id="agroup__EPhysics__Body_html_gab26c09b5a98dabfb0323dbdb7f2a64af"><div class="ttname"><a href="group__EPhysics__Body.html#gab26c09b5a98dabfb0323dbdb7f2a64af">ephysics_body_sphere_add</a></div><div class="ttdeci">EAPI EPhysics_Body * ephysics_body_sphere_add(EPhysics_World *world)</div><div class="ttdoc">Create a new sphere physics body.</div></div>
<div class="ttc" id="agroup__Eina__List__Group_html_gaa4ff7ace0fcf8c3dc0d931068069a521"><div class="ttname"><a href="group__Eina__List__Group.html#gaa4ff7ace0fcf8c3dc0d931068069a521">eina_list_append</a></div><div class="ttdeci">EINA_API Eina_List * eina_list_append(Eina_List *list, const void *data)</div><div class="ttdoc">Appends the given data to the given linked list.</div><div class="ttdef"><b>Definition:</b> eina_list.c:584</div></div>
<div class="ttc" id="agroup__Eina__Types__Group_html_ga05c12dacc8b4058994df842b41be85fc"><div class="ttname"><a href="group__Eina__Types__Group.html#ga05c12dacc8b4058994df842b41be85fc">EINA_TRUE</a></div><div class="ttdeci">#define EINA_TRUE</div><div class="ttdoc">boolean value TRUE (numerical value 1)</div><div class="ttdef"><b>Definition:</b> eina_types.h:539</div></div>
<div class="ttc" id="agroup__Elm__Image_html_ga5d211c8af4f6e297a24fc4e8737c81a9"><div class="ttname"><a href="group__Elm__Image.html#ga5d211c8af4f6e297a24fc4e8737c81a9">elm_image_add</a></div><div class="ttdeci">Evas_Object * elm_image_add(Evas_Object *parent)</div><div class="ttdoc">Add a new image to the parent.</div><div class="ttdef"><b>Definition:</b> efl_ui_image.c:2735</div></div>
<div class="ttc" id="agroup__Elm__Image_html_gad1a96ede5f513042cef3c1dac4572f73"><div class="ttname"><a href="group__Elm__Image.html#gad1a96ede5f513042cef3c1dac4572f73">elm_image_file_set</a></div><div class="ttdeci">Eina_Bool elm_image_file_set(Evas_Object *obj, const char *file, const char *group)</div><div class="ttdoc">Set the file that will be used as the image's source.</div><div class="ttdef"><b>Definition:</b> efl_ui_image.c:2435</div></div>
<div class="ttc" id="agroup__Evas__Object__Group__Basic_html_ga07208fcafd4739de606bc35fff684bf5"><div class="ttname"><a href="group__Evas__Object__Group__Basic.html#ga07208fcafd4739de606bc35fff684bf5">evas_object_show</a></div><div class="ttdeci">EVAS_API void evas_object_show(Evas_Object *eo_obj)</div><div class="ttdoc">Makes the given Evas object visible.</div><div class="ttdef"><b>Definition:</b> evas_object_main.c:1814</div></div>
<div class="ttc" id="agroup__Evas__Object__Group_html_ga335c8ee6eaeaac9710656af4f8b0db91"><div class="ttname"><a href="group__Evas__Object__Group.html#ga335c8ee6eaeaac9710656af4f8b0db91">evas_object_move</a></div><div class="ttdeci">EVAS_API void evas_object_move(Evas_Object *obj, Evas_Coord x, Evas_Coord y)</div><div class="ttdoc">Move the given Evas object to the given location inside its canvas' viewport.</div><div class="ttdef"><b>Definition:</b> evas_object_main.c:1171</div></div>
<div class="ttc" id="agroup__Evas__Object__Group_html_gacad94595f83580c18908cb3b69b08d1a"><div class="ttname"><a href="group__Evas__Object__Group.html#gacad94595f83580c18908cb3b69b08d1a">evas_object_resize</a></div><div class="ttdeci">EVAS_API void evas_object_resize(Evas_Object *obj, Evas_Coord w, Evas_Coord h)</div><div class="ttdoc">Changes the size of the given Evas object.</div><div class="ttdef"><b>Definition:</b> evas_object_main.c:1236</div></div>
</div><!-- fragment --><p> Note in this part we divide the balls in two groups by color (row).</p>
<div class="fragment"><div class="line">        <a class="code" href="group__EPhysics__Body.html#ga163b202be4c445bf79c28adb0db2bdbd">ephysics_body_collision_group_add</a>(fall_body, colors[row]);</div>
<div class="ttc" id="agroup__EPhysics__Body_html_ga163b202be4c445bf79c28adb0db2bdbd"><div class="ttname"><a href="group__EPhysics__Body.html#ga163b202be4c445bf79c28adb0db2bdbd">ephysics_body_collision_group_add</a></div><div class="ttdeci">EAPI Eina_Bool ephysics_body_collision_group_add(EPhysics_Body *body, const char *group)</div><div class="ttdoc">Add a body to a given collision group.</div></div>
</div><!-- fragment --><p> The impulse will be applied in only 1 ball per group, in this case:</p>
<p>The 1st row 2nd column ball will be applied an impulse to the left (-300kg * p/s).</p>
<p>The 2nd row 1st column ball will be applied an impulse to the right (300kg * p/s).</p>
<p>And then saving the body into a list.</p>
<div class="fragment"><div class="line">        <span class="keywordflow">if</span> (column + row == 1)</div>
<div class="line">          <a class="code" href="group__EPhysics__Body.html#ga9109b39047a724640f6a18c683c9eb07">ephysics_body_central_impulse_apply</a>(fall_body, 600 * row - 300, 0, 0);</div>
<div class="line">        test_data-&gt;bodies = <a class="code" href="group__Eina__List__Group.html#gaa4ff7ace0fcf8c3dc0d931068069a521">eina_list_append</a>(test_data-&gt;bodies, fall_body);</div>
<div class="line">     }</div>
<div class="ttc" id="agroup__EPhysics__Body_html_ga9109b39047a724640f6a18c683c9eb07"><div class="ttname"><a href="group__EPhysics__Body.html#ga9109b39047a724640f6a18c683c9eb07">ephysics_body_central_impulse_apply</a></div><div class="ttdeci">EAPI void ephysics_body_central_impulse_apply(EPhysics_Body *body, double x, double y, double z)</div><div class="ttdoc">Apply an impulse on the center of a body.</div></div>
<div class="line">}</div>
</div><!-- fragment --><p> Here we finish the example. The full source code can be found at <a class="el" href="test_collision_filter_c.html">test_collision_filter.c</a>. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<div class="footer">
  <p>
    <span class="version">EFL 1.26.99</span>
    <span class="copyright">Copyright &copy;2000-2022 <a href="http://www.enlightenment.org">enlightenment.org</a></span>
    <span class="generated">Generated @ Sat Oct 29 2022 18:10:39</span>
  </p>
</div>
</body>
</html>
