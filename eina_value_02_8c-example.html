<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <title>eina_value_02.c</title>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-110876574-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-110876574-1');
  </script>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <link rel="icon" href="favicon.png" type="image/x-icon">
  <link rel="shortcut icon" href="favicon.png" type="image/x-icon">
  <link rel="icon" href="favicon.png" type="image/ico">
  <link rel="shortcut icon" href="favicon.png" type="image/ico">
  <link rel="stylesheet" type="text/css" href="e.css">
</head>
<body>
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">eina_value_02.c</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><span class="comment">//Compile with:</span></div>
<div class="line"><span class="comment">//gcc eina_value_02.c -o eina_value_02 `pkg-config --cflags --libs eina`</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="Eina_8h.html">Eina.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <a name="_a0"></a><a class="code" href="struct__Eina__Value__Struct__Desc.html">Eina_Value_Struct_Desc</a> *V1_DESC = NULL;</div>
<div class="line"><span class="keyword">static</span> <a class="code" href="struct__Eina__Value__Struct__Desc.html">Eina_Value_Struct_Desc</a> *V2_DESC = NULL;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> value_init(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">   <span class="keyword">typedef</span> <span class="keyword">struct </span>_My_Struct_V1 {</div>
<div class="line">     <span class="keywordtype">int</span> param1;</div>
<div class="line">     <span class="keywordtype">char</span> param2;</div>
<div class="line">   } My_Struct_V1;</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">   <span class="keyword">static</span> <a name="_a1"></a><a class="code" href="struct__Eina__Value__Struct__Member.html">Eina_Value_Struct_Member</a> v1_members[] = {</div>
<div class="line">     <span class="comment">// no eina_value_type as they are not constant initializers, see below.</span></div>
<div class="line">     <a name="a2"></a><a class="code" href="group__Eina__Value__Struct__Group.html#ga139206ef35b0b76e87eef56a202c0ae9">EINA_VALUE_STRUCT_MEMBER</a>(NULL, My_Struct_V1, param1),</div>
<div class="line">     <a class="code" href="group__Eina__Value__Struct__Group.html#ga139206ef35b0b76e87eef56a202c0ae9">EINA_VALUE_STRUCT_MEMBER</a>(NULL, My_Struct_V1, param2)</div>
<div class="line">   };</div>
<div class="line">   v1_members[0].<a name="a3"></a><a class="code" href="struct__Eina__Value__Struct__Member.html#a615cdf08597bd18623c8c7daec7b4641">type</a> = <a name="a4"></a><a class="code" href="group__Eina__Value__Group.html#ga17974fd9ab773a3efefd591ffde58f77">EINA_VALUE_TYPE_INT</a>;</div>
<div class="line">   v1_members[1].<a class="code" href="struct__Eina__Value__Struct__Member.html#a615cdf08597bd18623c8c7daec7b4641">type</a> = <a name="a5"></a><a class="code" href="group__Eina__Value__Group.html#ga0d54e0b952b44b7ac4f2fd573f7839c0">EINA_VALUE_TYPE_CHAR</a>;</div>
<div class="line">   <span class="keyword">static</span> <a class="code" href="struct__Eina__Value__Struct__Desc.html">Eina_Value_Struct_Desc</a> v1_desc = {</div>
<div class="line">     <a name="a6"></a><a class="code" href="group__Eina__Value__Struct__Group.html#gae76aada4965672ce991f1f41baf71975">EINA_VALUE_STRUCT_DESC_VERSION</a>,</div>
<div class="line">     NULL, <span class="comment">// no special operations</span></div>
<div class="line">     v1_members,</div>
<div class="line">     <a name="a7"></a><a class="code" href="group__Eina__Types__Group.html#ga7c1b6f81660b4e30516169e9e7d3261c">EINA_C_ARRAY_LENGTH</a>(v1_members),</div>
<div class="line">     <span class="keyword">sizeof</span>(My_Struct_V1)</div>
<div class="line">   };</div>
<div class="line">   V1_DESC = &amp;v1_desc;</div>
<div class="line"> </div>
<div class="line">   <span class="keyword">typedef</span> <span class="keyword">struct </span>_My_Struct_V2 {</div>
<div class="line">     <span class="keywordtype">int</span> param1;</div>
<div class="line">     <span class="keywordtype">char</span> param2;</div>
<div class="line">     <span class="keywordtype">int</span> param3;</div>
<div class="line">   } My_Struct_V2;</div>
<div class="line">   <span class="keyword">static</span> <a class="code" href="struct__Eina__Value__Struct__Member.html">Eina_Value_Struct_Member</a> v2_members[] = {</div>
<div class="line">     <span class="comment">// no eina_value_type as they are not constant initializers, see below.</span></div>
<div class="line">     <a class="code" href="group__Eina__Value__Struct__Group.html#ga139206ef35b0b76e87eef56a202c0ae9">EINA_VALUE_STRUCT_MEMBER</a>(NULL, My_Struct_V2, param1),</div>
<div class="line">     <a class="code" href="group__Eina__Value__Struct__Group.html#ga139206ef35b0b76e87eef56a202c0ae9">EINA_VALUE_STRUCT_MEMBER</a>(NULL, My_Struct_V2, param2),</div>
<div class="line">     <a class="code" href="group__Eina__Value__Struct__Group.html#ga139206ef35b0b76e87eef56a202c0ae9">EINA_VALUE_STRUCT_MEMBER</a>(NULL, My_Struct_V2, param3)</div>
<div class="line">   };</div>
<div class="line">   v2_members[0].<a class="code" href="struct__Eina__Value__Struct__Member.html#a615cdf08597bd18623c8c7daec7b4641">type</a> = <a class="code" href="group__Eina__Value__Group.html#ga17974fd9ab773a3efefd591ffde58f77">EINA_VALUE_TYPE_INT</a>;</div>
<div class="line">   v2_members[1].<a class="code" href="struct__Eina__Value__Struct__Member.html#a615cdf08597bd18623c8c7daec7b4641">type</a> = <a class="code" href="group__Eina__Value__Group.html#ga0d54e0b952b44b7ac4f2fd573f7839c0">EINA_VALUE_TYPE_CHAR</a>;</div>
<div class="line">   v2_members[2].<a class="code" href="struct__Eina__Value__Struct__Member.html#a615cdf08597bd18623c8c7daec7b4641">type</a> = <a class="code" href="group__Eina__Value__Group.html#ga17974fd9ab773a3efefd591ffde58f77">EINA_VALUE_TYPE_INT</a>;</div>
<div class="line">   <span class="keyword">static</span> <a class="code" href="struct__Eina__Value__Struct__Desc.html">Eina_Value_Struct_Desc</a> v2_desc = {</div>
<div class="line">     <a class="code" href="group__Eina__Value__Struct__Group.html#gae76aada4965672ce991f1f41baf71975">EINA_VALUE_STRUCT_DESC_VERSION</a>,</div>
<div class="line">     NULL, <span class="comment">// no special operations</span></div>
<div class="line">     v2_members,</div>
<div class="line">     <a class="code" href="group__Eina__Types__Group.html#ga7c1b6f81660b4e30516169e9e7d3261c">EINA_C_ARRAY_LENGTH</a>(v2_members),</div>
<div class="line">     <span class="keyword">sizeof</span>(My_Struct_V2)</div>
<div class="line">   };</div>
<div class="line">   V2_DESC = &amp;v2_desc;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> rand_init(<a name="_a8"></a><a class="code" href="struct__Eina__Value.html">Eina_Value</a> *v)</div>
<div class="line">{</div>
<div class="line">   <span class="keywordflow">if</span> (v-&gt;type != <a name="a9"></a><a class="code" href="group__Eina__Value__Group.html#ga8147143699c5f5a686415090080d3f9e">EINA_VALUE_TYPE_STRUCT</a>)</div>
<div class="line">     <span class="keywordflow">return</span>;</div>
<div class="line"> </div>
<div class="line">   <a name="a10"></a><a class="code" href="group__Eina__Value__Struct__Group.html#ga476aa64a399aba776fa14f2fb065b268">eina_value_struct_set</a>(v, <span class="stringliteral">&quot;param1&quot;</span>, rand());</div>
<div class="line">   <a class="code" href="group__Eina__Value__Struct__Group.html#ga476aa64a399aba776fa14f2fb065b268">eina_value_struct_set</a>(v, <span class="stringliteral">&quot;param2&quot;</span>, rand() % 256);</div>
<div class="line">   <a class="code" href="group__Eina__Value__Struct__Group.html#ga476aa64a399aba776fa14f2fb065b268">eina_value_struct_set</a>(v, <span class="stringliteral">&quot;param3&quot;</span>, rand());</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> my_struct_use(<a class="code" href="struct__Eina__Value.html">Eina_Value</a> *params)</div>
<div class="line">{</div>
<div class="line">   <span class="keywordtype">int</span> p1, p3;</div>
<div class="line">   <span class="keywordtype">char</span> p2;</div>
<div class="line"> </div>
<div class="line">   <a name="a11"></a><a class="code" href="group__Eina__Value__Struct__Group.html#ga07a7cc420f03a247dffe4d13ce1ad6c5">eina_value_struct_get</a>(params, <span class="stringliteral">&quot;param1&quot;</span>, &amp;p1);</div>
<div class="line">   <a class="code" href="group__Eina__Value__Struct__Group.html#ga07a7cc420f03a247dffe4d13ce1ad6c5">eina_value_struct_get</a>(params, <span class="stringliteral">&quot;param2&quot;</span>, &amp;p2);</div>
<div class="line">   printf(<span class="stringliteral">&quot;param1: %d\nparam2: %c\n&quot;</span>, p1, p2);</div>
<div class="line"> </div>
<div class="line">   <span class="keywordflow">if</span> (<a class="code" href="group__Eina__Value__Struct__Group.html#ga07a7cc420f03a247dffe4d13ce1ad6c5">eina_value_struct_get</a>(params, <span class="stringliteral">&quot;param3&quot;</span>, &amp;p3))</div>
<div class="line">     printf(<span class="stringliteral">&quot;param3: %d\n&quot;</span>, p3);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv)</div>
<div class="line">{</div>
<div class="line">   (void)argc;</div>
<div class="line">   (void)argv;</div>
<div class="line">   <a class="code" href="struct__Eina__Value.html">Eina_Value</a> *v1, *v2;</div>
<div class="line"> </div>
<div class="line">   <a name="a12"></a><a class="code" href="group__Eina__Main__Group.html#ga81b8137665b8a4d2cb38ca50017d4c74">eina_init</a>();</div>
<div class="line">   value_init();</div>
<div class="line"> </div>
<div class="line">   v1 = <a name="a13"></a><a class="code" href="group__Eina__Value__Struct__Group.html#ga6347bb1a1caca86d9d732620468bba53">eina_value_struct_new</a>(V1_DESC);</div>
<div class="line">   v2 = <a class="code" href="group__Eina__Value__Struct__Group.html#ga6347bb1a1caca86d9d732620468bba53">eina_value_struct_new</a>(V2_DESC);</div>
<div class="line"> </div>
<div class="line">   rand_init(v1);</div>
<div class="line">   my_struct_use(v1);</div>
<div class="line"> </div>
<div class="line">   rand_init(v2);</div>
<div class="line">   my_struct_use(v2);</div>
<div class="line"> </div>
<div class="line">   <a name="a14"></a><a class="code" href="group__Eina__Value__Value__Group.html#ga27a121e20a7109d5eae7203fc0f54850">eina_value_free</a>(v1);</div>
<div class="line">   <a class="code" href="group__Eina__Value__Value__Group.html#ga27a121e20a7109d5eae7203fc0f54850">eina_value_free</a>(v2);</div>
<div class="line">   <a name="a15"></a><a class="code" href="group__Eina__Main__Group.html#ga5bf35513199d5220341437c05696285d">eina_shutdown</a>();</div>
<div class="line">}</div>
<div class="ttc" id="aEina_8h_html"><div class="ttname"><a href="Eina_8h.html">Eina.h</a></div><div class="ttdoc">Eina Utility library.</div></div>
<div class="ttc" id="agroup__Eina__Main__Group_html_ga5bf35513199d5220341437c05696285d"><div class="ttname"><a href="group__Eina__Main__Group.html#ga5bf35513199d5220341437c05696285d">eina_shutdown</a></div><div class="ttdeci">EINA_API int eina_shutdown(void)</div><div class="ttdoc">Shuts down the Eina library.</div><div class="ttdef"><b>Definition:</b> eina_main.c:379</div></div>
<div class="ttc" id="agroup__Eina__Main__Group_html_ga81b8137665b8a4d2cb38ca50017d4c74"><div class="ttname"><a href="group__Eina__Main__Group.html#ga81b8137665b8a4d2cb38ca50017d4c74">eina_init</a></div><div class="ttdeci">EINA_API int eina_init(void)</div><div class="ttdoc">Initializes the Eina library.</div><div class="ttdef"><b>Definition:</b> eina_main.c:291</div></div>
<div class="ttc" id="agroup__Eina__Types__Group_html_ga7c1b6f81660b4e30516169e9e7d3261c"><div class="ttname"><a href="group__Eina__Types__Group.html#ga7c1b6f81660b4e30516169e9e7d3261c">EINA_C_ARRAY_LENGTH</a></div><div class="ttdeci">#define EINA_C_ARRAY_LENGTH(arr)</div><div class="ttdoc">Macro to return the array length of a standard c array.</div><div class="ttdef"><b>Definition:</b> eina_types.h:621</div></div>
<div class="ttc" id="agroup__Eina__Value__Group_html_ga0d54e0b952b44b7ac4f2fd573f7839c0"><div class="ttname"><a href="group__Eina__Value__Group.html#ga0d54e0b952b44b7ac4f2fd573f7839c0">EINA_VALUE_TYPE_CHAR</a></div><div class="ttdeci">EINA_API const Eina_Value_Type * EINA_VALUE_TYPE_CHAR</div><div class="ttdoc">manages char type.</div><div class="ttdef"><b>Definition:</b> eina_value.c:5600</div></div>
<div class="ttc" id="agroup__Eina__Value__Group_html_ga17974fd9ab773a3efefd591ffde58f77"><div class="ttname"><a href="group__Eina__Value__Group.html#ga17974fd9ab773a3efefd591ffde58f77">EINA_VALUE_TYPE_INT</a></div><div class="ttdeci">EINA_API const Eina_Value_Type * EINA_VALUE_TYPE_INT</div><div class="ttdoc">manages int type.</div><div class="ttdef"><b>Definition:</b> eina_value.c:5602</div></div>
<div class="ttc" id="agroup__Eina__Value__Group_html_ga8147143699c5f5a686415090080d3f9e"><div class="ttname"><a href="group__Eina__Value__Group.html#ga8147143699c5f5a686415090080d3f9e">EINA_VALUE_TYPE_STRUCT</a></div><div class="ttdeci">EINA_API const Eina_Value_Type * EINA_VALUE_TYPE_STRUCT</div><div class="ttdoc">manages struct type.</div><div class="ttdef"><b>Definition:</b> eina_value.c:5614</div></div>
<div class="ttc" id="agroup__Eina__Value__Struct__Group_html_ga07a7cc420f03a247dffe4d13ce1ad6c5"><div class="ttname"><a href="group__Eina__Value__Struct__Group.html#ga07a7cc420f03a247dffe4d13ce1ad6c5">eina_value_struct_get</a></div><div class="ttdeci">static Eina_Bool eina_value_struct_get(const Eina_Value *value, const char *name,...)</div><div class="ttdoc">Gets the generic value from a struct member.</div></div>
<div class="ttc" id="agroup__Eina__Value__Struct__Group_html_ga139206ef35b0b76e87eef56a202c0ae9"><div class="ttname"><a href="group__Eina__Value__Struct__Group.html#ga139206ef35b0b76e87eef56a202c0ae9">EINA_VALUE_STRUCT_MEMBER</a></div><div class="ttdeci">#define EINA_VALUE_STRUCT_MEMBER(eina_value_type, type, member)</div><div class="ttdoc">Helper to define Eina_Value_Struct_Member fields, uses offsetof() with type and member.</div><div class="ttdef"><b>Definition:</b> eina_value.h:3160</div></div>
<div class="ttc" id="agroup__Eina__Value__Struct__Group_html_ga476aa64a399aba776fa14f2fb065b268"><div class="ttname"><a href="group__Eina__Value__Struct__Group.html#ga476aa64a399aba776fa14f2fb065b268">eina_value_struct_set</a></div><div class="ttdeci">static Eina_Bool eina_value_struct_set(Eina_Value *value, const char *name,...)</div><div class="ttdoc">Sets the generic value in a struct member.</div></div>
<div class="ttc" id="agroup__Eina__Value__Struct__Group_html_ga6347bb1a1caca86d9d732620468bba53"><div class="ttname"><a href="group__Eina__Value__Struct__Group.html#ga6347bb1a1caca86d9d732620468bba53">eina_value_struct_new</a></div><div class="ttdeci">EINA_API Eina_Value * eina_value_struct_new(const Eina_Value_Struct_Desc *desc)</div><div class="ttdoc">Creates generic value storage of type struct.</div><div class="ttdef"><b>Definition:</b> eina_value.c:5823</div></div>
<div class="ttc" id="agroup__Eina__Value__Struct__Group_html_gae76aada4965672ce991f1f41baf71975"><div class="ttname"><a href="group__Eina__Value__Struct__Group.html#gae76aada4965672ce991f1f41baf71975">EINA_VALUE_STRUCT_DESC_VERSION</a></div><div class="ttdeci">#define EINA_VALUE_STRUCT_DESC_VERSION</div><div class="ttdoc">Current API version, used to validate _Eina_Value_Struct_Desc.</div><div class="ttdef"><b>Definition:</b> eina_value.h:3131</div></div>
<div class="ttc" id="agroup__Eina__Value__Value__Group_html_ga27a121e20a7109d5eae7203fc0f54850"><div class="ttname"><a href="group__Eina__Value__Value__Group.html#ga27a121e20a7109d5eae7203fc0f54850">eina_value_free</a></div><div class="ttdeci">EINA_API void eina_value_free(Eina_Value *value)</div><div class="ttdoc">Frees value and its data.</div><div class="ttdef"><b>Definition:</b> eina_value.c:5645</div></div>
<div class="ttc" id="astruct__Eina__Value__Struct__Desc_html"><div class="ttname"><a href="struct__Eina__Value__Struct__Desc.html">_Eina_Value_Struct_Desc</a></div><div class="ttdoc">Describes the struct by listing its size, members and operations.</div><div class="ttdef"><b>Definition:</b> eina_value.h:3144</div></div>
<div class="ttc" id="astruct__Eina__Value__Struct__Member_html"><div class="ttname"><a href="struct__Eina__Value__Struct__Member.html">_Eina_Value_Struct_Member</a></div><div class="ttdoc">Describes a single member of struct.</div><div class="ttdef"><b>Definition:</b> eina_value.h:3121</div></div>
<div class="ttc" id="astruct__Eina__Value__Struct__Member_html_a615cdf08597bd18623c8c7daec7b4641"><div class="ttname"><a href="struct__Eina__Value__Struct__Member.html#a615cdf08597bd18623c8c7daec7b4641">_Eina_Value_Struct_Member::type</a></div><div class="ttdeci">const Eina_Value_Type * type</div><div class="ttdoc">how to use this member</div><div class="ttdef"><b>Definition:</b> eina_value.h:3123</div></div>
<div class="ttc" id="astruct__Eina__Value_html"><div class="ttname"><a href="struct__Eina__Value.html">_Eina_Value</a></div><div class="ttdoc">defines the contents of a value</div><div class="ttdef"><b>Definition:</b> eina_value.h:662</div></div>
</div><!-- fragment --> </div><!-- contents -->
<div class="footer">
  <p>
    <span class="version">EFL 1.26.99</span>
    <span class="copyright">Copyright &copy;2000-2022 <a href="http://www.enlightenment.org">enlightenment.org</a></span>
    <span class="generated">Generated @ Sat Oct 29 2022 18:09:46</span>
  </p>
</div>
</body>
</html>
