<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <title>Sorting Eina_List elements</title>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-110876574-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-110876574-1');
  </script>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <link rel="icon" href="favicon.png" type="image/x-icon">
  <link rel="shortcut icon" href="favicon.png" type="image/x-icon">
  <link rel="icon" href="favicon.png" type="image/ico">
  <link rel="shortcut icon" href="favicon.png" type="image/ico">
  <link rel="stylesheet" type="text/css" href="e.css">
</head>
<body>
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Sorting Eina_List elements </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p></p>
<p>If you don't know how to create lists see <a class="el" href="eina_list_01_example_page.html">Adding elements to Eina_List</a>.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="Eina_8h.html">Eina.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span></div>
<div class="line">main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv)</div>
<div class="line">{</div>
<div class="line">   (void)argc;</div>
<div class="line">   (void)argv;</div>
<div class="line">   <a class="code" href="struct__Eina__List.html">Eina_List</a> *list = NULL, *other_list = NULL;</div>
<div class="line">   <a class="code" href="struct__Eina__List.html">Eina_List</a> *l;</div>
<div class="line">   <span class="keywordtype">void</span> *data;</div>
<div class="line">   <span class="keywordtype">int</span> cmp_result;</div>
<div class="line">   <a class="code" href="group__Eina__Types__Group.html#ga1b31ffcc0d46eed63a2381c5a011b486">Eina_Compare_Cb</a> cmp_func = (<a class="code" href="group__Eina__Types__Group.html#ga1b31ffcc0d46eed63a2381c5a011b486">Eina_Compare_Cb</a>)strcmp;</div>
<div class="line"> </div>
<div class="line">   <a class="code" href="group__Eina__Main__Group.html#ga81b8137665b8a4d2cb38ca50017d4c74">eina_init</a>();</div>
<div class="line"> </div>
<div class="line">   list = <a class="code" href="group__Eina__List__Group.html#gaa4ff7ace0fcf8c3dc0d931068069a521">eina_list_append</a>(list, <span class="stringliteral">&quot;starbuck&quot;</span>);</div>
<div class="line">   list = <a class="code" href="group__Eina__List__Group.html#gaa4ff7ace0fcf8c3dc0d931068069a521">eina_list_append</a>(list, <span class="stringliteral">&quot;appolo&quot;</span>);</div>
<div class="line">   list = <a class="code" href="group__Eina__List__Group.html#gaa4ff7ace0fcf8c3dc0d931068069a521">eina_list_append</a>(list, <span class="stringliteral">&quot;boomer&quot;</span>);</div>
<div class="ttc" id="aEina_8h_html"><div class="ttname"><a href="Eina_8h.html">Eina.h</a></div><div class="ttdoc">Eina Utility library.</div></div>
<div class="ttc" id="agroup__Eina__List__Group_html_gaa4ff7ace0fcf8c3dc0d931068069a521"><div class="ttname"><a href="group__Eina__List__Group.html#gaa4ff7ace0fcf8c3dc0d931068069a521">eina_list_append</a></div><div class="ttdeci">EINA_API Eina_List * eina_list_append(Eina_List *list, const void *data)</div><div class="ttdoc">Appends the given data to the given linked list.</div><div class="ttdef"><b>Definition:</b> eina_list.c:584</div></div>
<div class="ttc" id="agroup__Eina__Main__Group_html_ga81b8137665b8a4d2cb38ca50017d4c74"><div class="ttname"><a href="group__Eina__Main__Group.html#ga81b8137665b8a4d2cb38ca50017d4c74">eina_init</a></div><div class="ttdeci">EINA_API int eina_init(void)</div><div class="ttdoc">Initializes the Eina library.</div><div class="ttdef"><b>Definition:</b> eina_main.c:291</div></div>
<div class="ttc" id="agroup__Eina__Types__Group_html_ga1b31ffcc0d46eed63a2381c5a011b486"><div class="ttname"><a href="group__Eina__Types__Group.html#ga1b31ffcc0d46eed63a2381c5a011b486">Eina_Compare_Cb</a></div><div class="ttdeci">int(* Eina_Compare_Cb)(const void *data1, const void *data2)</div><div class="ttdoc">Function used in functions using sorting.</div><div class="ttdef"><b>Definition:</b> eina_types.h:548</div></div>
<div class="ttc" id="astruct__Eina__List_html"><div class="ttname"><a href="struct__Eina__List.html">_Eina_List</a></div><div class="ttdoc">Type for a generic double linked list.</div><div class="ttdef"><b>Definition:</b> eina_list.h:318</div></div>
</div><!-- fragment --><p>This is the code we have already seen to create a list. Now if we need to search the list we can do it like this: </p><div class="fragment"><div class="line"> </div>
<div class="line">   data = <a class="code" href="group__Eina__List__Group.html#gaebe6f4dd6f65f04855c04767b022024f">eina_list_search_unsorted</a>(list, cmp_func, <span class="stringliteral">&quot;boomer&quot;</span>);</div>
<div class="line">   l = <a class="code" href="group__Eina__List__Group.html#ga25b42f1ba474b379289bd3f47c5e51fa">eina_list_search_unsorted_list</a>(list, cmp_func, <span class="stringliteral">&quot;boomer&quot;</span>);</div>
<div class="line">   <span class="keywordflow">if</span> (l-&gt;<a class="code" href="struct__Eina__List.html#a043e22d601d3a0504f30255a43a25e7a">data</a> != data)</div>
<div class="line">     <span class="keywordflow">return</span> 1;</div>
<div class="ttc" id="agroup__Eina__List__Group_html_ga25b42f1ba474b379289bd3f47c5e51fa"><div class="ttname"><a href="group__Eina__List__Group.html#ga25b42f1ba474b379289bd3f47c5e51fa">eina_list_search_unsorted_list</a></div><div class="ttdeci">EINA_API Eina_List * eina_list_search_unsorted_list(const Eina_List *list, Eina_Compare_Cb func, const void *data)</div><div class="ttdoc">Returns node if data is in the unsorted list.</div><div class="ttdef"><b>Definition:</b> eina_list.c:1549</div></div>
<div class="ttc" id="agroup__Eina__List__Group_html_gaebe6f4dd6f65f04855c04767b022024f"><div class="ttname"><a href="group__Eina__List__Group.html#gaebe6f4dd6f65f04855c04767b022024f">eina_list_search_unsorted</a></div><div class="ttdeci">EINA_API void * eina_list_search_unsorted(const Eina_List *list, Eina_Compare_Cb func, const void *data)</div><div class="ttdoc">Returns node data if it is in the unsorted list.</div><div class="ttdef"><b>Definition:</b> eina_list.c:1565</div></div>
<div class="ttc" id="astruct__Eina__List_html_a043e22d601d3a0504f30255a43a25e7a"><div class="ttname"><a href="struct__Eina__List.html#a043e22d601d3a0504f30255a43a25e7a">_Eina_List::data</a></div><div class="ttdeci">void * data</div><div class="ttdoc">Pointer to list element payload.</div><div class="ttdef"><b>Definition:</b> eina_list.h:319</div></div>
</div><!-- fragment --><p> However if searching the list multiple times it probably is better to sort the list since the sorted_search functions are much faster: </p><div class="fragment"><div class="line"> </div>
<div class="line">   list = <a class="code" href="group__Eina__List__Group.html#ga661dd1a1c008f09d3ca94c8ffacdea5e">eina_list_sort</a>(list, 0, cmp_func);</div>
<div class="line"> </div>
<div class="line">   data = <a class="code" href="group__Eina__List__Group.html#ga36a635d8556c52c9490dac9431c314c8">eina_list_search_sorted</a>(list, cmp_func, <span class="stringliteral">&quot;starbuck&quot;</span>);</div>
<div class="line">   l = <a class="code" href="group__Eina__List__Group.html#ga95e1fda7071f8a93a8346fb9c22ba6f4">eina_list_search_sorted_list</a>(list, cmp_func, <span class="stringliteral">&quot;starbuck&quot;</span>);</div>
<div class="line">   <span class="keywordflow">if</span> (l-&gt;<a class="code" href="struct__Eina__List.html#a043e22d601d3a0504f30255a43a25e7a">data</a> != data)</div>
<div class="line">     <span class="keywordflow">return</span> 1;</div>
<div class="ttc" id="agroup__Eina__List__Group_html_ga36a635d8556c52c9490dac9431c314c8"><div class="ttname"><a href="group__Eina__List__Group.html#ga36a635d8556c52c9490dac9431c314c8">eina_list_search_sorted</a></div><div class="ttdeci">EINA_API void * eina_list_search_sorted(const Eina_List *list, Eina_Compare_Cb func, const void *data)</div><div class="ttdoc">Returns node data if it is in the sorted list.</div><div class="ttdef"><b>Definition:</b> eina_list.c:1541</div></div>
<div class="ttc" id="agroup__Eina__List__Group_html_ga661dd1a1c008f09d3ca94c8ffacdea5e"><div class="ttname"><a href="group__Eina__List__Group.html#ga661dd1a1c008f09d3ca94c8ffacdea5e">eina_list_sort</a></div><div class="ttdeci">EINA_API Eina_List * eina_list_sort(Eina_List *list, unsigned int limit, Eina_Compare_Cb func)</div><div class="ttdoc">Sorts a list according to the ordering func will return.</div><div class="ttdef"><b>Definition:</b> eina_list.c:1112</div></div>
<div class="ttc" id="agroup__Eina__List__Group_html_ga95e1fda7071f8a93a8346fb9c22ba6f4"><div class="ttname"><a href="group__Eina__List__Group.html#ga95e1fda7071f8a93a8346fb9c22ba6f4">eina_list_search_sorted_list</a></div><div class="ttdeci">EINA_API Eina_List * eina_list_search_sorted_list(const Eina_List *list, Eina_Compare_Cb func, const void *data)</div><div class="ttdoc">Returns node if data is in the sorted list.</div><div class="ttdef"><b>Definition:</b> eina_list.c:1522</div></div>
</div><!-- fragment --><p> Once the list is sorted it's not a good idea to use append/prepend functions since that would add the element in the wrong place, instead elements should be added with <a class="el" href="group__Eina__List__Group.html#ga5f923534ed6974a2f7840c9819b74cc0">eina_list_sorted_insert()</a>: </p><div class="fragment"><div class="line"> </div>
<div class="line">   list = <a class="code" href="group__Eina__List__Group.html#ga5f923534ed6974a2f7840c9819b74cc0">eina_list_sorted_insert</a>(list, cmp_func, <span class="stringliteral">&quot;helo&quot;</span>);</div>
<div class="ttc" id="agroup__Eina__List__Group_html_ga5f923534ed6974a2f7840c9819b74cc0"><div class="ttname"><a href="group__Eina__List__Group.html#ga5f923534ed6974a2f7840c9819b74cc0">eina_list_sorted_insert</a></div><div class="ttdeci">EINA_API Eina_List * eina_list_sorted_insert(Eina_List *list, Eina_Compare_Cb func, const void *data)</div><div class="ttdoc">Inserts a new node into a sorted list.</div><div class="ttdef"><b>Definition:</b> eina_list.c:757</div></div>
</div><!-- fragment --><p> A noteworthy use case is adding an element to a list only if it doesn't exist already, this can accomplished by searching for the element that is closest to what is being added, and if that doesn't match add: </p><div class="fragment"><div class="line"> </div>
<div class="line">   l = <a class="code" href="group__Eina__List__Group.html#ga3ec174303c611830103dec6f8ba3c76c">eina_list_search_sorted_near_list</a>(list, cmp_func, <span class="stringliteral">&quot;hera&quot;</span>, &amp;cmp_result);</div>
<div class="line">   <span class="keywordflow">if</span> (cmp_result &gt; 0)</div>
<div class="line">     list = <a class="code" href="group__Eina__List__Group.html#ga6ef9e2a16df8181ea6764b2adcc09aa1">eina_list_prepend_relative_list</a>(list, <span class="stringliteral">&quot;hera&quot;</span>, l);</div>
<div class="line">   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cmp_result &lt; 0)</div>
<div class="line">     list = <a class="code" href="group__Eina__List__Group.html#ga4235b0ce1dad5a9cde1af4770ce3d586">eina_list_append_relative_list</a>(list, <span class="stringliteral">&quot;hera&quot;</span>, l);</div>
<div class="ttc" id="agroup__Eina__List__Group_html_ga3ec174303c611830103dec6f8ba3c76c"><div class="ttname"><a href="group__Eina__List__Group.html#ga3ec174303c611830103dec6f8ba3c76c">eina_list_search_sorted_near_list</a></div><div class="ttdeci">EINA_API Eina_List * eina_list_search_sorted_near_list(const Eina_List *list, Eina_Compare_Cb func, const void *data, int *result_cmp)</div><div class="ttdoc">Returns node nearest to data from the sorted list.</div><div class="ttdef"><b>Definition:</b> eina_list.c:1439</div></div>
<div class="ttc" id="agroup__Eina__List__Group_html_ga4235b0ce1dad5a9cde1af4770ce3d586"><div class="ttname"><a href="group__Eina__List__Group.html#ga4235b0ce1dad5a9cde1af4770ce3d586">eina_list_append_relative_list</a></div><div class="ttdeci">EINA_API Eina_List * eina_list_append_relative_list(Eina_List *list, const void *data, Eina_List *relative)</div><div class="ttdoc">Appends a list node to a linked list after the specified member.</div><div class="ttdef"><b>Definition:</b> eina_list.c:670</div></div>
<div class="ttc" id="agroup__Eina__List__Group_html_ga6ef9e2a16df8181ea6764b2adcc09aa1"><div class="ttname"><a href="group__Eina__List__Group.html#ga6ef9e2a16df8181ea6764b2adcc09aa1">eina_list_prepend_relative_list</a></div><div class="ttdeci">EINA_API Eina_List * eina_list_prepend_relative_list(Eina_List *list, const void *data, Eina_List *relative)</div><div class="ttdoc">Prepends a list node to a linked list before the specified member.</div><div class="ttdef"><b>Definition:</b> eina_list.c:724</div></div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd><a class="el" href="group__Eina__List__Group.html#ga3ec174303c611830103dec6f8ba3c76c">eina_list_search_sorted_near_list()</a> will tell you not only the nearest node to what was searched for but how it compares to your term, this way it is easy to know if you have to add before or after that node.</dd></dl>
<p>It is sometimes useful to get a portion of the list as another list, here we take every element that comes after "boomer" and split it into "other_list": </p><div class="fragment"><div class="line"> </div>
<div class="line">   l = <a class="code" href="group__Eina__List__Group.html#ga95e1fda7071f8a93a8346fb9c22ba6f4">eina_list_search_sorted_list</a>(list, cmp_func, <span class="stringliteral">&quot;boomer&quot;</span>);</div>
<div class="line">   list = <a class="code" href="group__Eina__List__Group.html#ga22c9f615a2f343680bf5b62b78087237">eina_list_split_list</a>(list, l, &amp;other_list);</div>
<div class="ttc" id="agroup__Eina__List__Group_html_ga22c9f615a2f343680bf5b62b78087237"><div class="ttname"><a href="group__Eina__List__Group.html#ga22c9f615a2f343680bf5b62b78087237">eina_list_split_list</a></div><div class="ttdeci">EINA_API Eina_List * eina_list_split_list(Eina_List *list, Eina_List *relative, Eina_List **right)</div><div class="ttdoc">Splits a list into 2 lists.</div><div class="ttdef"><b>Definition:</b> eina_list.c:1316</div></div>
</div><!-- fragment --><p> It is also possible to add entire lists of elements using <a class="el" href="group__Eina__List__Group.html#gaa5de77499b7e6de0e0d1848656bb606e">eina_list_sorted_merge()</a>: </p><div class="fragment"><div class="line"> </div>
<div class="line">   other_list = <a class="code" href="group__Eina__List__Group.html#ga661dd1a1c008f09d3ca94c8ffacdea5e">eina_list_sort</a>(other_list, 0, cmp_func);</div>
<div class="line"> </div>
<div class="line">   list = <a class="code" href="group__Eina__List__Group.html#gaa5de77499b7e6de0e0d1848656bb606e">eina_list_sorted_merge</a>(list, other_list, cmp_func);</div>
<div class="ttc" id="agroup__Eina__List__Group_html_gaa5de77499b7e6de0e0d1848656bb606e"><div class="ttname"><a href="group__Eina__List__Group.html#gaa5de77499b7e6de0e0d1848656bb606e">eina_list_sorted_merge</a></div><div class="ttdeci">EINA_API Eina_List * eina_list_sorted_merge(Eina_List *left, Eina_List *right, Eina_Compare_Cb func)</div><div class="ttdoc">Merges two sorted list according to the ordering func will return.</div><div class="ttdef"><b>Definition:</b> eina_list.c:1362</div></div>
</div><!-- fragment --><p> And as always release memory and shutdown eina before ending: </p><div class="fragment"><div class="line"> </div>
<div class="line">   <a class="code" href="group__Eina__List__Group.html#ga2fe790d74d0efd278e3f4a1e11ab141d">eina_list_free</a>(list);</div>
<div class="line"> </div>
<div class="line">   <a class="code" href="group__Eina__Main__Group.html#ga5bf35513199d5220341437c05696285d">eina_shutdown</a>();</div>
<div class="line"> </div>
<div class="line">   <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="agroup__Eina__List__Group_html_ga2fe790d74d0efd278e3f4a1e11ab141d"><div class="ttname"><a href="group__Eina__List__Group.html#ga2fe790d74d0efd278e3f4a1e11ab141d">eina_list_free</a></div><div class="ttdeci">EINA_API Eina_List * eina_list_free(Eina_List *list)</div><div class="ttdoc">Frees an entire list and all the nodes, ignoring the data contained.</div><div class="ttdef"><b>Definition:</b> eina_list.c:823</div></div>
<div class="ttc" id="agroup__Eina__Main__Group_html_ga5bf35513199d5220341437c05696285d"><div class="ttname"><a href="group__Eina__Main__Group.html#ga5bf35513199d5220341437c05696285d">eina_shutdown</a></div><div class="ttdeci">EINA_API int eina_shutdown(void)</div><div class="ttdoc">Shuts down the Eina library.</div><div class="ttdef"><b>Definition:</b> eina_main.c:379</div></div>
</div><!-- fragment --><p> The full source code can be found on the examples folder on the <a class="el" href="eina_list_02_c.html">eina_list_02.c</a> file. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<div class="footer">
  <p>
    <span class="version">EFL 1.26.99</span>
    <span class="copyright">Copyright &copy;2000-2022 <a href="http://www.enlightenment.org">enlightenment.org</a></span>
    <span class="generated">Generated @ Sat Oct 29 2022 18:10:33</span>
  </p>
</div>
</body>
</html>
