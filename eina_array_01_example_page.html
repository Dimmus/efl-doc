<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <title>Basic array usage</title>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-110876574-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-110876574-1');
  </script>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <link rel="icon" href="favicon.png" type="image/x-icon">
  <link rel="shortcut icon" href="favicon.png" type="image/x-icon">
  <link rel="icon" href="favicon.png" type="image/ico">
  <link rel="shortcut icon" href="favicon.png" type="image/ico">
  <link rel="stylesheet" type="text/css" href="e.css">
</head>
<body>
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Basic array usage </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p></p>
<p>For this example we add stdlib.h, stdio.h and string.h for some convenience functions. The first thing to do to be able to use an <a class="el" href="group__Eina__Array__Group.html#ga2a57284ee83a7e767485b7ae2f5df86c">Eina_Array</a> is to include <a class="el" href="Eina_8h.html" title="Eina Utility library.">Eina.h</a>: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="Eina_8h.html">Eina.h</a>&gt;</span></div>
<div class="ttc" id="aEina_8h_html"><div class="ttname"><a href="Eina_8h.html">Eina.h</a></div><div class="ttdoc">Eina Utility library.</div></div>
</div><!-- fragment --><p> Here we have a callback that prints the element given to it: </p><div class="fragment"><div class="line"> </div>
<div class="line"><span class="keyword">static</span> <a class="code" href="group__Eina__Types__Group.html#ga3fe0caf72e93b1bab1ca8ee3ccf3f226">Eina_Bool</a></div>
<div class="line">_print(<span class="keyword">const</span> <span class="keywordtype">void</span> *container <a class="code" href="group__Eina__Types__Group.html#ga82d751be730f849719ca292f9558be87">EINA_UNUSED</a>, <span class="keywordtype">void</span> *data, <span class="keywordtype">void</span> *fdata <a class="code" href="group__Eina__Types__Group.html#ga82d751be730f849719ca292f9558be87">EINA_UNUSED</a>)</div>
<div class="line">{</div>
<div class="line">  printf(<span class="stringliteral">&quot;%s\n&quot;</span>, (<span class="keywordtype">char</span> *)data);</div>
<div class="line">   <span class="keywordflow">return</span> <a class="code" href="group__Eina__Types__Group.html#ga05c12dacc8b4058994df842b41be85fc">EINA_TRUE</a>;</div>
<div class="line">}</div>
<div class="ttc" id="agroup__Eina__Types__Group_html_ga05c12dacc8b4058994df842b41be85fc"><div class="ttname"><a href="group__Eina__Types__Group.html#ga05c12dacc8b4058994df842b41be85fc">EINA_TRUE</a></div><div class="ttdeci">#define EINA_TRUE</div><div class="ttdoc">boolean value TRUE (numerical value 1)</div><div class="ttdef"><b>Definition:</b> eina_types.h:539</div></div>
<div class="ttc" id="agroup__Eina__Types__Group_html_ga3fe0caf72e93b1bab1ca8ee3ccf3f226"><div class="ttname"><a href="group__Eina__Types__Group.html#ga3fe0caf72e93b1bab1ca8ee3ccf3f226">Eina_Bool</a></div><div class="ttdeci">unsigned char Eina_Bool</div><div class="ttdoc">Type to mimic a boolean.</div><div class="ttdef"><b>Definition:</b> eina_types.h:527</div></div>
<div class="ttc" id="agroup__Eina__Types__Group_html_ga82d751be730f849719ca292f9558be87"><div class="ttname"><a href="group__Eina__Types__Group.html#ga82d751be730f849719ca292f9558be87">EINA_UNUSED</a></div><div class="ttdeci">#define EINA_UNUSED</div><div class="ttdoc">Used to indicate that a function parameter is purposely unused.</div><div class="ttdef"><b>Definition:</b> eina_types.h:339</div></div>
</div><!-- fragment --><p> Now we create our entry point and declare some variables, nothing special: </p><div class="fragment"><div class="line"> </div>
<div class="line"><span class="keywordtype">int</span></div>
<div class="line">main(<span class="keywordtype">int</span> argc <a class="code" href="group__Eina__Types__Group.html#ga82d751be730f849719ca292f9558be87">EINA_UNUSED</a>, <span class="keywordtype">char</span> **argv <a class="code" href="group__Eina__Types__Group.html#ga82d751be730f849719ca292f9558be87">EINA_UNUSED</a>)</div>
<div class="line">{</div>
<div class="line">   <span class="keyword">const</span> <span class="keywordtype">char</span>* strings[] = {</div>
<div class="line">      <span class="stringliteral">&quot;helo&quot;</span>, <span class="stringliteral">&quot;hera&quot;</span>, <span class="stringliteral">&quot;starbuck&quot;</span>, <span class="stringliteral">&quot;kat&quot;</span>, <span class="stringliteral">&quot;boomer&quot;</span>,</div>
<div class="line">      <span class="stringliteral">&quot;hotdog&quot;</span>, <span class="stringliteral">&quot;longshot&quot;</span>, <span class="stringliteral">&quot;jammer&quot;</span>, <span class="stringliteral">&quot;crashdown&quot;</span>, <span class="stringliteral">&quot;hardball&quot;</span>,</div>
<div class="line">      <span class="stringliteral">&quot;duck&quot;</span>, <span class="stringliteral">&quot;racetrack&quot;</span>, <span class="stringliteral">&quot;apolo&quot;</span>, <span class="stringliteral">&quot;husker&quot;</span>, <span class="stringliteral">&quot;freaker&quot;</span>,</div>
<div class="line">      <span class="stringliteral">&quot;skulls&quot;</span>, <span class="stringliteral">&quot;bulldog&quot;</span>, <span class="stringliteral">&quot;flat top&quot;</span>, <span class="stringliteral">&quot;hammerhead&quot;</span>, <span class="stringliteral">&quot;gonzo&quot;</span></div>
<div class="line">   };</div>
<div class="line">   <a class="code" href="struct__Eina__Array.html">Eina_Array</a> *array;</div>
<div class="line">   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i;</div>
<div class="ttc" id="astruct__Eina__Array_html"><div class="ttname"><a href="struct__Eina__Array.html">_Eina_Array</a></div><div class="ttdoc">Type for an array of data.</div><div class="ttdef"><b>Definition:</b> eina_array.h:229</div></div>
</div><!-- fragment --><p> Before we can start using any array function we need to initialize eina: </p><div class="fragment"><div class="line"> </div>
<div class="line">   <a class="code" href="group__Eina__Main__Group.html#ga81b8137665b8a4d2cb38ca50017d4c74">eina_init</a>();</div>
<div class="ttc" id="agroup__Eina__Main__Group_html_ga81b8137665b8a4d2cb38ca50017d4c74"><div class="ttname"><a href="group__Eina__Main__Group.html#ga81b8137665b8a4d2cb38ca50017d4c74">eina_init</a></div><div class="ttdeci">EINA_API int eina_init(void)</div><div class="ttdoc">Initializes the Eina library.</div><div class="ttdef"><b>Definition:</b> eina_main.c:291</div></div>
</div><!-- fragment --><p> So now to actually create our array. The interesting thing here is the argument given to the <a class="el" href="group__Eina__Array__Group.html#ga900abe4f0039f5b9d48fbdbd2cb5f459" title="Creates a new array.">eina_array_new()</a> function. This argument sets how fast the array grows. </p><div class="fragment"><div class="line"> </div>
<div class="line">   array = <a class="code" href="group__Eina__Array__Group.html#ga900abe4f0039f5b9d48fbdbd2cb5f459">eina_array_new</a>(10);</div>
<div class="ttc" id="agroup__Eina__Array__Group_html_ga900abe4f0039f5b9d48fbdbd2cb5f459"><div class="ttname"><a href="group__Eina__Array__Group.html#ga900abe4f0039f5b9d48fbdbd2cb5f459">eina_array_new</a></div><div class="ttdeci">EINA_API Eina_Array * eina_array_new(unsigned int step)</div><div class="ttdoc">Creates a new array.</div><div class="ttdef"><b>Definition:</b> eina_array.c:276</div></div>
</div><!-- fragment --><p> If you know before hand how big the array will need to be you should set the step to that. In our case we can set it to the number of strings we have and since we didn't do that in the <a class="el" href="group__Eina__Array__Group.html#ga900abe4f0039f5b9d48fbdbd2cb5f459" title="Creates a new array.">eina_array_new()</a> we can do it now: </p><div class="fragment"><div class="line">   <a class="code" href="group__Eina__Array__Group.html#ga9aefecc1767d6f793ea651a4e8c3d474">eina_array_step_set</a>(array, <span class="keyword">sizeof</span>(*array), 20);</div>
<div class="ttc" id="agroup__Eina__Array__Group_html_ga9aefecc1767d6f793ea651a4e8c3d474"><div class="ttname"><a href="group__Eina__Array__Group.html#ga9aefecc1767d6f793ea651a4e8c3d474">eina_array_step_set</a></div><div class="ttdeci">EINA_API void eina_array_step_set(Eina_Array *array, unsigned int sizeof_eina_array, unsigned int step)</div><div class="ttdoc">Sets the step of an array.</div><div class="ttdef"><b>Definition:</b> eina_array.c:305</div></div>
</div><!-- fragment --><p> Now let us populate our array with some strings: </p><div class="fragment"><div class="line"> </div>
<div class="line">   <span class="keywordflow">for</span> (i = 0; i &lt; 20; i++)</div>
<div class="line">     <a class="code" href="group__Eina__Array__Group.html#ga97ac1fe353f4cd7a9762af4d4db7b9c4">eina_array_push</a>(array, strdup(strings[i]));</div>
<div class="ttc" id="agroup__Eina__Array__Group_html_ga97ac1fe353f4cd7a9762af4d4db7b9c4"><div class="ttname"><a href="group__Eina__Array__Group.html#ga97ac1fe353f4cd7a9762af4d4db7b9c4">eina_array_push</a></div><div class="ttdeci">static Eina_Bool eina_array_push(Eina_Array *array, const void *data)</div><div class="ttdoc">Appends a data item to an array.</div></div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>Notice we use strdup, so we will have to free that memory later on.</dd></dl>
<p>Now lets check the size of the array: </p><div class="fragment"><div class="line"> </div>
<div class="line">   printf(<span class="stringliteral">&quot;array count: %d\n&quot;</span>, <a class="code" href="group__Eina__Array__Group.html#gafcc60b430bbc132114ef041e589d3ecf">eina_array_count</a>(array));</div>
<div class="ttc" id="agroup__Eina__Array__Group_html_gafcc60b430bbc132114ef041e589d3ecf"><div class="ttname"><a href="group__Eina__Array__Group.html#gafcc60b430bbc132114ef041e589d3ecf">eina_array_count</a></div><div class="ttdeci">static unsigned int eina_array_count(const Eina_Array *array)</div><div class="ttdoc">Returns the number of elements in an array.</div></div>
</div><!-- fragment --><p> And now we call a function on every member of our array to print it: </p><div class="fragment"><div class="line">   <a class="code" href="group__Eina__Array__Group.html#ga8de2d191a0fffceb5bdc6376540b8db1">eina_array_foreach</a>(array, _print, NULL);</div>
<div class="ttc" id="agroup__Eina__Array__Group_html_ga8de2d191a0fffceb5bdc6376540b8db1"><div class="ttname"><a href="group__Eina__Array__Group.html#ga8de2d191a0fffceb5bdc6376540b8db1">eina_array_foreach</a></div><div class="ttdeci">static Eina_Bool eina_array_foreach(Eina_Array *array, Eina_Each_Cb cb, void *fdata)</div><div class="ttdoc">Iterates over an array using a callback function.</div></div>
</div><!-- fragment --><p> One of the strengths of <a class="el" href="group__Eina__Array__Group.html#ga2a57284ee83a7e767485b7ae2f5df86c">Eina_Array</a> over <a class="el" href="group__Eina__List__Group.html#ga3295e1210efea1fb0fd6acbf3cbc1f29">Eina_List</a> is that it has very fast random access to elements, so this is very efficient: </p><div class="fragment"><div class="line"> </div>
<div class="line">   printf(<span class="stringliteral">&quot;Top gun: %s\n&quot;</span>, (<span class="keywordtype">char</span>*)<a class="code" href="group__Eina__Array__Group.html#gac64d3d4d66b89ebc4bed47ae12a9604d">eina_array_data_get</a>(array, 2));</div>
<div class="ttc" id="agroup__Eina__Array__Group_html_gac64d3d4d66b89ebc4bed47ae12a9604d"><div class="ttname"><a href="group__Eina__Array__Group.html#gac64d3d4d66b89ebc4bed47ae12a9604d">eina_array_data_get</a></div><div class="ttdeci">static void * eina_array_data_get(const Eina_Array *array, unsigned int idx)</div><div class="ttdoc">Returns the data at a given position in an array.</div></div>
</div><!-- fragment --><p> And now we free up the memory allocated with the strdup()s: </p><div class="fragment"><div class="line"> </div>
<div class="line">   <span class="keywordflow">while</span> (<a class="code" href="group__Eina__Array__Group.html#gafcc60b430bbc132114ef041e589d3ecf">eina_array_count</a>(array))</div>
<div class="line">     free(<a class="code" href="group__Eina__Array__Group.html#gafa900c630f0eaa45dd54d907523746e0">eina_array_pop</a>(array));</div>
<div class="ttc" id="agroup__Eina__Array__Group_html_gafa900c630f0eaa45dd54d907523746e0"><div class="ttname"><a href="group__Eina__Array__Group.html#gafa900c630f0eaa45dd54d907523746e0">eina_array_pop</a></div><div class="ttdeci">static void * eina_array_pop(Eina_Array *array)</div><div class="ttdoc">Removes the last data item in an array.</div></div>
</div><!-- fragment --><p> And the array memory itself: </p><div class="fragment"><div class="line"> </div>
<div class="line">   <a class="code" href="group__Eina__Array__Group.html#ga7fa7e2cdcfb739140d5c5a5044086ce1">eina_array_free</a>(array);</div>
<div class="ttc" id="agroup__Eina__Array__Group_html_ga7fa7e2cdcfb739140d5c5a5044086ce1"><div class="ttname"><a href="group__Eina__Array__Group.html#ga7fa7e2cdcfb739140d5c5a5044086ce1">eina_array_free</a></div><div class="ttdeci">EINA_API void eina_array_free(Eina_Array *array)</div><div class="ttdoc">Frees an array.</div><div class="ttdef"><b>Definition:</b> eina_array.c:295</div></div>
</div><!-- fragment --><p> And finally shutdown eina and exit: </p><div class="fragment"><div class="line"> </div>
<div class="line">   <a class="code" href="group__Eina__Main__Group.html#ga5bf35513199d5220341437c05696285d">eina_shutdown</a>();</div>
<div class="line"> </div>
<div class="line">   <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="agroup__Eina__Main__Group_html_ga5bf35513199d5220341437c05696285d"><div class="ttname"><a href="group__Eina__Main__Group.html#ga5bf35513199d5220341437c05696285d">eina_shutdown</a></div><div class="ttdeci">EINA_API int eina_shutdown(void)</div><div class="ttdoc">Shuts down the Eina library.</div><div class="ttdef"><b>Definition:</b> eina_main.c:379</div></div>
</div><!-- fragment --><p> The full source code can be found in the examples folder in the <a class="el" href="eina_array_01_c.html">eina_array_01.c</a> file. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<div class="footer">
  <p>
    <span class="version">EFL 1.26.99</span>
    <span class="copyright">Copyright &copy;2000-2022 <a href="http://www.enlightenment.org">enlightenment.org</a></span>
    <span class="generated">Generated @ Sat Oct 29 2022 18:10:31</span>
  </p>
</div>
</body>
</html>
